{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap bf6371f93107cf06a402","webpack:///./~/qs/lib/utils.js","webpack:///./~/url/url.js","webpack:///./src/utils/merge.js","webpack:///(webpack)/buildin/amd-options.js","webpack:///./~/immutable/dist/immutable.js","webpack:///./src/actionFn.js","webpack:///./src/async.js","webpack:///./src/reducerFn.js","webpack:///./src/transformers.js","webpack:///./~/fast-apply/index.js","webpack:///./~/punycode/punycode.js","webpack:///./~/qs/lib/index.js","webpack:///./~/qs/lib/parse.js","webpack:///./~/qs/lib/stringify.js","webpack:///./~/querystring-es3/decode.js","webpack:///./~/querystring-es3/encode.js","webpack:///./~/querystring-es3/index.js","webpack:///./~/url/util.js","webpack:///(webpack)/buildin/global.js","webpack:///(webpack)/buildin/module.js","webpack:///./src/PubSub.js","webpack:///./src/createHolder.js","webpack:///./src/fetchResolver.js","webpack:///./src/urlTransform.js","webpack:///./src/utils/get.js","webpack:///./src/utils/omit.js","webpack:///./src/index.js"],"names":["internals","hexTable","Array","h","toString","toUpperCase","exports","arrayToObject","source","options","obj","plainObjects","Object","create","i","il","length","merge","target","isArray","push","concat","keys","k","kl","key","value","prototype","hasOwnProperty","call","decode","str","decodeURIComponent","replace","e","encode","out","c","charCodeAt","compact","refs","lookup","indexOf","compacted","isRegExp","isBuffer","constructor","punycode","require","util","parse","urlParse","resolve","urlResolve","resolveObject","urlResolveObject","format","urlFormat","Url","protocol","slashes","auth","host","port","hostname","hash","search","query","pathname","path","href","protocolPattern","portPattern","simplePathPattern","delims","unwise","autoEscape","nonHostChars","hostEndingChars","hostnameMaxLen","hostnamePartPattern","hostnamePartStart","unsafeProtocol","hostlessProtocol","slashedProtocol","querystring","url","parseQueryString","slashesDenoteHost","isObject","u","isString","TypeError","queryIndex","splitter","uSplit","split","slashRegex","join","rest","trim","simplePath","exec","substr","proto","lowerProto","toLowerCase","match","hostEnd","hec","atSign","lastIndexOf","slice","parseHost","ipv6Hostname","hostparts","l","part","newpart","j","validParts","notHost","bit","unshift","toASCII","p","ae","esc","encodeURIComponent","escape","qm","s","stringify","charAt","relative","rel","result","tkeys","tk","tkey","rkeys","rk","rkey","v","relPath","shift","isSourceAbs","isRelAbs","mustEndAbs","removeAllDots","srcPath","psychotic","pop","isNullOrUndefined","authInHost","isNull","last","hasTrailingSlash","up","splice","isAbsolute","mergePair","args","reduce","OBJECT","ARRAY","a","b","aType","bType","memo","global","factory","module","Immutable","SLICE$0","createClass","ctor","superClass","Iterable","isIterable","Seq","KeyedIterable","isKeyed","KeyedSeq","IndexedIterable","isIndexed","IndexedSeq","SetIterable","isAssociative","SetSeq","maybeIterable","IS_ITERABLE_SENTINEL","maybeKeyed","IS_KEYED_SENTINEL","maybeIndexed","IS_INDEXED_SENTINEL","maybeAssociative","isOrdered","maybeOrdered","IS_ORDERED_SENTINEL","Keyed","Indexed","Set","DELETE","SHIFT","SIZE","MASK","NOT_SET","CHANGE_LENGTH","DID_ALTER","MakeRef","ref","SetRef","OwnerID","arrCopy","arr","offset","len","Math","max","newArr","ii","ensureSize","iter","size","undefined","__iterate","returnTrue","wrapIndex","index","uint32Index","NaN","wholeSlice","begin","end","resolveBegin","resolveIndex","resolveEnd","defaultIndex","min","ITERATE_KEYS","ITERATE_VALUES","ITERATE_ENTRIES","REAL_ITERATOR_SYMBOL","Symbol","iterator","FAUX_ITERATOR_SYMBOL","ITERATOR_SYMBOL","Iterator","next","KEYS","VALUES","ENTRIES","inspect","toSource","iteratorValue","type","iteratorResult","done","iteratorDone","hasIterator","getIteratorFn","isIterator","maybeIterator","getIterator","iterable","iteratorFn","isArrayLike","emptySequence","toSeq","seqFromValue","of","arguments","__toString","cacheResult","_cache","__iterateUncached","entrySeq","toArray","fn","reverse","seqIterate","__iterator","seqIterator","toKeyedSeq","fromEntrySeq","keyedSeqFromValue","indexedSeqFromValue","toIndexedSeq","toSetSeq","isSeq","IS_SEQ_SENTINEL","ArraySeq","array","_array","get","notSetValue","has","maxIndex","ObjectSeq","object","_object","_keys","IterableSeq","_iterable","iterations","step","__iteratorUncached","IteratorSeq","_iterator","_iteratorCache","cache","val","maybeSeq","EMPTY_SEQ","seq","maybeIndexedSeqFromValue","useKeys","entry","fromJS","json","converter","fromJSWith","fromJSDefault","parentJSON","map","isPlainObj","toList","toMap","is","valueA","valueB","valueOf","equals","deepEqual","__hash","notAssociative","entries","every","flipped","_","allEqual","bSize","Repeat","times","_value","Infinity","EMPTY_REPEAT","includes","searchValue","this$0","other","invariant","condition","error","Error","Range","start","abs","_start","_end","_step","ceil","EMPTY_RANGE","possibleIndex","floor","offsetValue","Collection","KeyedCollection","IndexedCollection","SetCollection","imul","d","smi","i32","o","STRING_HASH_CACHE_MIN_STRLEN","cachedHashString","hashString","hashCode","hashJSObj","string","stringHashCache","STRING_HASH_CACHE_SIZE","STRING_HASH_CACHE_MAX_SIZE","usingWeakMap","weakMap","UID_HASH_KEY","canDefineProperty","propertyIsEnumerable","getIENodeHash","objHashUID","set","isExtensible","defineProperty","apply","nodeType","node","uniqueID","documentElement","WeakMap","assertNotInfinite","Map","emptyMap","isMap","withMutations","forEach","keyValues","_root","updateMap","setIn","keyPath","updateIn","remove","deleteIn","update","updater","updatedValue","updateInDeepMap","forceIterator","clear","__ownerID","__altered","mergeIntoMapWith","mergeWith","merger","iters","mergeIn","m","mergeDeep","deepMerger","mergeDeepWith","deepMergerWith","mergeDeepIn","sort","comparator","OrderedMap","sortFactory","sortBy","mapper","mutable","asMutable","wasAltered","__ensureOwner","asImmutable","MapIterator","iterate","ownerID","makeMap","maybeMap","IS_MAP_SENTINEL","MapPrototype","removeIn","ArrayMapNode","keyHash","didChangeSize","didAlter","removed","idx","exists","MAX_ARRAY_MAP_SIZE","createNodes","isEditable","newEntries","BitmapIndexedNode","bitmap","nodes","popCount","keyHashFrag","newNode","updateNode","MAX_BITMAP_INDEXED_SIZE","expandNodes","isLeafNode","newBitmap","newNodes","spliceOut","spliceIn","HashArrayMapNode","count","newCount","MIN_HASH_ARRAY_MAP_SIZE","packNodes","HashCollisionNode","mergeIntoNode","ValueNode","keyMatch","_type","_reverse","_stack","mapIteratorFrame","stack","mapIteratorValue","subNode","__prev","prev","root","EMPTY_MAP","newRoot","newSize","idx1","idx2","excluding","packedII","packedNodes","including","expandedNodes","iterables","mergeIntoCollectionWith","existing","nextValue","collection","filter","x","mergeIntoMap","keyPathIter","isNotSet","existingValue","newValue","nextExisting","nextUpdated","canEdit","newArray","newLen","after","List","empty","emptyList","isList","makeList","VNode","list","setSize","_origin","listNodeFor","updateList","insert","_capacity","_level","_tail","values","oldSize","setListBounds","mergeIntoListWith","iterateList","DONE","maybeList","IS_LIST_SENTINEL","ListPrototype","removeBefore","level","originIndex","removingFirst","newChild","oldChild","editable","editableVNode","removeAfter","sizeIndex","left","right","tailPos","getTailOffset","tail","iterateNodeOrLeaf","iterateLeaf","iterateNode","from","to","origin","capacity","EMPTY_LIST","newTail","updateVNode","nodeHas","lowerNode","newLowerNode","rawIndex","owner","oldOrigin","oldCapacity","newOrigin","newCapacity","newLevel","offsetShift","oldTailOffset","newTailOffset","oldTail","beginIndex","maxSize","emptyOrderedMap","isOrderedMap","_map","_list","updateOrderedMap","newMap","newList","makeOrderedMap","maybeOrderedMap","omap","EMPTY_ORDERED_MAP","flip","ToKeyedSequence","indexed","_iter","_useKeys","valueSeq","reversedSequence","reverseFactory","context","mappedSequence","mapFactory","resolveSize","ToIndexedSequence","ToSetSequence","FromEntriesSequence","validateEntry","indexedIterable","cacheResultThrough","flipFactory","flipSequence","makeSequence","filterFactory","predicate","filterSequence","countByFactory","grouper","groups","groupByFactory","isKeyedIter","coerce","iterableClass","reify","sliceFactory","originalSize","resolvedBegin","resolvedEnd","resolvedSize","sliceSize","sliceSeq","skipped","isSkipping","takeWhileFactory","takeSequence","iterating","skipWhileFactory","skipSequence","skipping","concatFactory","isKeyedIterable","singleton","concatSeq","flatten","sum","flattenFactory","depth","flatSequence","stopped","flatDeep","currentDepth","flatMapFactory","interposeFactory","separator","interposedSequence","defaultComparator","maxFactory","maxCompare","comp","zipWithFactory","keyIter","zipper","zipSequence","iterators","isDone","steps","some","Record","defaultValues","name","hasInitialized","RecordType","setProps","RecordTypePrototype","_name","_defaultValues","RecordPrototype","recordName","defaultVal","_empty","makeRecord","likeRecord","record","getPrototypeOf","names","setProp","bind","emptySet","isSet","add","fromKeys","keySeq","updateSet","union","intersect","originalSet","subtract","OrderedSet","__make","maybeSet","IS_SET_SENTINEL","SetPrototype","__empty","makeSet","EMPTY_SET","emptyOrderedSet","isOrderedSet","maybeOrderedSet","OrderedSetPrototype","makeOrderedSet","EMPTY_ORDERED_SET","Stack","emptyStack","isStack","unshiftAll","head","_head","peek","makeStack","pushAll","maybeStack","IS_STACK_SENTINEL","StackPrototype","EMPTY_STACK","mixin","methods","keyCopier","getOwnPropertySymbols","toJS","__toJS","toJSON","toObject","toOrderedMap","toOrderedSet","toSet","toStack","__toStringMapper","returnValue","find","findEntry","sideEffect","joined","isFirst","reducer","initialReduction","reduction","useFirst","reduceRight","reversed","not","butLast","isEmpty","countBy","entriesSequence","entryMapper","filterNot","found","findKey","findLast","findLastEntry","findLastKey","first","flatMap","searchKey","getIn","searchKeyPath","nested","groupBy","hasIn","isSubset","isSuperset","keyOf","keyMapper","lastKeyOf","maxBy","neg","defaultNegComparator","minBy","skip","amount","skipLast","skipWhile","skipUntil","take","takeLast","takeWhile","takeUntil","hashIterable","IterablePrototype","quoteString","chain","contains","mapEntries","mapKeys","KeyedIterablePrototype","JSON","findIndex","removeNum","numArgs","spliced","findLastIndex","interpose","interleave","zipped","interleaved","zip","defaultZipper","zipWith","String","ordered","keyed","hashMerge","murmurHashOfSize","actionFn","none","extractArgs","pathvars","params","callback","Function","helperCrudFunction","cb","method","defaultMiddlewareArgsParser","dispatch","getState","CRUD","ACTIONS","meta","actionFetch","actionSuccess","actionFail","actionReset","pubsub","requestHolder","request","responseHandler","holder","resultUrlT","urlOptions","urlT","rootUrl","rootUrlObject","urlObject","urlPath","globalOptions","baseOptions","opts","response","fetch","validation","then","Promise","reject","data","err","ret","res","catch","syncing","middlewareParser","reducerName","prefix","state","isLoading","requestOptions","prevData","fetchResolverOpts","actions","prefetch","fail","promise","transformer","origData","broadcast","postfetch","reset","mutation","defer","sync","isServer","server","store","modifyParams","helpers","crud","fnHelperCallback","func","helpername","callbackFn","helpersResult","newArgs","async","restFunctions","currentFunction","reducerFn","initialState","action","loading","fastApply","freeExports","freeModule","freeGlobal","window","self","maxInt","base","tMin","tMax","skew","damp","initialBias","initialN","delimiter","regexPunycode","regexNonASCII","regexSeparators","errors","baseMinusTMin","stringFromCharCode","fromCharCode","RangeError","mapDomain","parts","labels","encoded","ucs2decode","output","counter","extra","ucs2encode","basicToDigit","codePoint","digitToBasic","digit","flag","adapt","delta","numPoints","firstTime","input","inputLength","n","bias","basic","oldi","w","t","baseMinusT","handledCPCount","basicLength","q","currentValue","handledCPCountPlusOne","qMinusT","toUnicode","test","define","Stringify","Parse","Utils","arrayLimit","parameterLimit","strictNullHandling","allowPrototypes","allowDots","parseValues","pos","parseObject","cleanRoot","parseInt","indexString","isNaN","parseArrays","parseKeys","parent","child","segment","tempObj","newObj","arrayPrefixGenerators","brackets","indices","repeat","skipNulls","generateArrayPrefix","Date","toISOString","objKeys","arrayFormat","prop","qs","sep","eq","regexp","maxKeys","kstr","vstr","xs","stringifyPrimitive","isFinite","objectKeys","ks","f","arg","g","eval","webpackPolyfill","deprecate","paths","children","enumerable","PubSub","container","hasData","fetchResolver","urlTransform","rxClean","usedKeys","urlWithParams","rx","RegExp","cleanURL","usedKeysArray","qsParseOptions","mergeParams","qsStringifyOptions","urlStringParams","props","reduxApi","defaultEndpointConfig","PREFIX","config","baseConfig","fetchHolder","cfg","use","init","console","warn","reducers","events","fnConfigCallback","virtual","transformers"],"mappings":"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","file":"redux-api.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"redux-api\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"redux-api\"] = factory();\n\telse\n\t\troot[\"redux-api\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 26);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap bf6371f93107cf06a402","// Load modules\n\n\n// Declare internals\n\nvar internals = {};\ninternals.hexTable = new Array(256);\nfor (var h = 0; h < 256; ++h) {\n    internals.hexTable[h] = '%' + ((h < 16 ? '0' : '') + h.toString(16)).toUpperCase();\n}\n\n\nexports.arrayToObject = function (source, options) {\n\n    var obj = options.plainObjects ? Object.create(null) : {};\n    for (var i = 0, il = source.length; i < il; ++i) {\n        if (typeof source[i] !== 'undefined') {\n\n            obj[i] = source[i];\n        }\n    }\n\n    return obj;\n};\n\n\nexports.merge = function (target, source, options) {\n\n    if (!source) {\n        return target;\n    }\n\n    if (typeof source !== 'object') {\n        if (Array.isArray(target)) {\n            target.push(source);\n        }\n        else if (typeof target === 'object') {\n            target[source] = true;\n        }\n        else {\n            target = [target, source];\n        }\n\n        return target;\n    }\n\n    if (typeof target !== 'object') {\n        target = [target].concat(source);\n        return target;\n    }\n\n    if (Array.isArray(target) &&\n        !Array.isArray(source)) {\n\n        target = exports.arrayToObject(target, options);\n    }\n\n    var keys = Object.keys(source);\n    for (var k = 0, kl = keys.length; k < kl; ++k) {\n        var key = keys[k];\n        var value = source[key];\n\n        if (!Object.prototype.hasOwnProperty.call(target, key)) {\n            target[key] = value;\n        }\n        else {\n            target[key] = exports.merge(target[key], value, options);\n        }\n    }\n\n    return target;\n};\n\n\nexports.decode = function (str) {\n\n    try {\n        return decodeURIComponent(str.replace(/\\+/g, ' '));\n    } catch (e) {\n        return str;\n    }\n};\n\nexports.encode = function (str) {\n\n    // This code was originally written by Brian White (mscdex) for the io.js core querystring library.\n    // It has been adapted here for stricter adherence to RFC 3986\n    if (str.length === 0) {\n        return str;\n    }\n\n    if (typeof str !== 'string') {\n        str = '' + str;\n    }\n\n    var out = '';\n    for (var i = 0, il = str.length; i < il; ++i) {\n        var c = str.charCodeAt(i);\n\n        if (c === 0x2D || // -\n            c === 0x2E || // .\n            c === 0x5F || // _\n            c === 0x7E || // ~\n            (c >= 0x30 && c <= 0x39) || // 0-9\n            (c >= 0x41 && c <= 0x5A) || // a-z\n            (c >= 0x61 && c <= 0x7A)) { // A-Z\n\n            out += str[i];\n            continue;\n        }\n\n        if (c < 0x80) {\n            out += internals.hexTable[c];\n            continue;\n        }\n\n        if (c < 0x800) {\n            out += internals.hexTable[0xC0 | (c >> 6)] + internals.hexTable[0x80 | (c & 0x3F)];\n            continue;\n        }\n\n        if (c < 0xD800 || c >= 0xE000) {\n            out += internals.hexTable[0xE0 | (c >> 12)] + internals.hexTable[0x80 | ((c >> 6) & 0x3F)] + internals.hexTable[0x80 | (c & 0x3F)];\n            continue;\n        }\n\n        ++i;\n        c = 0x10000 + (((c & 0x3FF) << 10) | (str.charCodeAt(i) & 0x3FF));\n        out += internals.hexTable[0xF0 | (c >> 18)] + internals.hexTable[0x80 | ((c >> 12) & 0x3F)] + internals.hexTable[0x80 | ((c >> 6) & 0x3F)] + internals.hexTable[0x80 | (c & 0x3F)];\n    }\n\n    return out;\n};\n\nexports.compact = function (obj, refs) {\n\n    if (typeof obj !== 'object' ||\n        obj === null) {\n\n        return obj;\n    }\n\n    refs = refs || [];\n    var lookup = refs.indexOf(obj);\n    if (lookup !== -1) {\n        return refs[lookup];\n    }\n\n    refs.push(obj);\n\n    if (Array.isArray(obj)) {\n        var compacted = [];\n\n        for (var i = 0, il = obj.length; i < il; ++i) {\n            if (typeof obj[i] !== 'undefined') {\n                compacted.push(obj[i]);\n            }\n        }\n\n        return compacted;\n    }\n\n    var keys = Object.keys(obj);\n    for (i = 0, il = keys.length; i < il; ++i) {\n        var key = keys[i];\n        obj[key] = exports.compact(obj[key], refs);\n    }\n\n    return obj;\n};\n\n\nexports.isRegExp = function (obj) {\n\n    return Object.prototype.toString.call(obj) === '[object RegExp]';\n};\n\n\nexports.isBuffer = function (obj) {\n\n    if (obj === null ||\n        typeof obj === 'undefined') {\n\n        return false;\n    }\n\n    return !!(obj.constructor &&\n              obj.constructor.isBuffer &&\n              obj.constructor.isBuffer(obj));\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/qs/lib/utils.js","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar punycode = require('punycode');\nvar util = require('./util');\n\nexports.parse = urlParse;\nexports.resolve = urlResolve;\nexports.resolveObject = urlResolveObject;\nexports.format = urlFormat;\n\nexports.Url = Url;\n\nfunction Url() {\n  this.protocol = null;\n  this.slashes = null;\n  this.auth = null;\n  this.host = null;\n  this.port = null;\n  this.hostname = null;\n  this.hash = null;\n  this.search = null;\n  this.query = null;\n  this.pathname = null;\n  this.path = null;\n  this.href = null;\n}\n\n// Reference: RFC 3986, RFC 1808, RFC 2396\n\n// define these here so at least they only have to be\n// compiled once on the first module load.\nvar protocolPattern = /^([a-z0-9.+-]+:)/i,\n    portPattern = /:[0-9]*$/,\n\n    // Special case for a simple path URL\n    simplePathPattern = /^(\\/\\/?(?!\\/)[^\\?\\s]*)(\\?[^\\s]*)?$/,\n\n    // RFC 2396: characters reserved for delimiting URLs.\n    // We actually just auto-escape these.\n    delims = ['<', '>', '\"', '`', ' ', '\\r', '\\n', '\\t'],\n\n    // RFC 2396: characters not allowed for various reasons.\n    unwise = ['{', '}', '|', '\\\\', '^', '`'].concat(delims),\n\n    // Allowed by RFCs, but cause of XSS attacks.  Always escape these.\n    autoEscape = ['\\''].concat(unwise),\n    // Characters that are never ever allowed in a hostname.\n    // Note that any invalid chars are also handled, but these\n    // are the ones that are *expected* to be seen, so we fast-path\n    // them.\n    nonHostChars = ['%', '/', '?', ';', '#'].concat(autoEscape),\n    hostEndingChars = ['/', '?', '#'],\n    hostnameMaxLen = 255,\n    hostnamePartPattern = /^[+a-z0-9A-Z_-]{0,63}$/,\n    hostnamePartStart = /^([+a-z0-9A-Z_-]{0,63})(.*)$/,\n    // protocols that can allow \"unsafe\" and \"unwise\" chars.\n    unsafeProtocol = {\n      'javascript': true,\n      'javascript:': true\n    },\n    // protocols that never have a hostname.\n    hostlessProtocol = {\n      'javascript': true,\n      'javascript:': true\n    },\n    // protocols that always contain a // bit.\n    slashedProtocol = {\n      'http': true,\n      'https': true,\n      'ftp': true,\n      'gopher': true,\n      'file': true,\n      'http:': true,\n      'https:': true,\n      'ftp:': true,\n      'gopher:': true,\n      'file:': true\n    },\n    querystring = require('querystring');\n\nfunction urlParse(url, parseQueryString, slashesDenoteHost) {\n  if (url && util.isObject(url) && url instanceof Url) return url;\n\n  var u = new Url;\n  u.parse(url, parseQueryString, slashesDenoteHost);\n  return u;\n}\n\nUrl.prototype.parse = function(url, parseQueryString, slashesDenoteHost) {\n  if (!util.isString(url)) {\n    throw new TypeError(\"Parameter 'url' must be a string, not \" + typeof url);\n  }\n\n  // Copy chrome, IE, opera backslash-handling behavior.\n  // Back slashes before the query string get converted to forward slashes\n  // See: https://code.google.com/p/chromium/issues/detail?id=25916\n  var queryIndex = url.indexOf('?'),\n      splitter =\n          (queryIndex !== -1 && queryIndex < url.indexOf('#')) ? '?' : '#',\n      uSplit = url.split(splitter),\n      slashRegex = /\\\\/g;\n  uSplit[0] = uSplit[0].replace(slashRegex, '/');\n  url = uSplit.join(splitter);\n\n  var rest = url;\n\n  // trim before proceeding.\n  // This is to support parse stuff like \"  http://foo.com  \\n\"\n  rest = rest.trim();\n\n  if (!slashesDenoteHost && url.split('#').length === 1) {\n    // Try fast path regexp\n    var simplePath = simplePathPattern.exec(rest);\n    if (simplePath) {\n      this.path = rest;\n      this.href = rest;\n      this.pathname = simplePath[1];\n      if (simplePath[2]) {\n        this.search = simplePath[2];\n        if (parseQueryString) {\n          this.query = querystring.parse(this.search.substr(1));\n        } else {\n          this.query = this.search.substr(1);\n        }\n      } else if (parseQueryString) {\n        this.search = '';\n        this.query = {};\n      }\n      return this;\n    }\n  }\n\n  var proto = protocolPattern.exec(rest);\n  if (proto) {\n    proto = proto[0];\n    var lowerProto = proto.toLowerCase();\n    this.protocol = lowerProto;\n    rest = rest.substr(proto.length);\n  }\n\n  // figure out if it's got a host\n  // user@server is *always* interpreted as a hostname, and url\n  // resolution will treat //foo/bar as host=foo,path=bar because that's\n  // how the browser resolves relative URLs.\n  if (slashesDenoteHost || proto || rest.match(/^\\/\\/[^@\\/]+@[^@\\/]+/)) {\n    var slashes = rest.substr(0, 2) === '//';\n    if (slashes && !(proto && hostlessProtocol[proto])) {\n      rest = rest.substr(2);\n      this.slashes = true;\n    }\n  }\n\n  if (!hostlessProtocol[proto] &&\n      (slashes || (proto && !slashedProtocol[proto]))) {\n\n    // there's a hostname.\n    // the first instance of /, ?, ;, or # ends the host.\n    //\n    // If there is an @ in the hostname, then non-host chars *are* allowed\n    // to the left of the last @ sign, unless some host-ending character\n    // comes *before* the @-sign.\n    // URLs are obnoxious.\n    //\n    // ex:\n    // http://a@b@c/ => user:a@b host:c\n    // http://a@b?@c => user:a host:c path:/?@c\n\n    // v0.12 TODO(isaacs): This is not quite how Chrome does things.\n    // Review our test case against browsers more comprehensively.\n\n    // find the first instance of any hostEndingChars\n    var hostEnd = -1;\n    for (var i = 0; i < hostEndingChars.length; i++) {\n      var hec = rest.indexOf(hostEndingChars[i]);\n      if (hec !== -1 && (hostEnd === -1 || hec < hostEnd))\n        hostEnd = hec;\n    }\n\n    // at this point, either we have an explicit point where the\n    // auth portion cannot go past, or the last @ char is the decider.\n    var auth, atSign;\n    if (hostEnd === -1) {\n      // atSign can be anywhere.\n      atSign = rest.lastIndexOf('@');\n    } else {\n      // atSign must be in auth portion.\n      // http://a@b/c@d => host:b auth:a path:/c@d\n      atSign = rest.lastIndexOf('@', hostEnd);\n    }\n\n    // Now we have a portion which is definitely the auth.\n    // Pull that off.\n    if (atSign !== -1) {\n      auth = rest.slice(0, atSign);\n      rest = rest.slice(atSign + 1);\n      this.auth = decodeURIComponent(auth);\n    }\n\n    // the host is the remaining to the left of the first non-host char\n    hostEnd = -1;\n    for (var i = 0; i < nonHostChars.length; i++) {\n      var hec = rest.indexOf(nonHostChars[i]);\n      if (hec !== -1 && (hostEnd === -1 || hec < hostEnd))\n        hostEnd = hec;\n    }\n    // if we still have not hit it, then the entire thing is a host.\n    if (hostEnd === -1)\n      hostEnd = rest.length;\n\n    this.host = rest.slice(0, hostEnd);\n    rest = rest.slice(hostEnd);\n\n    // pull out port.\n    this.parseHost();\n\n    // we've indicated that there is a hostname,\n    // so even if it's empty, it has to be present.\n    this.hostname = this.hostname || '';\n\n    // if hostname begins with [ and ends with ]\n    // assume that it's an IPv6 address.\n    var ipv6Hostname = this.hostname[0] === '[' &&\n        this.hostname[this.hostname.length - 1] === ']';\n\n    // validate a little.\n    if (!ipv6Hostname) {\n      var hostparts = this.hostname.split(/\\./);\n      for (var i = 0, l = hostparts.length; i < l; i++) {\n        var part = hostparts[i];\n        if (!part) continue;\n        if (!part.match(hostnamePartPattern)) {\n          var newpart = '';\n          for (var j = 0, k = part.length; j < k; j++) {\n            if (part.charCodeAt(j) > 127) {\n              // we replace non-ASCII char with a temporary placeholder\n              // we need this to make sure size of hostname is not\n              // broken by replacing non-ASCII by nothing\n              newpart += 'x';\n            } else {\n              newpart += part[j];\n            }\n          }\n          // we test again with ASCII char only\n          if (!newpart.match(hostnamePartPattern)) {\n            var validParts = hostparts.slice(0, i);\n            var notHost = hostparts.slice(i + 1);\n            var bit = part.match(hostnamePartStart);\n            if (bit) {\n              validParts.push(bit[1]);\n              notHost.unshift(bit[2]);\n            }\n            if (notHost.length) {\n              rest = '/' + notHost.join('.') + rest;\n            }\n            this.hostname = validParts.join('.');\n            break;\n          }\n        }\n      }\n    }\n\n    if (this.hostname.length > hostnameMaxLen) {\n      this.hostname = '';\n    } else {\n      // hostnames are always lower case.\n      this.hostname = this.hostname.toLowerCase();\n    }\n\n    if (!ipv6Hostname) {\n      // IDNA Support: Returns a punycoded representation of \"domain\".\n      // It only converts parts of the domain name that\n      // have non-ASCII characters, i.e. it doesn't matter if\n      // you call it with a domain that already is ASCII-only.\n      this.hostname = punycode.toASCII(this.hostname);\n    }\n\n    var p = this.port ? ':' + this.port : '';\n    var h = this.hostname || '';\n    this.host = h + p;\n    this.href += this.host;\n\n    // strip [ and ] from the hostname\n    // the host field still retains them, though\n    if (ipv6Hostname) {\n      this.hostname = this.hostname.substr(1, this.hostname.length - 2);\n      if (rest[0] !== '/') {\n        rest = '/' + rest;\n      }\n    }\n  }\n\n  // now rest is set to the post-host stuff.\n  // chop off any delim chars.\n  if (!unsafeProtocol[lowerProto]) {\n\n    // First, make 100% sure that any \"autoEscape\" chars get\n    // escaped, even if encodeURIComponent doesn't think they\n    // need to be.\n    for (var i = 0, l = autoEscape.length; i < l; i++) {\n      var ae = autoEscape[i];\n      if (rest.indexOf(ae) === -1)\n        continue;\n      var esc = encodeURIComponent(ae);\n      if (esc === ae) {\n        esc = escape(ae);\n      }\n      rest = rest.split(ae).join(esc);\n    }\n  }\n\n\n  // chop off from the tail first.\n  var hash = rest.indexOf('#');\n  if (hash !== -1) {\n    // got a fragment string.\n    this.hash = rest.substr(hash);\n    rest = rest.slice(0, hash);\n  }\n  var qm = rest.indexOf('?');\n  if (qm !== -1) {\n    this.search = rest.substr(qm);\n    this.query = rest.substr(qm + 1);\n    if (parseQueryString) {\n      this.query = querystring.parse(this.query);\n    }\n    rest = rest.slice(0, qm);\n  } else if (parseQueryString) {\n    // no query string, but parseQueryString still requested\n    this.search = '';\n    this.query = {};\n  }\n  if (rest) this.pathname = rest;\n  if (slashedProtocol[lowerProto] &&\n      this.hostname && !this.pathname) {\n    this.pathname = '/';\n  }\n\n  //to support http.request\n  if (this.pathname || this.search) {\n    var p = this.pathname || '';\n    var s = this.search || '';\n    this.path = p + s;\n  }\n\n  // finally, reconstruct the href based on what has been validated.\n  this.href = this.format();\n  return this;\n};\n\n// format a parsed object into a url string\nfunction urlFormat(obj) {\n  // ensure it's an object, and not a string url.\n  // If it's an obj, this is a no-op.\n  // this way, you can call url_format() on strings\n  // to clean up potentially wonky urls.\n  if (util.isString(obj)) obj = urlParse(obj);\n  if (!(obj instanceof Url)) return Url.prototype.format.call(obj);\n  return obj.format();\n}\n\nUrl.prototype.format = function() {\n  var auth = this.auth || '';\n  if (auth) {\n    auth = encodeURIComponent(auth);\n    auth = auth.replace(/%3A/i, ':');\n    auth += '@';\n  }\n\n  var protocol = this.protocol || '',\n      pathname = this.pathname || '',\n      hash = this.hash || '',\n      host = false,\n      query = '';\n\n  if (this.host) {\n    host = auth + this.host;\n  } else if (this.hostname) {\n    host = auth + (this.hostname.indexOf(':') === -1 ?\n        this.hostname :\n        '[' + this.hostname + ']');\n    if (this.port) {\n      host += ':' + this.port;\n    }\n  }\n\n  if (this.query &&\n      util.isObject(this.query) &&\n      Object.keys(this.query).length) {\n    query = querystring.stringify(this.query);\n  }\n\n  var search = this.search || (query && ('?' + query)) || '';\n\n  if (protocol && protocol.substr(-1) !== ':') protocol += ':';\n\n  // only the slashedProtocols get the //.  Not mailto:, xmpp:, etc.\n  // unless they had them to begin with.\n  if (this.slashes ||\n      (!protocol || slashedProtocol[protocol]) && host !== false) {\n    host = '//' + (host || '');\n    if (pathname && pathname.charAt(0) !== '/') pathname = '/' + pathname;\n  } else if (!host) {\n    host = '';\n  }\n\n  if (hash && hash.charAt(0) !== '#') hash = '#' + hash;\n  if (search && search.charAt(0) !== '?') search = '?' + search;\n\n  pathname = pathname.replace(/[?#]/g, function(match) {\n    return encodeURIComponent(match);\n  });\n  search = search.replace('#', '%23');\n\n  return protocol + host + pathname + search + hash;\n};\n\nfunction urlResolve(source, relative) {\n  return urlParse(source, false, true).resolve(relative);\n}\n\nUrl.prototype.resolve = function(relative) {\n  return this.resolveObject(urlParse(relative, false, true)).format();\n};\n\nfunction urlResolveObject(source, relative) {\n  if (!source) return relative;\n  return urlParse(source, false, true).resolveObject(relative);\n}\n\nUrl.prototype.resolveObject = function(relative) {\n  if (util.isString(relative)) {\n    var rel = new Url();\n    rel.parse(relative, false, true);\n    relative = rel;\n  }\n\n  var result = new Url();\n  var tkeys = Object.keys(this);\n  for (var tk = 0; tk < tkeys.length; tk++) {\n    var tkey = tkeys[tk];\n    result[tkey] = this[tkey];\n  }\n\n  // hash is always overridden, no matter what.\n  // even href=\"\" will remove it.\n  result.hash = relative.hash;\n\n  // if the relative url is empty, then there's nothing left to do here.\n  if (relative.href === '') {\n    result.href = result.format();\n    return result;\n  }\n\n  // hrefs like //foo/bar always cut to the protocol.\n  if (relative.slashes && !relative.protocol) {\n    // take everything except the protocol from relative\n    var rkeys = Object.keys(relative);\n    for (var rk = 0; rk < rkeys.length; rk++) {\n      var rkey = rkeys[rk];\n      if (rkey !== 'protocol')\n        result[rkey] = relative[rkey];\n    }\n\n    //urlParse appends trailing / to urls like http://www.example.com\n    if (slashedProtocol[result.protocol] &&\n        result.hostname && !result.pathname) {\n      result.path = result.pathname = '/';\n    }\n\n    result.href = result.format();\n    return result;\n  }\n\n  if (relative.protocol && relative.protocol !== result.protocol) {\n    // if it's a known url protocol, then changing\n    // the protocol does weird things\n    // first, if it's not file:, then we MUST have a host,\n    // and if there was a path\n    // to begin with, then we MUST have a path.\n    // if it is file:, then the host is dropped,\n    // because that's known to be hostless.\n    // anything else is assumed to be absolute.\n    if (!slashedProtocol[relative.protocol]) {\n      var keys = Object.keys(relative);\n      for (var v = 0; v < keys.length; v++) {\n        var k = keys[v];\n        result[k] = relative[k];\n      }\n      result.href = result.format();\n      return result;\n    }\n\n    result.protocol = relative.protocol;\n    if (!relative.host && !hostlessProtocol[relative.protocol]) {\n      var relPath = (relative.pathname || '').split('/');\n      while (relPath.length && !(relative.host = relPath.shift()));\n      if (!relative.host) relative.host = '';\n      if (!relative.hostname) relative.hostname = '';\n      if (relPath[0] !== '') relPath.unshift('');\n      if (relPath.length < 2) relPath.unshift('');\n      result.pathname = relPath.join('/');\n    } else {\n      result.pathname = relative.pathname;\n    }\n    result.search = relative.search;\n    result.query = relative.query;\n    result.host = relative.host || '';\n    result.auth = relative.auth;\n    result.hostname = relative.hostname || relative.host;\n    result.port = relative.port;\n    // to support http.request\n    if (result.pathname || result.search) {\n      var p = result.pathname || '';\n      var s = result.search || '';\n      result.path = p + s;\n    }\n    result.slashes = result.slashes || relative.slashes;\n    result.href = result.format();\n    return result;\n  }\n\n  var isSourceAbs = (result.pathname && result.pathname.charAt(0) === '/'),\n      isRelAbs = (\n          relative.host ||\n          relative.pathname && relative.pathname.charAt(0) === '/'\n      ),\n      mustEndAbs = (isRelAbs || isSourceAbs ||\n                    (result.host && relative.pathname)),\n      removeAllDots = mustEndAbs,\n      srcPath = result.pathname && result.pathname.split('/') || [],\n      relPath = relative.pathname && relative.pathname.split('/') || [],\n      psychotic = result.protocol && !slashedProtocol[result.protocol];\n\n  // if the url is a non-slashed url, then relative\n  // links like ../.. should be able\n  // to crawl up to the hostname, as well.  This is strange.\n  // result.protocol has already been set by now.\n  // Later on, put the first path part into the host field.\n  if (psychotic) {\n    result.hostname = '';\n    result.port = null;\n    if (result.host) {\n      if (srcPath[0] === '') srcPath[0] = result.host;\n      else srcPath.unshift(result.host);\n    }\n    result.host = '';\n    if (relative.protocol) {\n      relative.hostname = null;\n      relative.port = null;\n      if (relative.host) {\n        if (relPath[0] === '') relPath[0] = relative.host;\n        else relPath.unshift(relative.host);\n      }\n      relative.host = null;\n    }\n    mustEndAbs = mustEndAbs && (relPath[0] === '' || srcPath[0] === '');\n  }\n\n  if (isRelAbs) {\n    // it's absolute.\n    result.host = (relative.host || relative.host === '') ?\n                  relative.host : result.host;\n    result.hostname = (relative.hostname || relative.hostname === '') ?\n                      relative.hostname : result.hostname;\n    result.search = relative.search;\n    result.query = relative.query;\n    srcPath = relPath;\n    // fall through to the dot-handling below.\n  } else if (relPath.length) {\n    // it's relative\n    // throw away the existing file, and take the new path instead.\n    if (!srcPath) srcPath = [];\n    srcPath.pop();\n    srcPath = srcPath.concat(relPath);\n    result.search = relative.search;\n    result.query = relative.query;\n  } else if (!util.isNullOrUndefined(relative.search)) {\n    // just pull out the search.\n    // like href='?foo'.\n    // Put this after the other two cases because it simplifies the booleans\n    if (psychotic) {\n      result.hostname = result.host = srcPath.shift();\n      //occationaly the auth can get stuck only in host\n      //this especially happens in cases like\n      //url.resolveObject('mailto:local1@domain1', 'local2@domain2')\n      var authInHost = result.host && result.host.indexOf('@') > 0 ?\n                       result.host.split('@') : false;\n      if (authInHost) {\n        result.auth = authInHost.shift();\n        result.host = result.hostname = authInHost.shift();\n      }\n    }\n    result.search = relative.search;\n    result.query = relative.query;\n    //to support http.request\n    if (!util.isNull(result.pathname) || !util.isNull(result.search)) {\n      result.path = (result.pathname ? result.pathname : '') +\n                    (result.search ? result.search : '');\n    }\n    result.href = result.format();\n    return result;\n  }\n\n  if (!srcPath.length) {\n    // no path at all.  easy.\n    // we've already handled the other stuff above.\n    result.pathname = null;\n    //to support http.request\n    if (result.search) {\n      result.path = '/' + result.search;\n    } else {\n      result.path = null;\n    }\n    result.href = result.format();\n    return result;\n  }\n\n  // if a url ENDs in . or .., then it must get a trailing slash.\n  // however, if it ends in anything else non-slashy,\n  // then it must NOT get a trailing slash.\n  var last = srcPath.slice(-1)[0];\n  var hasTrailingSlash = (\n      (result.host || relative.host || srcPath.length > 1) &&\n      (last === '.' || last === '..') || last === '');\n\n  // strip single dots, resolve double dots to parent dir\n  // if the path tries to go above the root, `up` ends up > 0\n  var up = 0;\n  for (var i = srcPath.length; i >= 0; i--) {\n    last = srcPath[i];\n    if (last === '.') {\n      srcPath.splice(i, 1);\n    } else if (last === '..') {\n      srcPath.splice(i, 1);\n      up++;\n    } else if (up) {\n      srcPath.splice(i, 1);\n      up--;\n    }\n  }\n\n  // if the path is allowed to go above the root, restore leading ..s\n  if (!mustEndAbs && !removeAllDots) {\n    for (; up--; up) {\n      srcPath.unshift('..');\n    }\n  }\n\n  if (mustEndAbs && srcPath[0] !== '' &&\n      (!srcPath[0] || srcPath[0].charAt(0) !== '/')) {\n    srcPath.unshift('');\n  }\n\n  if (hasTrailingSlash && (srcPath.join('/').substr(-1) !== '/')) {\n    srcPath.push('');\n  }\n\n  var isAbsolute = srcPath[0] === '' ||\n      (srcPath[0] && srcPath[0].charAt(0) === '/');\n\n  // put the host back\n  if (psychotic) {\n    result.hostname = result.host = isAbsolute ? '' :\n                                    srcPath.length ? srcPath.shift() : '';\n    //occationaly the auth can get stuck only in host\n    //this especially happens in cases like\n    //url.resolveObject('mailto:local1@domain1', 'local2@domain2')\n    var authInHost = result.host && result.host.indexOf('@') > 0 ?\n                     result.host.split('@') : false;\n    if (authInHost) {\n      result.auth = authInHost.shift();\n      result.host = result.hostname = authInHost.shift();\n    }\n  }\n\n  mustEndAbs = mustEndAbs || (result.host && srcPath.length);\n\n  if (mustEndAbs && !isAbsolute) {\n    srcPath.unshift('');\n  }\n\n  if (!srcPath.length) {\n    result.pathname = null;\n    result.path = null;\n  } else {\n    result.pathname = srcPath.join('/');\n  }\n\n  //to support request.http\n  if (!util.isNull(result.pathname) || !util.isNull(result.search)) {\n    result.path = (result.pathname ? result.pathname : '') +\n                  (result.search ? result.search : '');\n  }\n  result.auth = relative.auth || result.auth;\n  result.slashes = result.slashes || relative.slashes;\n  result.href = result.format();\n  return result;\n};\n\nUrl.prototype.parseHost = function() {\n  var host = this.host;\n  var port = portPattern.exec(host);\n  if (port) {\n    port = port[0];\n    if (port !== ':') {\n      this.port = port.substr(1);\n    }\n    host = host.substr(0, host.length - port.length);\n  }\n  if (host) this.hostname = host;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/url/url.js","/* eslint no-void: 0 */\nconst toString = Object.prototype.toString;\nconst OBJECT = \"[object Object]\";\nconst ARRAY = \"[object Array]\";\n\nexport function mergePair(a, b) {\n  if (a === (void 0)) { return b; }\n  if (b === (void 0)) { return a; }\n\n  const aType = toString.call(a);\n  const bType = toString.call(b);\n  if (aType === ARRAY) {\n    return a.concat(b);\n  }\n  if (bType === ARRAY) {\n    return [a].concat(b);\n  }\n  if (aType !== OBJECT || bType !== OBJECT) {\n    return b;\n  }\n  return Object.keys(b).reduce((memo, key)=> {\n    memo[key] = mergePair(a[key], b[key]);\n    return memo;\n  }, a);\n}\n\nexport default function(...args) {\n  return args.length ? args.reduce(mergePair) : null;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/merge.js","/* globals __webpack_amd_options__ */\r\nmodule.exports = __webpack_amd_options__;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/amd-options.js\n// module id = 3\n// module chunks = 0","/**\n *  Copyright (c) 2014-2015, Facebook, Inc.\n *  All rights reserved.\n *\n *  This source code is licensed under the BSD-style license found in the\n *  LICENSE file in the root directory of this source tree. An additional grant\n *  of patent rights can be found in the PATENTS file in the same directory.\n */\n\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  (global.Immutable = factory());\n}(this, function () { 'use strict';var SLICE$0 = Array.prototype.slice;\n\n  function createClass(ctor, superClass) {\n    if (superClass) {\n      ctor.prototype = Object.create(superClass.prototype);\n    }\n    ctor.prototype.constructor = ctor;\n  }\n\n  function Iterable(value) {\n      return isIterable(value) ? value : Seq(value);\n    }\n\n\n  createClass(KeyedIterable, Iterable);\n    function KeyedIterable(value) {\n      return isKeyed(value) ? value : KeyedSeq(value);\n    }\n\n\n  createClass(IndexedIterable, Iterable);\n    function IndexedIterable(value) {\n      return isIndexed(value) ? value : IndexedSeq(value);\n    }\n\n\n  createClass(SetIterable, Iterable);\n    function SetIterable(value) {\n      return isIterable(value) && !isAssociative(value) ? value : SetSeq(value);\n    }\n\n\n\n  function isIterable(maybeIterable) {\n    return !!(maybeIterable && maybeIterable[IS_ITERABLE_SENTINEL]);\n  }\n\n  function isKeyed(maybeKeyed) {\n    return !!(maybeKeyed && maybeKeyed[IS_KEYED_SENTINEL]);\n  }\n\n  function isIndexed(maybeIndexed) {\n    return !!(maybeIndexed && maybeIndexed[IS_INDEXED_SENTINEL]);\n  }\n\n  function isAssociative(maybeAssociative) {\n    return isKeyed(maybeAssociative) || isIndexed(maybeAssociative);\n  }\n\n  function isOrdered(maybeOrdered) {\n    return !!(maybeOrdered && maybeOrdered[IS_ORDERED_SENTINEL]);\n  }\n\n  Iterable.isIterable = isIterable;\n  Iterable.isKeyed = isKeyed;\n  Iterable.isIndexed = isIndexed;\n  Iterable.isAssociative = isAssociative;\n  Iterable.isOrdered = isOrdered;\n\n  Iterable.Keyed = KeyedIterable;\n  Iterable.Indexed = IndexedIterable;\n  Iterable.Set = SetIterable;\n\n\n  var IS_ITERABLE_SENTINEL = '@@__IMMUTABLE_ITERABLE__@@';\n  var IS_KEYED_SENTINEL = '@@__IMMUTABLE_KEYED__@@';\n  var IS_INDEXED_SENTINEL = '@@__IMMUTABLE_INDEXED__@@';\n  var IS_ORDERED_SENTINEL = '@@__IMMUTABLE_ORDERED__@@';\n\n  // Used for setting prototype methods that IE8 chokes on.\n  var DELETE = 'delete';\n\n  // Constants describing the size of trie nodes.\n  var SHIFT = 5; // Resulted in best performance after ______?\n  var SIZE = 1 << SHIFT;\n  var MASK = SIZE - 1;\n\n  // A consistent shared value representing \"not set\" which equals nothing other\n  // than itself, and nothing that could be provided externally.\n  var NOT_SET = {};\n\n  // Boolean references, Rough equivalent of `bool &`.\n  var CHANGE_LENGTH = { value: false };\n  var DID_ALTER = { value: false };\n\n  function MakeRef(ref) {\n    ref.value = false;\n    return ref;\n  }\n\n  function SetRef(ref) {\n    ref && (ref.value = true);\n  }\n\n  // A function which returns a value representing an \"owner\" for transient writes\n  // to tries. The return value will only ever equal itself, and will not equal\n  // the return of any subsequent call of this function.\n  function OwnerID() {}\n\n  // http://jsperf.com/copy-array-inline\n  function arrCopy(arr, offset) {\n    offset = offset || 0;\n    var len = Math.max(0, arr.length - offset);\n    var newArr = new Array(len);\n    for (var ii = 0; ii < len; ii++) {\n      newArr[ii] = arr[ii + offset];\n    }\n    return newArr;\n  }\n\n  function ensureSize(iter) {\n    if (iter.size === undefined) {\n      iter.size = iter.__iterate(returnTrue);\n    }\n    return iter.size;\n  }\n\n  function wrapIndex(iter, index) {\n    // This implements \"is array index\" which the ECMAString spec defines as:\n    //\n    //     A String property name P is an array index if and only if\n    //     ToString(ToUint32(P)) is equal to P and ToUint32(P) is not equal\n    //     to 2^32−1.\n    //\n    // http://www.ecma-international.org/ecma-262/6.0/#sec-array-exotic-objects\n    if (typeof index !== 'number') {\n      var uint32Index = index >>> 0; // N >>> 0 is shorthand for ToUint32\n      if ('' + uint32Index !== index || uint32Index === 4294967295) {\n        return NaN;\n      }\n      index = uint32Index;\n    }\n    return index < 0 ? ensureSize(iter) + index : index;\n  }\n\n  function returnTrue() {\n    return true;\n  }\n\n  function wholeSlice(begin, end, size) {\n    return (begin === 0 || (size !== undefined && begin <= -size)) &&\n      (end === undefined || (size !== undefined && end >= size));\n  }\n\n  function resolveBegin(begin, size) {\n    return resolveIndex(begin, size, 0);\n  }\n\n  function resolveEnd(end, size) {\n    return resolveIndex(end, size, size);\n  }\n\n  function resolveIndex(index, size, defaultIndex) {\n    return index === undefined ?\n      defaultIndex :\n      index < 0 ?\n        Math.max(0, size + index) :\n        size === undefined ?\n          index :\n          Math.min(size, index);\n  }\n\n  /* global Symbol */\n\n  var ITERATE_KEYS = 0;\n  var ITERATE_VALUES = 1;\n  var ITERATE_ENTRIES = 2;\n\n  var REAL_ITERATOR_SYMBOL = typeof Symbol === 'function' && Symbol.iterator;\n  var FAUX_ITERATOR_SYMBOL = '@@iterator';\n\n  var ITERATOR_SYMBOL = REAL_ITERATOR_SYMBOL || FAUX_ITERATOR_SYMBOL;\n\n\n  function Iterator(next) {\n      this.next = next;\n    }\n\n    Iterator.prototype.toString = function() {\n      return '[Iterator]';\n    };\n\n\n  Iterator.KEYS = ITERATE_KEYS;\n  Iterator.VALUES = ITERATE_VALUES;\n  Iterator.ENTRIES = ITERATE_ENTRIES;\n\n  Iterator.prototype.inspect =\n  Iterator.prototype.toSource = function () { return this.toString(); }\n  Iterator.prototype[ITERATOR_SYMBOL] = function () {\n    return this;\n  };\n\n\n  function iteratorValue(type, k, v, iteratorResult) {\n    var value = type === 0 ? k : type === 1 ? v : [k, v];\n    iteratorResult ? (iteratorResult.value = value) : (iteratorResult = {\n      value: value, done: false\n    });\n    return iteratorResult;\n  }\n\n  function iteratorDone() {\n    return { value: undefined, done: true };\n  }\n\n  function hasIterator(maybeIterable) {\n    return !!getIteratorFn(maybeIterable);\n  }\n\n  function isIterator(maybeIterator) {\n    return maybeIterator && typeof maybeIterator.next === 'function';\n  }\n\n  function getIterator(iterable) {\n    var iteratorFn = getIteratorFn(iterable);\n    return iteratorFn && iteratorFn.call(iterable);\n  }\n\n  function getIteratorFn(iterable) {\n    var iteratorFn = iterable && (\n      (REAL_ITERATOR_SYMBOL && iterable[REAL_ITERATOR_SYMBOL]) ||\n      iterable[FAUX_ITERATOR_SYMBOL]\n    );\n    if (typeof iteratorFn === 'function') {\n      return iteratorFn;\n    }\n  }\n\n  function isArrayLike(value) {\n    return value && typeof value.length === 'number';\n  }\n\n  createClass(Seq, Iterable);\n    function Seq(value) {\n      return value === null || value === undefined ? emptySequence() :\n        isIterable(value) ? value.toSeq() : seqFromValue(value);\n    }\n\n    Seq.of = function(/*...values*/) {\n      return Seq(arguments);\n    };\n\n    Seq.prototype.toSeq = function() {\n      return this;\n    };\n\n    Seq.prototype.toString = function() {\n      return this.__toString('Seq {', '}');\n    };\n\n    Seq.prototype.cacheResult = function() {\n      if (!this._cache && this.__iterateUncached) {\n        this._cache = this.entrySeq().toArray();\n        this.size = this._cache.length;\n      }\n      return this;\n    };\n\n    // abstract __iterateUncached(fn, reverse)\n\n    Seq.prototype.__iterate = function(fn, reverse) {\n      return seqIterate(this, fn, reverse, true);\n    };\n\n    // abstract __iteratorUncached(type, reverse)\n\n    Seq.prototype.__iterator = function(type, reverse) {\n      return seqIterator(this, type, reverse, true);\n    };\n\n\n\n  createClass(KeyedSeq, Seq);\n    function KeyedSeq(value) {\n      return value === null || value === undefined ?\n        emptySequence().toKeyedSeq() :\n        isIterable(value) ?\n          (isKeyed(value) ? value.toSeq() : value.fromEntrySeq()) :\n          keyedSeqFromValue(value);\n    }\n\n    KeyedSeq.prototype.toKeyedSeq = function() {\n      return this;\n    };\n\n\n\n  createClass(IndexedSeq, Seq);\n    function IndexedSeq(value) {\n      return value === null || value === undefined ? emptySequence() :\n        !isIterable(value) ? indexedSeqFromValue(value) :\n        isKeyed(value) ? value.entrySeq() : value.toIndexedSeq();\n    }\n\n    IndexedSeq.of = function(/*...values*/) {\n      return IndexedSeq(arguments);\n    };\n\n    IndexedSeq.prototype.toIndexedSeq = function() {\n      return this;\n    };\n\n    IndexedSeq.prototype.toString = function() {\n      return this.__toString('Seq [', ']');\n    };\n\n    IndexedSeq.prototype.__iterate = function(fn, reverse) {\n      return seqIterate(this, fn, reverse, false);\n    };\n\n    IndexedSeq.prototype.__iterator = function(type, reverse) {\n      return seqIterator(this, type, reverse, false);\n    };\n\n\n\n  createClass(SetSeq, Seq);\n    function SetSeq(value) {\n      return (\n        value === null || value === undefined ? emptySequence() :\n        !isIterable(value) ? indexedSeqFromValue(value) :\n        isKeyed(value) ? value.entrySeq() : value\n      ).toSetSeq();\n    }\n\n    SetSeq.of = function(/*...values*/) {\n      return SetSeq(arguments);\n    };\n\n    SetSeq.prototype.toSetSeq = function() {\n      return this;\n    };\n\n\n\n  Seq.isSeq = isSeq;\n  Seq.Keyed = KeyedSeq;\n  Seq.Set = SetSeq;\n  Seq.Indexed = IndexedSeq;\n\n  var IS_SEQ_SENTINEL = '@@__IMMUTABLE_SEQ__@@';\n\n  Seq.prototype[IS_SEQ_SENTINEL] = true;\n\n\n\n  createClass(ArraySeq, IndexedSeq);\n    function ArraySeq(array) {\n      this._array = array;\n      this.size = array.length;\n    }\n\n    ArraySeq.prototype.get = function(index, notSetValue) {\n      return this.has(index) ? this._array[wrapIndex(this, index)] : notSetValue;\n    };\n\n    ArraySeq.prototype.__iterate = function(fn, reverse) {\n      var array = this._array;\n      var maxIndex = array.length - 1;\n      for (var ii = 0; ii <= maxIndex; ii++) {\n        if (fn(array[reverse ? maxIndex - ii : ii], ii, this) === false) {\n          return ii + 1;\n        }\n      }\n      return ii;\n    };\n\n    ArraySeq.prototype.__iterator = function(type, reverse) {\n      var array = this._array;\n      var maxIndex = array.length - 1;\n      var ii = 0;\n      return new Iterator(function() \n        {return ii > maxIndex ?\n          iteratorDone() :\n          iteratorValue(type, ii, array[reverse ? maxIndex - ii++ : ii++])}\n      );\n    };\n\n\n\n  createClass(ObjectSeq, KeyedSeq);\n    function ObjectSeq(object) {\n      var keys = Object.keys(object);\n      this._object = object;\n      this._keys = keys;\n      this.size = keys.length;\n    }\n\n    ObjectSeq.prototype.get = function(key, notSetValue) {\n      if (notSetValue !== undefined && !this.has(key)) {\n        return notSetValue;\n      }\n      return this._object[key];\n    };\n\n    ObjectSeq.prototype.has = function(key) {\n      return this._object.hasOwnProperty(key);\n    };\n\n    ObjectSeq.prototype.__iterate = function(fn, reverse) {\n      var object = this._object;\n      var keys = this._keys;\n      var maxIndex = keys.length - 1;\n      for (var ii = 0; ii <= maxIndex; ii++) {\n        var key = keys[reverse ? maxIndex - ii : ii];\n        if (fn(object[key], key, this) === false) {\n          return ii + 1;\n        }\n      }\n      return ii;\n    };\n\n    ObjectSeq.prototype.__iterator = function(type, reverse) {\n      var object = this._object;\n      var keys = this._keys;\n      var maxIndex = keys.length - 1;\n      var ii = 0;\n      return new Iterator(function()  {\n        var key = keys[reverse ? maxIndex - ii : ii];\n        return ii++ > maxIndex ?\n          iteratorDone() :\n          iteratorValue(type, key, object[key]);\n      });\n    };\n\n  ObjectSeq.prototype[IS_ORDERED_SENTINEL] = true;\n\n\n  createClass(IterableSeq, IndexedSeq);\n    function IterableSeq(iterable) {\n      this._iterable = iterable;\n      this.size = iterable.length || iterable.size;\n    }\n\n    IterableSeq.prototype.__iterateUncached = function(fn, reverse) {\n      if (reverse) {\n        return this.cacheResult().__iterate(fn, reverse);\n      }\n      var iterable = this._iterable;\n      var iterator = getIterator(iterable);\n      var iterations = 0;\n      if (isIterator(iterator)) {\n        var step;\n        while (!(step = iterator.next()).done) {\n          if (fn(step.value, iterations++, this) === false) {\n            break;\n          }\n        }\n      }\n      return iterations;\n    };\n\n    IterableSeq.prototype.__iteratorUncached = function(type, reverse) {\n      if (reverse) {\n        return this.cacheResult().__iterator(type, reverse);\n      }\n      var iterable = this._iterable;\n      var iterator = getIterator(iterable);\n      if (!isIterator(iterator)) {\n        return new Iterator(iteratorDone);\n      }\n      var iterations = 0;\n      return new Iterator(function()  {\n        var step = iterator.next();\n        return step.done ? step : iteratorValue(type, iterations++, step.value);\n      });\n    };\n\n\n\n  createClass(IteratorSeq, IndexedSeq);\n    function IteratorSeq(iterator) {\n      this._iterator = iterator;\n      this._iteratorCache = [];\n    }\n\n    IteratorSeq.prototype.__iterateUncached = function(fn, reverse) {\n      if (reverse) {\n        return this.cacheResult().__iterate(fn, reverse);\n      }\n      var iterator = this._iterator;\n      var cache = this._iteratorCache;\n      var iterations = 0;\n      while (iterations < cache.length) {\n        if (fn(cache[iterations], iterations++, this) === false) {\n          return iterations;\n        }\n      }\n      var step;\n      while (!(step = iterator.next()).done) {\n        var val = step.value;\n        cache[iterations] = val;\n        if (fn(val, iterations++, this) === false) {\n          break;\n        }\n      }\n      return iterations;\n    };\n\n    IteratorSeq.prototype.__iteratorUncached = function(type, reverse) {\n      if (reverse) {\n        return this.cacheResult().__iterator(type, reverse);\n      }\n      var iterator = this._iterator;\n      var cache = this._iteratorCache;\n      var iterations = 0;\n      return new Iterator(function()  {\n        if (iterations >= cache.length) {\n          var step = iterator.next();\n          if (step.done) {\n            return step;\n          }\n          cache[iterations] = step.value;\n        }\n        return iteratorValue(type, iterations, cache[iterations++]);\n      });\n    };\n\n\n\n\n  // # pragma Helper functions\n\n  function isSeq(maybeSeq) {\n    return !!(maybeSeq && maybeSeq[IS_SEQ_SENTINEL]);\n  }\n\n  var EMPTY_SEQ;\n\n  function emptySequence() {\n    return EMPTY_SEQ || (EMPTY_SEQ = new ArraySeq([]));\n  }\n\n  function keyedSeqFromValue(value) {\n    var seq =\n      Array.isArray(value) ? new ArraySeq(value).fromEntrySeq() :\n      isIterator(value) ? new IteratorSeq(value).fromEntrySeq() :\n      hasIterator(value) ? new IterableSeq(value).fromEntrySeq() :\n      typeof value === 'object' ? new ObjectSeq(value) :\n      undefined;\n    if (!seq) {\n      throw new TypeError(\n        'Expected Array or iterable object of [k, v] entries, '+\n        'or keyed object: ' + value\n      );\n    }\n    return seq;\n  }\n\n  function indexedSeqFromValue(value) {\n    var seq = maybeIndexedSeqFromValue(value);\n    if (!seq) {\n      throw new TypeError(\n        'Expected Array or iterable object of values: ' + value\n      );\n    }\n    return seq;\n  }\n\n  function seqFromValue(value) {\n    var seq = maybeIndexedSeqFromValue(value) ||\n      (typeof value === 'object' && new ObjectSeq(value));\n    if (!seq) {\n      throw new TypeError(\n        'Expected Array or iterable object of values, or keyed object: ' + value\n      );\n    }\n    return seq;\n  }\n\n  function maybeIndexedSeqFromValue(value) {\n    return (\n      isArrayLike(value) ? new ArraySeq(value) :\n      isIterator(value) ? new IteratorSeq(value) :\n      hasIterator(value) ? new IterableSeq(value) :\n      undefined\n    );\n  }\n\n  function seqIterate(seq, fn, reverse, useKeys) {\n    var cache = seq._cache;\n    if (cache) {\n      var maxIndex = cache.length - 1;\n      for (var ii = 0; ii <= maxIndex; ii++) {\n        var entry = cache[reverse ? maxIndex - ii : ii];\n        if (fn(entry[1], useKeys ? entry[0] : ii, seq) === false) {\n          return ii + 1;\n        }\n      }\n      return ii;\n    }\n    return seq.__iterateUncached(fn, reverse);\n  }\n\n  function seqIterator(seq, type, reverse, useKeys) {\n    var cache = seq._cache;\n    if (cache) {\n      var maxIndex = cache.length - 1;\n      var ii = 0;\n      return new Iterator(function()  {\n        var entry = cache[reverse ? maxIndex - ii : ii];\n        return ii++ > maxIndex ?\n          iteratorDone() :\n          iteratorValue(type, useKeys ? entry[0] : ii - 1, entry[1]);\n      });\n    }\n    return seq.__iteratorUncached(type, reverse);\n  }\n\n  function fromJS(json, converter) {\n    return converter ?\n      fromJSWith(converter, json, '', {'': json}) :\n      fromJSDefault(json);\n  }\n\n  function fromJSWith(converter, json, key, parentJSON) {\n    if (Array.isArray(json)) {\n      return converter.call(parentJSON, key, IndexedSeq(json).map(function(v, k)  {return fromJSWith(converter, v, k, json)}));\n    }\n    if (isPlainObj(json)) {\n      return converter.call(parentJSON, key, KeyedSeq(json).map(function(v, k)  {return fromJSWith(converter, v, k, json)}));\n    }\n    return json;\n  }\n\n  function fromJSDefault(json) {\n    if (Array.isArray(json)) {\n      return IndexedSeq(json).map(fromJSDefault).toList();\n    }\n    if (isPlainObj(json)) {\n      return KeyedSeq(json).map(fromJSDefault).toMap();\n    }\n    return json;\n  }\n\n  function isPlainObj(value) {\n    return value && (value.constructor === Object || value.constructor === undefined);\n  }\n\n  /**\n   * An extension of the \"same-value\" algorithm as [described for use by ES6 Map\n   * and Set](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map#Key_equality)\n   *\n   * NaN is considered the same as NaN, however -0 and 0 are considered the same\n   * value, which is different from the algorithm described by\n   * [`Object.is`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is).\n   *\n   * This is extended further to allow Objects to describe the values they\n   * represent, by way of `valueOf` or `equals` (and `hashCode`).\n   *\n   * Note: because of this extension, the key equality of Immutable.Map and the\n   * value equality of Immutable.Set will differ from ES6 Map and Set.\n   *\n   * ### Defining custom values\n   *\n   * The easiest way to describe the value an object represents is by implementing\n   * `valueOf`. For example, `Date` represents a value by returning a unix\n   * timestamp for `valueOf`:\n   *\n   *     var date1 = new Date(1234567890000); // Fri Feb 13 2009 ...\n   *     var date2 = new Date(1234567890000);\n   *     date1.valueOf(); // 1234567890000\n   *     assert( date1 !== date2 );\n   *     assert( Immutable.is( date1, date2 ) );\n   *\n   * Note: overriding `valueOf` may have other implications if you use this object\n   * where JavaScript expects a primitive, such as implicit string coercion.\n   *\n   * For more complex types, especially collections, implementing `valueOf` may\n   * not be performant. An alternative is to implement `equals` and `hashCode`.\n   *\n   * `equals` takes another object, presumably of similar type, and returns true\n   * if the it is equal. Equality is symmetrical, so the same result should be\n   * returned if this and the argument are flipped.\n   *\n   *     assert( a.equals(b) === b.equals(a) );\n   *\n   * `hashCode` returns a 32bit integer number representing the object which will\n   * be used to determine how to store the value object in a Map or Set. You must\n   * provide both or neither methods, one must not exist without the other.\n   *\n   * Also, an important relationship between these methods must be upheld: if two\n   * values are equal, they *must* return the same hashCode. If the values are not\n   * equal, they might have the same hashCode; this is called a hash collision,\n   * and while undesirable for performance reasons, it is acceptable.\n   *\n   *     if (a.equals(b)) {\n   *       assert( a.hashCode() === b.hashCode() );\n   *     }\n   *\n   * All Immutable collections implement `equals` and `hashCode`.\n   *\n   */\n  function is(valueA, valueB) {\n    if (valueA === valueB || (valueA !== valueA && valueB !== valueB)) {\n      return true;\n    }\n    if (!valueA || !valueB) {\n      return false;\n    }\n    if (typeof valueA.valueOf === 'function' &&\n        typeof valueB.valueOf === 'function') {\n      valueA = valueA.valueOf();\n      valueB = valueB.valueOf();\n      if (valueA === valueB || (valueA !== valueA && valueB !== valueB)) {\n        return true;\n      }\n      if (!valueA || !valueB) {\n        return false;\n      }\n    }\n    if (typeof valueA.equals === 'function' &&\n        typeof valueB.equals === 'function' &&\n        valueA.equals(valueB)) {\n      return true;\n    }\n    return false;\n  }\n\n  function deepEqual(a, b) {\n    if (a === b) {\n      return true;\n    }\n\n    if (\n      !isIterable(b) ||\n      a.size !== undefined && b.size !== undefined && a.size !== b.size ||\n      a.__hash !== undefined && b.__hash !== undefined && a.__hash !== b.__hash ||\n      isKeyed(a) !== isKeyed(b) ||\n      isIndexed(a) !== isIndexed(b) ||\n      isOrdered(a) !== isOrdered(b)\n    ) {\n      return false;\n    }\n\n    if (a.size === 0 && b.size === 0) {\n      return true;\n    }\n\n    var notAssociative = !isAssociative(a);\n\n    if (isOrdered(a)) {\n      var entries = a.entries();\n      return b.every(function(v, k)  {\n        var entry = entries.next().value;\n        return entry && is(entry[1], v) && (notAssociative || is(entry[0], k));\n      }) && entries.next().done;\n    }\n\n    var flipped = false;\n\n    if (a.size === undefined) {\n      if (b.size === undefined) {\n        if (typeof a.cacheResult === 'function') {\n          a.cacheResult();\n        }\n      } else {\n        flipped = true;\n        var _ = a;\n        a = b;\n        b = _;\n      }\n    }\n\n    var allEqual = true;\n    var bSize = b.__iterate(function(v, k)  {\n      if (notAssociative ? !a.has(v) :\n          flipped ? !is(v, a.get(k, NOT_SET)) : !is(a.get(k, NOT_SET), v)) {\n        allEqual = false;\n        return false;\n      }\n    });\n\n    return allEqual && a.size === bSize;\n  }\n\n  createClass(Repeat, IndexedSeq);\n\n    function Repeat(value, times) {\n      if (!(this instanceof Repeat)) {\n        return new Repeat(value, times);\n      }\n      this._value = value;\n      this.size = times === undefined ? Infinity : Math.max(0, times);\n      if (this.size === 0) {\n        if (EMPTY_REPEAT) {\n          return EMPTY_REPEAT;\n        }\n        EMPTY_REPEAT = this;\n      }\n    }\n\n    Repeat.prototype.toString = function() {\n      if (this.size === 0) {\n        return 'Repeat []';\n      }\n      return 'Repeat [ ' + this._value + ' ' + this.size + ' times ]';\n    };\n\n    Repeat.prototype.get = function(index, notSetValue) {\n      return this.has(index) ? this._value : notSetValue;\n    };\n\n    Repeat.prototype.includes = function(searchValue) {\n      return is(this._value, searchValue);\n    };\n\n    Repeat.prototype.slice = function(begin, end) {\n      var size = this.size;\n      return wholeSlice(begin, end, size) ? this :\n        new Repeat(this._value, resolveEnd(end, size) - resolveBegin(begin, size));\n    };\n\n    Repeat.prototype.reverse = function() {\n      return this;\n    };\n\n    Repeat.prototype.indexOf = function(searchValue) {\n      if (is(this._value, searchValue)) {\n        return 0;\n      }\n      return -1;\n    };\n\n    Repeat.prototype.lastIndexOf = function(searchValue) {\n      if (is(this._value, searchValue)) {\n        return this.size;\n      }\n      return -1;\n    };\n\n    Repeat.prototype.__iterate = function(fn, reverse) {\n      for (var ii = 0; ii < this.size; ii++) {\n        if (fn(this._value, ii, this) === false) {\n          return ii + 1;\n        }\n      }\n      return ii;\n    };\n\n    Repeat.prototype.__iterator = function(type, reverse) {var this$0 = this;\n      var ii = 0;\n      return new Iterator(function() \n        {return ii < this$0.size ? iteratorValue(type, ii++, this$0._value) : iteratorDone()}\n      );\n    };\n\n    Repeat.prototype.equals = function(other) {\n      return other instanceof Repeat ?\n        is(this._value, other._value) :\n        deepEqual(other);\n    };\n\n\n  var EMPTY_REPEAT;\n\n  function invariant(condition, error) {\n    if (!condition) throw new Error(error);\n  }\n\n  createClass(Range, IndexedSeq);\n\n    function Range(start, end, step) {\n      if (!(this instanceof Range)) {\n        return new Range(start, end, step);\n      }\n      invariant(step !== 0, 'Cannot step a Range by 0');\n      start = start || 0;\n      if (end === undefined) {\n        end = Infinity;\n      }\n      step = step === undefined ? 1 : Math.abs(step);\n      if (end < start) {\n        step = -step;\n      }\n      this._start = start;\n      this._end = end;\n      this._step = step;\n      this.size = Math.max(0, Math.ceil((end - start) / step - 1) + 1);\n      if (this.size === 0) {\n        if (EMPTY_RANGE) {\n          return EMPTY_RANGE;\n        }\n        EMPTY_RANGE = this;\n      }\n    }\n\n    Range.prototype.toString = function() {\n      if (this.size === 0) {\n        return 'Range []';\n      }\n      return 'Range [ ' +\n        this._start + '...' + this._end +\n        (this._step !== 1 ? ' by ' + this._step : '') +\n      ' ]';\n    };\n\n    Range.prototype.get = function(index, notSetValue) {\n      return this.has(index) ?\n        this._start + wrapIndex(this, index) * this._step :\n        notSetValue;\n    };\n\n    Range.prototype.includes = function(searchValue) {\n      var possibleIndex = (searchValue - this._start) / this._step;\n      return possibleIndex >= 0 &&\n        possibleIndex < this.size &&\n        possibleIndex === Math.floor(possibleIndex);\n    };\n\n    Range.prototype.slice = function(begin, end) {\n      if (wholeSlice(begin, end, this.size)) {\n        return this;\n      }\n      begin = resolveBegin(begin, this.size);\n      end = resolveEnd(end, this.size);\n      if (end <= begin) {\n        return new Range(0, 0);\n      }\n      return new Range(this.get(begin, this._end), this.get(end, this._end), this._step);\n    };\n\n    Range.prototype.indexOf = function(searchValue) {\n      var offsetValue = searchValue - this._start;\n      if (offsetValue % this._step === 0) {\n        var index = offsetValue / this._step;\n        if (index >= 0 && index < this.size) {\n          return index\n        }\n      }\n      return -1;\n    };\n\n    Range.prototype.lastIndexOf = function(searchValue) {\n      return this.indexOf(searchValue);\n    };\n\n    Range.prototype.__iterate = function(fn, reverse) {\n      var maxIndex = this.size - 1;\n      var step = this._step;\n      var value = reverse ? this._start + maxIndex * step : this._start;\n      for (var ii = 0; ii <= maxIndex; ii++) {\n        if (fn(value, ii, this) === false) {\n          return ii + 1;\n        }\n        value += reverse ? -step : step;\n      }\n      return ii;\n    };\n\n    Range.prototype.__iterator = function(type, reverse) {\n      var maxIndex = this.size - 1;\n      var step = this._step;\n      var value = reverse ? this._start + maxIndex * step : this._start;\n      var ii = 0;\n      return new Iterator(function()  {\n        var v = value;\n        value += reverse ? -step : step;\n        return ii > maxIndex ? iteratorDone() : iteratorValue(type, ii++, v);\n      });\n    };\n\n    Range.prototype.equals = function(other) {\n      return other instanceof Range ?\n        this._start === other._start &&\n        this._end === other._end &&\n        this._step === other._step :\n        deepEqual(this, other);\n    };\n\n\n  var EMPTY_RANGE;\n\n  createClass(Collection, Iterable);\n    function Collection() {\n      throw TypeError('Abstract');\n    }\n\n\n  createClass(KeyedCollection, Collection);function KeyedCollection() {}\n\n  createClass(IndexedCollection, Collection);function IndexedCollection() {}\n\n  createClass(SetCollection, Collection);function SetCollection() {}\n\n\n  Collection.Keyed = KeyedCollection;\n  Collection.Indexed = IndexedCollection;\n  Collection.Set = SetCollection;\n\n  var imul =\n    typeof Math.imul === 'function' && Math.imul(0xffffffff, 2) === -2 ?\n    Math.imul :\n    function imul(a, b) {\n      a = a | 0; // int\n      b = b | 0; // int\n      var c = a & 0xffff;\n      var d = b & 0xffff;\n      // Shift by 0 fixes the sign on the high part.\n      return (c * d) + ((((a >>> 16) * d + c * (b >>> 16)) << 16) >>> 0) | 0; // int\n    };\n\n  // v8 has an optimization for storing 31-bit signed numbers.\n  // Values which have either 00 or 11 as the high order bits qualify.\n  // This function drops the highest order bit in a signed number, maintaining\n  // the sign bit.\n  function smi(i32) {\n    return ((i32 >>> 1) & 0x40000000) | (i32 & 0xBFFFFFFF);\n  }\n\n  function hash(o) {\n    if (o === false || o === null || o === undefined) {\n      return 0;\n    }\n    if (typeof o.valueOf === 'function') {\n      o = o.valueOf();\n      if (o === false || o === null || o === undefined) {\n        return 0;\n      }\n    }\n    if (o === true) {\n      return 1;\n    }\n    var type = typeof o;\n    if (type === 'number') {\n      if (o !== o || o === Infinity) {\n        return 0;\n      }\n      var h = o | 0;\n      if (h !== o) {\n        h ^= o * 0xFFFFFFFF;\n      }\n      while (o > 0xFFFFFFFF) {\n        o /= 0xFFFFFFFF;\n        h ^= o;\n      }\n      return smi(h);\n    }\n    if (type === 'string') {\n      return o.length > STRING_HASH_CACHE_MIN_STRLEN ? cachedHashString(o) : hashString(o);\n    }\n    if (typeof o.hashCode === 'function') {\n      return o.hashCode();\n    }\n    if (type === 'object') {\n      return hashJSObj(o);\n    }\n    if (typeof o.toString === 'function') {\n      return hashString(o.toString());\n    }\n    throw new Error('Value type ' + type + ' cannot be hashed.');\n  }\n\n  function cachedHashString(string) {\n    var hash = stringHashCache[string];\n    if (hash === undefined) {\n      hash = hashString(string);\n      if (STRING_HASH_CACHE_SIZE === STRING_HASH_CACHE_MAX_SIZE) {\n        STRING_HASH_CACHE_SIZE = 0;\n        stringHashCache = {};\n      }\n      STRING_HASH_CACHE_SIZE++;\n      stringHashCache[string] = hash;\n    }\n    return hash;\n  }\n\n  // http://jsperf.com/hashing-strings\n  function hashString(string) {\n    // This is the hash from JVM\n    // The hash code for a string is computed as\n    // s[0] * 31 ^ (n - 1) + s[1] * 31 ^ (n - 2) + ... + s[n - 1],\n    // where s[i] is the ith character of the string and n is the length of\n    // the string. We \"mod\" the result to make it between 0 (inclusive) and 2^31\n    // (exclusive) by dropping high bits.\n    var hash = 0;\n    for (var ii = 0; ii < string.length; ii++) {\n      hash = 31 * hash + string.charCodeAt(ii) | 0;\n    }\n    return smi(hash);\n  }\n\n  function hashJSObj(obj) {\n    var hash;\n    if (usingWeakMap) {\n      hash = weakMap.get(obj);\n      if (hash !== undefined) {\n        return hash;\n      }\n    }\n\n    hash = obj[UID_HASH_KEY];\n    if (hash !== undefined) {\n      return hash;\n    }\n\n    if (!canDefineProperty) {\n      hash = obj.propertyIsEnumerable && obj.propertyIsEnumerable[UID_HASH_KEY];\n      if (hash !== undefined) {\n        return hash;\n      }\n\n      hash = getIENodeHash(obj);\n      if (hash !== undefined) {\n        return hash;\n      }\n    }\n\n    hash = ++objHashUID;\n    if (objHashUID & 0x40000000) {\n      objHashUID = 0;\n    }\n\n    if (usingWeakMap) {\n      weakMap.set(obj, hash);\n    } else if (isExtensible !== undefined && isExtensible(obj) === false) {\n      throw new Error('Non-extensible objects are not allowed as keys.');\n    } else if (canDefineProperty) {\n      Object.defineProperty(obj, UID_HASH_KEY, {\n        'enumerable': false,\n        'configurable': false,\n        'writable': false,\n        'value': hash\n      });\n    } else if (obj.propertyIsEnumerable !== undefined &&\n               obj.propertyIsEnumerable === obj.constructor.prototype.propertyIsEnumerable) {\n      // Since we can't define a non-enumerable property on the object\n      // we'll hijack one of the less-used non-enumerable properties to\n      // save our hash on it. Since this is a function it will not show up in\n      // `JSON.stringify` which is what we want.\n      obj.propertyIsEnumerable = function() {\n        return this.constructor.prototype.propertyIsEnumerable.apply(this, arguments);\n      };\n      obj.propertyIsEnumerable[UID_HASH_KEY] = hash;\n    } else if (obj.nodeType !== undefined) {\n      // At this point we couldn't get the IE `uniqueID` to use as a hash\n      // and we couldn't use a non-enumerable property to exploit the\n      // dontEnum bug so we simply add the `UID_HASH_KEY` on the node\n      // itself.\n      obj[UID_HASH_KEY] = hash;\n    } else {\n      throw new Error('Unable to set a non-enumerable property on object.');\n    }\n\n    return hash;\n  }\n\n  // Get references to ES5 object methods.\n  var isExtensible = Object.isExtensible;\n\n  // True if Object.defineProperty works as expected. IE8 fails this test.\n  var canDefineProperty = (function() {\n    try {\n      Object.defineProperty({}, '@', {});\n      return true;\n    } catch (e) {\n      return false;\n    }\n  }());\n\n  // IE has a `uniqueID` property on DOM nodes. We can construct the hash from it\n  // and avoid memory leaks from the IE cloneNode bug.\n  function getIENodeHash(node) {\n    if (node && node.nodeType > 0) {\n      switch (node.nodeType) {\n        case 1: // Element\n          return node.uniqueID;\n        case 9: // Document\n          return node.documentElement && node.documentElement.uniqueID;\n      }\n    }\n  }\n\n  // If possible, use a WeakMap.\n  var usingWeakMap = typeof WeakMap === 'function';\n  var weakMap;\n  if (usingWeakMap) {\n    weakMap = new WeakMap();\n  }\n\n  var objHashUID = 0;\n\n  var UID_HASH_KEY = '__immutablehash__';\n  if (typeof Symbol === 'function') {\n    UID_HASH_KEY = Symbol(UID_HASH_KEY);\n  }\n\n  var STRING_HASH_CACHE_MIN_STRLEN = 16;\n  var STRING_HASH_CACHE_MAX_SIZE = 255;\n  var STRING_HASH_CACHE_SIZE = 0;\n  var stringHashCache = {};\n\n  function assertNotInfinite(size) {\n    invariant(\n      size !== Infinity,\n      'Cannot perform this action with an infinite size.'\n    );\n  }\n\n  createClass(Map, KeyedCollection);\n\n    // @pragma Construction\n\n    function Map(value) {\n      return value === null || value === undefined ? emptyMap() :\n        isMap(value) && !isOrdered(value) ? value :\n        emptyMap().withMutations(function(map ) {\n          var iter = KeyedIterable(value);\n          assertNotInfinite(iter.size);\n          iter.forEach(function(v, k)  {return map.set(k, v)});\n        });\n    }\n\n    Map.of = function() {var keyValues = SLICE$0.call(arguments, 0);\n      return emptyMap().withMutations(function(map ) {\n        for (var i = 0; i < keyValues.length; i += 2) {\n          if (i + 1 >= keyValues.length) {\n            throw new Error('Missing value for key: ' + keyValues[i]);\n          }\n          map.set(keyValues[i], keyValues[i + 1]);\n        }\n      });\n    };\n\n    Map.prototype.toString = function() {\n      return this.__toString('Map {', '}');\n    };\n\n    // @pragma Access\n\n    Map.prototype.get = function(k, notSetValue) {\n      return this._root ?\n        this._root.get(0, undefined, k, notSetValue) :\n        notSetValue;\n    };\n\n    // @pragma Modification\n\n    Map.prototype.set = function(k, v) {\n      return updateMap(this, k, v);\n    };\n\n    Map.prototype.setIn = function(keyPath, v) {\n      return this.updateIn(keyPath, NOT_SET, function()  {return v});\n    };\n\n    Map.prototype.remove = function(k) {\n      return updateMap(this, k, NOT_SET);\n    };\n\n    Map.prototype.deleteIn = function(keyPath) {\n      return this.updateIn(keyPath, function()  {return NOT_SET});\n    };\n\n    Map.prototype.update = function(k, notSetValue, updater) {\n      return arguments.length === 1 ?\n        k(this) :\n        this.updateIn([k], notSetValue, updater);\n    };\n\n    Map.prototype.updateIn = function(keyPath, notSetValue, updater) {\n      if (!updater) {\n        updater = notSetValue;\n        notSetValue = undefined;\n      }\n      var updatedValue = updateInDeepMap(\n        this,\n        forceIterator(keyPath),\n        notSetValue,\n        updater\n      );\n      return updatedValue === NOT_SET ? undefined : updatedValue;\n    };\n\n    Map.prototype.clear = function() {\n      if (this.size === 0) {\n        return this;\n      }\n      if (this.__ownerID) {\n        this.size = 0;\n        this._root = null;\n        this.__hash = undefined;\n        this.__altered = true;\n        return this;\n      }\n      return emptyMap();\n    };\n\n    // @pragma Composition\n\n    Map.prototype.merge = function(/*...iters*/) {\n      return mergeIntoMapWith(this, undefined, arguments);\n    };\n\n    Map.prototype.mergeWith = function(merger) {var iters = SLICE$0.call(arguments, 1);\n      return mergeIntoMapWith(this, merger, iters);\n    };\n\n    Map.prototype.mergeIn = function(keyPath) {var iters = SLICE$0.call(arguments, 1);\n      return this.updateIn(\n        keyPath,\n        emptyMap(),\n        function(m ) {return typeof m.merge === 'function' ?\n          m.merge.apply(m, iters) :\n          iters[iters.length - 1]}\n      );\n    };\n\n    Map.prototype.mergeDeep = function(/*...iters*/) {\n      return mergeIntoMapWith(this, deepMerger, arguments);\n    };\n\n    Map.prototype.mergeDeepWith = function(merger) {var iters = SLICE$0.call(arguments, 1);\n      return mergeIntoMapWith(this, deepMergerWith(merger), iters);\n    };\n\n    Map.prototype.mergeDeepIn = function(keyPath) {var iters = SLICE$0.call(arguments, 1);\n      return this.updateIn(\n        keyPath,\n        emptyMap(),\n        function(m ) {return typeof m.mergeDeep === 'function' ?\n          m.mergeDeep.apply(m, iters) :\n          iters[iters.length - 1]}\n      );\n    };\n\n    Map.prototype.sort = function(comparator) {\n      // Late binding\n      return OrderedMap(sortFactory(this, comparator));\n    };\n\n    Map.prototype.sortBy = function(mapper, comparator) {\n      // Late binding\n      return OrderedMap(sortFactory(this, comparator, mapper));\n    };\n\n    // @pragma Mutability\n\n    Map.prototype.withMutations = function(fn) {\n      var mutable = this.asMutable();\n      fn(mutable);\n      return mutable.wasAltered() ? mutable.__ensureOwner(this.__ownerID) : this;\n    };\n\n    Map.prototype.asMutable = function() {\n      return this.__ownerID ? this : this.__ensureOwner(new OwnerID());\n    };\n\n    Map.prototype.asImmutable = function() {\n      return this.__ensureOwner();\n    };\n\n    Map.prototype.wasAltered = function() {\n      return this.__altered;\n    };\n\n    Map.prototype.__iterator = function(type, reverse) {\n      return new MapIterator(this, type, reverse);\n    };\n\n    Map.prototype.__iterate = function(fn, reverse) {var this$0 = this;\n      var iterations = 0;\n      this._root && this._root.iterate(function(entry ) {\n        iterations++;\n        return fn(entry[1], entry[0], this$0);\n      }, reverse);\n      return iterations;\n    };\n\n    Map.prototype.__ensureOwner = function(ownerID) {\n      if (ownerID === this.__ownerID) {\n        return this;\n      }\n      if (!ownerID) {\n        this.__ownerID = ownerID;\n        this.__altered = false;\n        return this;\n      }\n      return makeMap(this.size, this._root, ownerID, this.__hash);\n    };\n\n\n  function isMap(maybeMap) {\n    return !!(maybeMap && maybeMap[IS_MAP_SENTINEL]);\n  }\n\n  Map.isMap = isMap;\n\n  var IS_MAP_SENTINEL = '@@__IMMUTABLE_MAP__@@';\n\n  var MapPrototype = Map.prototype;\n  MapPrototype[IS_MAP_SENTINEL] = true;\n  MapPrototype[DELETE] = MapPrototype.remove;\n  MapPrototype.removeIn = MapPrototype.deleteIn;\n\n\n  // #pragma Trie Nodes\n\n\n\n    function ArrayMapNode(ownerID, entries) {\n      this.ownerID = ownerID;\n      this.entries = entries;\n    }\n\n    ArrayMapNode.prototype.get = function(shift, keyHash, key, notSetValue) {\n      var entries = this.entries;\n      for (var ii = 0, len = entries.length; ii < len; ii++) {\n        if (is(key, entries[ii][0])) {\n          return entries[ii][1];\n        }\n      }\n      return notSetValue;\n    };\n\n    ArrayMapNode.prototype.update = function(ownerID, shift, keyHash, key, value, didChangeSize, didAlter) {\n      var removed = value === NOT_SET;\n\n      var entries = this.entries;\n      var idx = 0;\n      for (var len = entries.length; idx < len; idx++) {\n        if (is(key, entries[idx][0])) {\n          break;\n        }\n      }\n      var exists = idx < len;\n\n      if (exists ? entries[idx][1] === value : removed) {\n        return this;\n      }\n\n      SetRef(didAlter);\n      (removed || !exists) && SetRef(didChangeSize);\n\n      if (removed && entries.length === 1) {\n        return; // undefined\n      }\n\n      if (!exists && !removed && entries.length >= MAX_ARRAY_MAP_SIZE) {\n        return createNodes(ownerID, entries, key, value);\n      }\n\n      var isEditable = ownerID && ownerID === this.ownerID;\n      var newEntries = isEditable ? entries : arrCopy(entries);\n\n      if (exists) {\n        if (removed) {\n          idx === len - 1 ? newEntries.pop() : (newEntries[idx] = newEntries.pop());\n        } else {\n          newEntries[idx] = [key, value];\n        }\n      } else {\n        newEntries.push([key, value]);\n      }\n\n      if (isEditable) {\n        this.entries = newEntries;\n        return this;\n      }\n\n      return new ArrayMapNode(ownerID, newEntries);\n    };\n\n\n\n\n    function BitmapIndexedNode(ownerID, bitmap, nodes) {\n      this.ownerID = ownerID;\n      this.bitmap = bitmap;\n      this.nodes = nodes;\n    }\n\n    BitmapIndexedNode.prototype.get = function(shift, keyHash, key, notSetValue) {\n      if (keyHash === undefined) {\n        keyHash = hash(key);\n      }\n      var bit = (1 << ((shift === 0 ? keyHash : keyHash >>> shift) & MASK));\n      var bitmap = this.bitmap;\n      return (bitmap & bit) === 0 ? notSetValue :\n        this.nodes[popCount(bitmap & (bit - 1))].get(shift + SHIFT, keyHash, key, notSetValue);\n    };\n\n    BitmapIndexedNode.prototype.update = function(ownerID, shift, keyHash, key, value, didChangeSize, didAlter) {\n      if (keyHash === undefined) {\n        keyHash = hash(key);\n      }\n      var keyHashFrag = (shift === 0 ? keyHash : keyHash >>> shift) & MASK;\n      var bit = 1 << keyHashFrag;\n      var bitmap = this.bitmap;\n      var exists = (bitmap & bit) !== 0;\n\n      if (!exists && value === NOT_SET) {\n        return this;\n      }\n\n      var idx = popCount(bitmap & (bit - 1));\n      var nodes = this.nodes;\n      var node = exists ? nodes[idx] : undefined;\n      var newNode = updateNode(node, ownerID, shift + SHIFT, keyHash, key, value, didChangeSize, didAlter);\n\n      if (newNode === node) {\n        return this;\n      }\n\n      if (!exists && newNode && nodes.length >= MAX_BITMAP_INDEXED_SIZE) {\n        return expandNodes(ownerID, nodes, bitmap, keyHashFrag, newNode);\n      }\n\n      if (exists && !newNode && nodes.length === 2 && isLeafNode(nodes[idx ^ 1])) {\n        return nodes[idx ^ 1];\n      }\n\n      if (exists && newNode && nodes.length === 1 && isLeafNode(newNode)) {\n        return newNode;\n      }\n\n      var isEditable = ownerID && ownerID === this.ownerID;\n      var newBitmap = exists ? newNode ? bitmap : bitmap ^ bit : bitmap | bit;\n      var newNodes = exists ? newNode ?\n        setIn(nodes, idx, newNode, isEditable) :\n        spliceOut(nodes, idx, isEditable) :\n        spliceIn(nodes, idx, newNode, isEditable);\n\n      if (isEditable) {\n        this.bitmap = newBitmap;\n        this.nodes = newNodes;\n        return this;\n      }\n\n      return new BitmapIndexedNode(ownerID, newBitmap, newNodes);\n    };\n\n\n\n\n    function HashArrayMapNode(ownerID, count, nodes) {\n      this.ownerID = ownerID;\n      this.count = count;\n      this.nodes = nodes;\n    }\n\n    HashArrayMapNode.prototype.get = function(shift, keyHash, key, notSetValue) {\n      if (keyHash === undefined) {\n        keyHash = hash(key);\n      }\n      var idx = (shift === 0 ? keyHash : keyHash >>> shift) & MASK;\n      var node = this.nodes[idx];\n      return node ? node.get(shift + SHIFT, keyHash, key, notSetValue) : notSetValue;\n    };\n\n    HashArrayMapNode.prototype.update = function(ownerID, shift, keyHash, key, value, didChangeSize, didAlter) {\n      if (keyHash === undefined) {\n        keyHash = hash(key);\n      }\n      var idx = (shift === 0 ? keyHash : keyHash >>> shift) & MASK;\n      var removed = value === NOT_SET;\n      var nodes = this.nodes;\n      var node = nodes[idx];\n\n      if (removed && !node) {\n        return this;\n      }\n\n      var newNode = updateNode(node, ownerID, shift + SHIFT, keyHash, key, value, didChangeSize, didAlter);\n      if (newNode === node) {\n        return this;\n      }\n\n      var newCount = this.count;\n      if (!node) {\n        newCount++;\n      } else if (!newNode) {\n        newCount--;\n        if (newCount < MIN_HASH_ARRAY_MAP_SIZE) {\n          return packNodes(ownerID, nodes, newCount, idx);\n        }\n      }\n\n      var isEditable = ownerID && ownerID === this.ownerID;\n      var newNodes = setIn(nodes, idx, newNode, isEditable);\n\n      if (isEditable) {\n        this.count = newCount;\n        this.nodes = newNodes;\n        return this;\n      }\n\n      return new HashArrayMapNode(ownerID, newCount, newNodes);\n    };\n\n\n\n\n    function HashCollisionNode(ownerID, keyHash, entries) {\n      this.ownerID = ownerID;\n      this.keyHash = keyHash;\n      this.entries = entries;\n    }\n\n    HashCollisionNode.prototype.get = function(shift, keyHash, key, notSetValue) {\n      var entries = this.entries;\n      for (var ii = 0, len = entries.length; ii < len; ii++) {\n        if (is(key, entries[ii][0])) {\n          return entries[ii][1];\n        }\n      }\n      return notSetValue;\n    };\n\n    HashCollisionNode.prototype.update = function(ownerID, shift, keyHash, key, value, didChangeSize, didAlter) {\n      if (keyHash === undefined) {\n        keyHash = hash(key);\n      }\n\n      var removed = value === NOT_SET;\n\n      if (keyHash !== this.keyHash) {\n        if (removed) {\n          return this;\n        }\n        SetRef(didAlter);\n        SetRef(didChangeSize);\n        return mergeIntoNode(this, ownerID, shift, keyHash, [key, value]);\n      }\n\n      var entries = this.entries;\n      var idx = 0;\n      for (var len = entries.length; idx < len; idx++) {\n        if (is(key, entries[idx][0])) {\n          break;\n        }\n      }\n      var exists = idx < len;\n\n      if (exists ? entries[idx][1] === value : removed) {\n        return this;\n      }\n\n      SetRef(didAlter);\n      (removed || !exists) && SetRef(didChangeSize);\n\n      if (removed && len === 2) {\n        return new ValueNode(ownerID, this.keyHash, entries[idx ^ 1]);\n      }\n\n      var isEditable = ownerID && ownerID === this.ownerID;\n      var newEntries = isEditable ? entries : arrCopy(entries);\n\n      if (exists) {\n        if (removed) {\n          idx === len - 1 ? newEntries.pop() : (newEntries[idx] = newEntries.pop());\n        } else {\n          newEntries[idx] = [key, value];\n        }\n      } else {\n        newEntries.push([key, value]);\n      }\n\n      if (isEditable) {\n        this.entries = newEntries;\n        return this;\n      }\n\n      return new HashCollisionNode(ownerID, this.keyHash, newEntries);\n    };\n\n\n\n\n    function ValueNode(ownerID, keyHash, entry) {\n      this.ownerID = ownerID;\n      this.keyHash = keyHash;\n      this.entry = entry;\n    }\n\n    ValueNode.prototype.get = function(shift, keyHash, key, notSetValue) {\n      return is(key, this.entry[0]) ? this.entry[1] : notSetValue;\n    };\n\n    ValueNode.prototype.update = function(ownerID, shift, keyHash, key, value, didChangeSize, didAlter) {\n      var removed = value === NOT_SET;\n      var keyMatch = is(key, this.entry[0]);\n      if (keyMatch ? value === this.entry[1] : removed) {\n        return this;\n      }\n\n      SetRef(didAlter);\n\n      if (removed) {\n        SetRef(didChangeSize);\n        return; // undefined\n      }\n\n      if (keyMatch) {\n        if (ownerID && ownerID === this.ownerID) {\n          this.entry[1] = value;\n          return this;\n        }\n        return new ValueNode(ownerID, this.keyHash, [key, value]);\n      }\n\n      SetRef(didChangeSize);\n      return mergeIntoNode(this, ownerID, shift, hash(key), [key, value]);\n    };\n\n\n\n  // #pragma Iterators\n\n  ArrayMapNode.prototype.iterate =\n  HashCollisionNode.prototype.iterate = function (fn, reverse) {\n    var entries = this.entries;\n    for (var ii = 0, maxIndex = entries.length - 1; ii <= maxIndex; ii++) {\n      if (fn(entries[reverse ? maxIndex - ii : ii]) === false) {\n        return false;\n      }\n    }\n  }\n\n  BitmapIndexedNode.prototype.iterate =\n  HashArrayMapNode.prototype.iterate = function (fn, reverse) {\n    var nodes = this.nodes;\n    for (var ii = 0, maxIndex = nodes.length - 1; ii <= maxIndex; ii++) {\n      var node = nodes[reverse ? maxIndex - ii : ii];\n      if (node && node.iterate(fn, reverse) === false) {\n        return false;\n      }\n    }\n  }\n\n  ValueNode.prototype.iterate = function (fn, reverse) {\n    return fn(this.entry);\n  }\n\n  createClass(MapIterator, Iterator);\n\n    function MapIterator(map, type, reverse) {\n      this._type = type;\n      this._reverse = reverse;\n      this._stack = map._root && mapIteratorFrame(map._root);\n    }\n\n    MapIterator.prototype.next = function() {\n      var type = this._type;\n      var stack = this._stack;\n      while (stack) {\n        var node = stack.node;\n        var index = stack.index++;\n        var maxIndex;\n        if (node.entry) {\n          if (index === 0) {\n            return mapIteratorValue(type, node.entry);\n          }\n        } else if (node.entries) {\n          maxIndex = node.entries.length - 1;\n          if (index <= maxIndex) {\n            return mapIteratorValue(type, node.entries[this._reverse ? maxIndex - index : index]);\n          }\n        } else {\n          maxIndex = node.nodes.length - 1;\n          if (index <= maxIndex) {\n            var subNode = node.nodes[this._reverse ? maxIndex - index : index];\n            if (subNode) {\n              if (subNode.entry) {\n                return mapIteratorValue(type, subNode.entry);\n              }\n              stack = this._stack = mapIteratorFrame(subNode, stack);\n            }\n            continue;\n          }\n        }\n        stack = this._stack = this._stack.__prev;\n      }\n      return iteratorDone();\n    };\n\n\n  function mapIteratorValue(type, entry) {\n    return iteratorValue(type, entry[0], entry[1]);\n  }\n\n  function mapIteratorFrame(node, prev) {\n    return {\n      node: node,\n      index: 0,\n      __prev: prev\n    };\n  }\n\n  function makeMap(size, root, ownerID, hash) {\n    var map = Object.create(MapPrototype);\n    map.size = size;\n    map._root = root;\n    map.__ownerID = ownerID;\n    map.__hash = hash;\n    map.__altered = false;\n    return map;\n  }\n\n  var EMPTY_MAP;\n  function emptyMap() {\n    return EMPTY_MAP || (EMPTY_MAP = makeMap(0));\n  }\n\n  function updateMap(map, k, v) {\n    var newRoot;\n    var newSize;\n    if (!map._root) {\n      if (v === NOT_SET) {\n        return map;\n      }\n      newSize = 1;\n      newRoot = new ArrayMapNode(map.__ownerID, [[k, v]]);\n    } else {\n      var didChangeSize = MakeRef(CHANGE_LENGTH);\n      var didAlter = MakeRef(DID_ALTER);\n      newRoot = updateNode(map._root, map.__ownerID, 0, undefined, k, v, didChangeSize, didAlter);\n      if (!didAlter.value) {\n        return map;\n      }\n      newSize = map.size + (didChangeSize.value ? v === NOT_SET ? -1 : 1 : 0);\n    }\n    if (map.__ownerID) {\n      map.size = newSize;\n      map._root = newRoot;\n      map.__hash = undefined;\n      map.__altered = true;\n      return map;\n    }\n    return newRoot ? makeMap(newSize, newRoot) : emptyMap();\n  }\n\n  function updateNode(node, ownerID, shift, keyHash, key, value, didChangeSize, didAlter) {\n    if (!node) {\n      if (value === NOT_SET) {\n        return node;\n      }\n      SetRef(didAlter);\n      SetRef(didChangeSize);\n      return new ValueNode(ownerID, keyHash, [key, value]);\n    }\n    return node.update(ownerID, shift, keyHash, key, value, didChangeSize, didAlter);\n  }\n\n  function isLeafNode(node) {\n    return node.constructor === ValueNode || node.constructor === HashCollisionNode;\n  }\n\n  function mergeIntoNode(node, ownerID, shift, keyHash, entry) {\n    if (node.keyHash === keyHash) {\n      return new HashCollisionNode(ownerID, keyHash, [node.entry, entry]);\n    }\n\n    var idx1 = (shift === 0 ? node.keyHash : node.keyHash >>> shift) & MASK;\n    var idx2 = (shift === 0 ? keyHash : keyHash >>> shift) & MASK;\n\n    var newNode;\n    var nodes = idx1 === idx2 ?\n      [mergeIntoNode(node, ownerID, shift + SHIFT, keyHash, entry)] :\n      ((newNode = new ValueNode(ownerID, keyHash, entry)), idx1 < idx2 ? [node, newNode] : [newNode, node]);\n\n    return new BitmapIndexedNode(ownerID, (1 << idx1) | (1 << idx2), nodes);\n  }\n\n  function createNodes(ownerID, entries, key, value) {\n    if (!ownerID) {\n      ownerID = new OwnerID();\n    }\n    var node = new ValueNode(ownerID, hash(key), [key, value]);\n    for (var ii = 0; ii < entries.length; ii++) {\n      var entry = entries[ii];\n      node = node.update(ownerID, 0, undefined, entry[0], entry[1]);\n    }\n    return node;\n  }\n\n  function packNodes(ownerID, nodes, count, excluding) {\n    var bitmap = 0;\n    var packedII = 0;\n    var packedNodes = new Array(count);\n    for (var ii = 0, bit = 1, len = nodes.length; ii < len; ii++, bit <<= 1) {\n      var node = nodes[ii];\n      if (node !== undefined && ii !== excluding) {\n        bitmap |= bit;\n        packedNodes[packedII++] = node;\n      }\n    }\n    return new BitmapIndexedNode(ownerID, bitmap, packedNodes);\n  }\n\n  function expandNodes(ownerID, nodes, bitmap, including, node) {\n    var count = 0;\n    var expandedNodes = new Array(SIZE);\n    for (var ii = 0; bitmap !== 0; ii++, bitmap >>>= 1) {\n      expandedNodes[ii] = bitmap & 1 ? nodes[count++] : undefined;\n    }\n    expandedNodes[including] = node;\n    return new HashArrayMapNode(ownerID, count + 1, expandedNodes);\n  }\n\n  function mergeIntoMapWith(map, merger, iterables) {\n    var iters = [];\n    for (var ii = 0; ii < iterables.length; ii++) {\n      var value = iterables[ii];\n      var iter = KeyedIterable(value);\n      if (!isIterable(value)) {\n        iter = iter.map(function(v ) {return fromJS(v)});\n      }\n      iters.push(iter);\n    }\n    return mergeIntoCollectionWith(map, merger, iters);\n  }\n\n  function deepMerger(existing, value, key) {\n    return existing && existing.mergeDeep && isIterable(value) ?\n      existing.mergeDeep(value) :\n      is(existing, value) ? existing : value;\n  }\n\n  function deepMergerWith(merger) {\n    return function(existing, value, key)  {\n      if (existing && existing.mergeDeepWith && isIterable(value)) {\n        return existing.mergeDeepWith(merger, value);\n      }\n      var nextValue = merger(existing, value, key);\n      return is(existing, nextValue) ? existing : nextValue;\n    };\n  }\n\n  function mergeIntoCollectionWith(collection, merger, iters) {\n    iters = iters.filter(function(x ) {return x.size !== 0});\n    if (iters.length === 0) {\n      return collection;\n    }\n    if (collection.size === 0 && !collection.__ownerID && iters.length === 1) {\n      return collection.constructor(iters[0]);\n    }\n    return collection.withMutations(function(collection ) {\n      var mergeIntoMap = merger ?\n        function(value, key)  {\n          collection.update(key, NOT_SET, function(existing )\n            {return existing === NOT_SET ? value : merger(existing, value, key)}\n          );\n        } :\n        function(value, key)  {\n          collection.set(key, value);\n        }\n      for (var ii = 0; ii < iters.length; ii++) {\n        iters[ii].forEach(mergeIntoMap);\n      }\n    });\n  }\n\n  function updateInDeepMap(existing, keyPathIter, notSetValue, updater) {\n    var isNotSet = existing === NOT_SET;\n    var step = keyPathIter.next();\n    if (step.done) {\n      var existingValue = isNotSet ? notSetValue : existing;\n      var newValue = updater(existingValue);\n      return newValue === existingValue ? existing : newValue;\n    }\n    invariant(\n      isNotSet || (existing && existing.set),\n      'invalid keyPath'\n    );\n    var key = step.value;\n    var nextExisting = isNotSet ? NOT_SET : existing.get(key, NOT_SET);\n    var nextUpdated = updateInDeepMap(\n      nextExisting,\n      keyPathIter,\n      notSetValue,\n      updater\n    );\n    return nextUpdated === nextExisting ? existing :\n      nextUpdated === NOT_SET ? existing.remove(key) :\n      (isNotSet ? emptyMap() : existing).set(key, nextUpdated);\n  }\n\n  function popCount(x) {\n    x = x - ((x >> 1) & 0x55555555);\n    x = (x & 0x33333333) + ((x >> 2) & 0x33333333);\n    x = (x + (x >> 4)) & 0x0f0f0f0f;\n    x = x + (x >> 8);\n    x = x + (x >> 16);\n    return x & 0x7f;\n  }\n\n  function setIn(array, idx, val, canEdit) {\n    var newArray = canEdit ? array : arrCopy(array);\n    newArray[idx] = val;\n    return newArray;\n  }\n\n  function spliceIn(array, idx, val, canEdit) {\n    var newLen = array.length + 1;\n    if (canEdit && idx + 1 === newLen) {\n      array[idx] = val;\n      return array;\n    }\n    var newArray = new Array(newLen);\n    var after = 0;\n    for (var ii = 0; ii < newLen; ii++) {\n      if (ii === idx) {\n        newArray[ii] = val;\n        after = -1;\n      } else {\n        newArray[ii] = array[ii + after];\n      }\n    }\n    return newArray;\n  }\n\n  function spliceOut(array, idx, canEdit) {\n    var newLen = array.length - 1;\n    if (canEdit && idx === newLen) {\n      array.pop();\n      return array;\n    }\n    var newArray = new Array(newLen);\n    var after = 0;\n    for (var ii = 0; ii < newLen; ii++) {\n      if (ii === idx) {\n        after = 1;\n      }\n      newArray[ii] = array[ii + after];\n    }\n    return newArray;\n  }\n\n  var MAX_ARRAY_MAP_SIZE = SIZE / 4;\n  var MAX_BITMAP_INDEXED_SIZE = SIZE / 2;\n  var MIN_HASH_ARRAY_MAP_SIZE = SIZE / 4;\n\n  createClass(List, IndexedCollection);\n\n    // @pragma Construction\n\n    function List(value) {\n      var empty = emptyList();\n      if (value === null || value === undefined) {\n        return empty;\n      }\n      if (isList(value)) {\n        return value;\n      }\n      var iter = IndexedIterable(value);\n      var size = iter.size;\n      if (size === 0) {\n        return empty;\n      }\n      assertNotInfinite(size);\n      if (size > 0 && size < SIZE) {\n        return makeList(0, size, SHIFT, null, new VNode(iter.toArray()));\n      }\n      return empty.withMutations(function(list ) {\n        list.setSize(size);\n        iter.forEach(function(v, i)  {return list.set(i, v)});\n      });\n    }\n\n    List.of = function(/*...values*/) {\n      return this(arguments);\n    };\n\n    List.prototype.toString = function() {\n      return this.__toString('List [', ']');\n    };\n\n    // @pragma Access\n\n    List.prototype.get = function(index, notSetValue) {\n      index = wrapIndex(this, index);\n      if (index >= 0 && index < this.size) {\n        index += this._origin;\n        var node = listNodeFor(this, index);\n        return node && node.array[index & MASK];\n      }\n      return notSetValue;\n    };\n\n    // @pragma Modification\n\n    List.prototype.set = function(index, value) {\n      return updateList(this, index, value);\n    };\n\n    List.prototype.remove = function(index) {\n      return !this.has(index) ? this :\n        index === 0 ? this.shift() :\n        index === this.size - 1 ? this.pop() :\n        this.splice(index, 1);\n    };\n\n    List.prototype.insert = function(index, value) {\n      return this.splice(index, 0, value);\n    };\n\n    List.prototype.clear = function() {\n      if (this.size === 0) {\n        return this;\n      }\n      if (this.__ownerID) {\n        this.size = this._origin = this._capacity = 0;\n        this._level = SHIFT;\n        this._root = this._tail = null;\n        this.__hash = undefined;\n        this.__altered = true;\n        return this;\n      }\n      return emptyList();\n    };\n\n    List.prototype.push = function(/*...values*/) {\n      var values = arguments;\n      var oldSize = this.size;\n      return this.withMutations(function(list ) {\n        setListBounds(list, 0, oldSize + values.length);\n        for (var ii = 0; ii < values.length; ii++) {\n          list.set(oldSize + ii, values[ii]);\n        }\n      });\n    };\n\n    List.prototype.pop = function() {\n      return setListBounds(this, 0, -1);\n    };\n\n    List.prototype.unshift = function(/*...values*/) {\n      var values = arguments;\n      return this.withMutations(function(list ) {\n        setListBounds(list, -values.length);\n        for (var ii = 0; ii < values.length; ii++) {\n          list.set(ii, values[ii]);\n        }\n      });\n    };\n\n    List.prototype.shift = function() {\n      return setListBounds(this, 1);\n    };\n\n    // @pragma Composition\n\n    List.prototype.merge = function(/*...iters*/) {\n      return mergeIntoListWith(this, undefined, arguments);\n    };\n\n    List.prototype.mergeWith = function(merger) {var iters = SLICE$0.call(arguments, 1);\n      return mergeIntoListWith(this, merger, iters);\n    };\n\n    List.prototype.mergeDeep = function(/*...iters*/) {\n      return mergeIntoListWith(this, deepMerger, arguments);\n    };\n\n    List.prototype.mergeDeepWith = function(merger) {var iters = SLICE$0.call(arguments, 1);\n      return mergeIntoListWith(this, deepMergerWith(merger), iters);\n    };\n\n    List.prototype.setSize = function(size) {\n      return setListBounds(this, 0, size);\n    };\n\n    // @pragma Iteration\n\n    List.prototype.slice = function(begin, end) {\n      var size = this.size;\n      if (wholeSlice(begin, end, size)) {\n        return this;\n      }\n      return setListBounds(\n        this,\n        resolveBegin(begin, size),\n        resolveEnd(end, size)\n      );\n    };\n\n    List.prototype.__iterator = function(type, reverse) {\n      var index = 0;\n      var values = iterateList(this, reverse);\n      return new Iterator(function()  {\n        var value = values();\n        return value === DONE ?\n          iteratorDone() :\n          iteratorValue(type, index++, value);\n      });\n    };\n\n    List.prototype.__iterate = function(fn, reverse) {\n      var index = 0;\n      var values = iterateList(this, reverse);\n      var value;\n      while ((value = values()) !== DONE) {\n        if (fn(value, index++, this) === false) {\n          break;\n        }\n      }\n      return index;\n    };\n\n    List.prototype.__ensureOwner = function(ownerID) {\n      if (ownerID === this.__ownerID) {\n        return this;\n      }\n      if (!ownerID) {\n        this.__ownerID = ownerID;\n        return this;\n      }\n      return makeList(this._origin, this._capacity, this._level, this._root, this._tail, ownerID, this.__hash);\n    };\n\n\n  function isList(maybeList) {\n    return !!(maybeList && maybeList[IS_LIST_SENTINEL]);\n  }\n\n  List.isList = isList;\n\n  var IS_LIST_SENTINEL = '@@__IMMUTABLE_LIST__@@';\n\n  var ListPrototype = List.prototype;\n  ListPrototype[IS_LIST_SENTINEL] = true;\n  ListPrototype[DELETE] = ListPrototype.remove;\n  ListPrototype.setIn = MapPrototype.setIn;\n  ListPrototype.deleteIn =\n  ListPrototype.removeIn = MapPrototype.removeIn;\n  ListPrototype.update = MapPrototype.update;\n  ListPrototype.updateIn = MapPrototype.updateIn;\n  ListPrototype.mergeIn = MapPrototype.mergeIn;\n  ListPrototype.mergeDeepIn = MapPrototype.mergeDeepIn;\n  ListPrototype.withMutations = MapPrototype.withMutations;\n  ListPrototype.asMutable = MapPrototype.asMutable;\n  ListPrototype.asImmutable = MapPrototype.asImmutable;\n  ListPrototype.wasAltered = MapPrototype.wasAltered;\n\n\n\n    function VNode(array, ownerID) {\n      this.array = array;\n      this.ownerID = ownerID;\n    }\n\n    // TODO: seems like these methods are very similar\n\n    VNode.prototype.removeBefore = function(ownerID, level, index) {\n      if (index === level ? 1 << level : 0 || this.array.length === 0) {\n        return this;\n      }\n      var originIndex = (index >>> level) & MASK;\n      if (originIndex >= this.array.length) {\n        return new VNode([], ownerID);\n      }\n      var removingFirst = originIndex === 0;\n      var newChild;\n      if (level > 0) {\n        var oldChild = this.array[originIndex];\n        newChild = oldChild && oldChild.removeBefore(ownerID, level - SHIFT, index);\n        if (newChild === oldChild && removingFirst) {\n          return this;\n        }\n      }\n      if (removingFirst && !newChild) {\n        return this;\n      }\n      var editable = editableVNode(this, ownerID);\n      if (!removingFirst) {\n        for (var ii = 0; ii < originIndex; ii++) {\n          editable.array[ii] = undefined;\n        }\n      }\n      if (newChild) {\n        editable.array[originIndex] = newChild;\n      }\n      return editable;\n    };\n\n    VNode.prototype.removeAfter = function(ownerID, level, index) {\n      if (index === (level ? 1 << level : 0) || this.array.length === 0) {\n        return this;\n      }\n      var sizeIndex = ((index - 1) >>> level) & MASK;\n      if (sizeIndex >= this.array.length) {\n        return this;\n      }\n\n      var newChild;\n      if (level > 0) {\n        var oldChild = this.array[sizeIndex];\n        newChild = oldChild && oldChild.removeAfter(ownerID, level - SHIFT, index);\n        if (newChild === oldChild && sizeIndex === this.array.length - 1) {\n          return this;\n        }\n      }\n\n      var editable = editableVNode(this, ownerID);\n      editable.array.splice(sizeIndex + 1);\n      if (newChild) {\n        editable.array[sizeIndex] = newChild;\n      }\n      return editable;\n    };\n\n\n\n  var DONE = {};\n\n  function iterateList(list, reverse) {\n    var left = list._origin;\n    var right = list._capacity;\n    var tailPos = getTailOffset(right);\n    var tail = list._tail;\n\n    return iterateNodeOrLeaf(list._root, list._level, 0);\n\n    function iterateNodeOrLeaf(node, level, offset) {\n      return level === 0 ?\n        iterateLeaf(node, offset) :\n        iterateNode(node, level, offset);\n    }\n\n    function iterateLeaf(node, offset) {\n      var array = offset === tailPos ? tail && tail.array : node && node.array;\n      var from = offset > left ? 0 : left - offset;\n      var to = right - offset;\n      if (to > SIZE) {\n        to = SIZE;\n      }\n      return function()  {\n        if (from === to) {\n          return DONE;\n        }\n        var idx = reverse ? --to : from++;\n        return array && array[idx];\n      };\n    }\n\n    function iterateNode(node, level, offset) {\n      var values;\n      var array = node && node.array;\n      var from = offset > left ? 0 : (left - offset) >> level;\n      var to = ((right - offset) >> level) + 1;\n      if (to > SIZE) {\n        to = SIZE;\n      }\n      return function()  {\n        do {\n          if (values) {\n            var value = values();\n            if (value !== DONE) {\n              return value;\n            }\n            values = null;\n          }\n          if (from === to) {\n            return DONE;\n          }\n          var idx = reverse ? --to : from++;\n          values = iterateNodeOrLeaf(\n            array && array[idx], level - SHIFT, offset + (idx << level)\n          );\n        } while (true);\n      };\n    }\n  }\n\n  function makeList(origin, capacity, level, root, tail, ownerID, hash) {\n    var list = Object.create(ListPrototype);\n    list.size = capacity - origin;\n    list._origin = origin;\n    list._capacity = capacity;\n    list._level = level;\n    list._root = root;\n    list._tail = tail;\n    list.__ownerID = ownerID;\n    list.__hash = hash;\n    list.__altered = false;\n    return list;\n  }\n\n  var EMPTY_LIST;\n  function emptyList() {\n    return EMPTY_LIST || (EMPTY_LIST = makeList(0, 0, SHIFT));\n  }\n\n  function updateList(list, index, value) {\n    index = wrapIndex(list, index);\n\n    if (index !== index) {\n      return list;\n    }\n\n    if (index >= list.size || index < 0) {\n      return list.withMutations(function(list ) {\n        index < 0 ?\n          setListBounds(list, index).set(0, value) :\n          setListBounds(list, 0, index + 1).set(index, value)\n      });\n    }\n\n    index += list._origin;\n\n    var newTail = list._tail;\n    var newRoot = list._root;\n    var didAlter = MakeRef(DID_ALTER);\n    if (index >= getTailOffset(list._capacity)) {\n      newTail = updateVNode(newTail, list.__ownerID, 0, index, value, didAlter);\n    } else {\n      newRoot = updateVNode(newRoot, list.__ownerID, list._level, index, value, didAlter);\n    }\n\n    if (!didAlter.value) {\n      return list;\n    }\n\n    if (list.__ownerID) {\n      list._root = newRoot;\n      list._tail = newTail;\n      list.__hash = undefined;\n      list.__altered = true;\n      return list;\n    }\n    return makeList(list._origin, list._capacity, list._level, newRoot, newTail);\n  }\n\n  function updateVNode(node, ownerID, level, index, value, didAlter) {\n    var idx = (index >>> level) & MASK;\n    var nodeHas = node && idx < node.array.length;\n    if (!nodeHas && value === undefined) {\n      return node;\n    }\n\n    var newNode;\n\n    if (level > 0) {\n      var lowerNode = node && node.array[idx];\n      var newLowerNode = updateVNode(lowerNode, ownerID, level - SHIFT, index, value, didAlter);\n      if (newLowerNode === lowerNode) {\n        return node;\n      }\n      newNode = editableVNode(node, ownerID);\n      newNode.array[idx] = newLowerNode;\n      return newNode;\n    }\n\n    if (nodeHas && node.array[idx] === value) {\n      return node;\n    }\n\n    SetRef(didAlter);\n\n    newNode = editableVNode(node, ownerID);\n    if (value === undefined && idx === newNode.array.length - 1) {\n      newNode.array.pop();\n    } else {\n      newNode.array[idx] = value;\n    }\n    return newNode;\n  }\n\n  function editableVNode(node, ownerID) {\n    if (ownerID && node && ownerID === node.ownerID) {\n      return node;\n    }\n    return new VNode(node ? node.array.slice() : [], ownerID);\n  }\n\n  function listNodeFor(list, rawIndex) {\n    if (rawIndex >= getTailOffset(list._capacity)) {\n      return list._tail;\n    }\n    if (rawIndex < 1 << (list._level + SHIFT)) {\n      var node = list._root;\n      var level = list._level;\n      while (node && level > 0) {\n        node = node.array[(rawIndex >>> level) & MASK];\n        level -= SHIFT;\n      }\n      return node;\n    }\n  }\n\n  function setListBounds(list, begin, end) {\n    // Sanitize begin & end using this shorthand for ToInt32(argument)\n    // http://www.ecma-international.org/ecma-262/6.0/#sec-toint32\n    if (begin !== undefined) {\n      begin = begin | 0;\n    }\n    if (end !== undefined) {\n      end = end | 0;\n    }\n    var owner = list.__ownerID || new OwnerID();\n    var oldOrigin = list._origin;\n    var oldCapacity = list._capacity;\n    var newOrigin = oldOrigin + begin;\n    var newCapacity = end === undefined ? oldCapacity : end < 0 ? oldCapacity + end : oldOrigin + end;\n    if (newOrigin === oldOrigin && newCapacity === oldCapacity) {\n      return list;\n    }\n\n    // If it's going to end after it starts, it's empty.\n    if (newOrigin >= newCapacity) {\n      return list.clear();\n    }\n\n    var newLevel = list._level;\n    var newRoot = list._root;\n\n    // New origin might need creating a higher root.\n    var offsetShift = 0;\n    while (newOrigin + offsetShift < 0) {\n      newRoot = new VNode(newRoot && newRoot.array.length ? [undefined, newRoot] : [], owner);\n      newLevel += SHIFT;\n      offsetShift += 1 << newLevel;\n    }\n    if (offsetShift) {\n      newOrigin += offsetShift;\n      oldOrigin += offsetShift;\n      newCapacity += offsetShift;\n      oldCapacity += offsetShift;\n    }\n\n    var oldTailOffset = getTailOffset(oldCapacity);\n    var newTailOffset = getTailOffset(newCapacity);\n\n    // New size might need creating a higher root.\n    while (newTailOffset >= 1 << (newLevel + SHIFT)) {\n      newRoot = new VNode(newRoot && newRoot.array.length ? [newRoot] : [], owner);\n      newLevel += SHIFT;\n    }\n\n    // Locate or create the new tail.\n    var oldTail = list._tail;\n    var newTail = newTailOffset < oldTailOffset ?\n      listNodeFor(list, newCapacity - 1) :\n      newTailOffset > oldTailOffset ? new VNode([], owner) : oldTail;\n\n    // Merge Tail into tree.\n    if (oldTail && newTailOffset > oldTailOffset && newOrigin < oldCapacity && oldTail.array.length) {\n      newRoot = editableVNode(newRoot, owner);\n      var node = newRoot;\n      for (var level = newLevel; level > SHIFT; level -= SHIFT) {\n        var idx = (oldTailOffset >>> level) & MASK;\n        node = node.array[idx] = editableVNode(node.array[idx], owner);\n      }\n      node.array[(oldTailOffset >>> SHIFT) & MASK] = oldTail;\n    }\n\n    // If the size has been reduced, there's a chance the tail needs to be trimmed.\n    if (newCapacity < oldCapacity) {\n      newTail = newTail && newTail.removeAfter(owner, 0, newCapacity);\n    }\n\n    // If the new origin is within the tail, then we do not need a root.\n    if (newOrigin >= newTailOffset) {\n      newOrigin -= newTailOffset;\n      newCapacity -= newTailOffset;\n      newLevel = SHIFT;\n      newRoot = null;\n      newTail = newTail && newTail.removeBefore(owner, 0, newOrigin);\n\n    // Otherwise, if the root has been trimmed, garbage collect.\n    } else if (newOrigin > oldOrigin || newTailOffset < oldTailOffset) {\n      offsetShift = 0;\n\n      // Identify the new top root node of the subtree of the old root.\n      while (newRoot) {\n        var beginIndex = (newOrigin >>> newLevel) & MASK;\n        if (beginIndex !== (newTailOffset >>> newLevel) & MASK) {\n          break;\n        }\n        if (beginIndex) {\n          offsetShift += (1 << newLevel) * beginIndex;\n        }\n        newLevel -= SHIFT;\n        newRoot = newRoot.array[beginIndex];\n      }\n\n      // Trim the new sides of the new root.\n      if (newRoot && newOrigin > oldOrigin) {\n        newRoot = newRoot.removeBefore(owner, newLevel, newOrigin - offsetShift);\n      }\n      if (newRoot && newTailOffset < oldTailOffset) {\n        newRoot = newRoot.removeAfter(owner, newLevel, newTailOffset - offsetShift);\n      }\n      if (offsetShift) {\n        newOrigin -= offsetShift;\n        newCapacity -= offsetShift;\n      }\n    }\n\n    if (list.__ownerID) {\n      list.size = newCapacity - newOrigin;\n      list._origin = newOrigin;\n      list._capacity = newCapacity;\n      list._level = newLevel;\n      list._root = newRoot;\n      list._tail = newTail;\n      list.__hash = undefined;\n      list.__altered = true;\n      return list;\n    }\n    return makeList(newOrigin, newCapacity, newLevel, newRoot, newTail);\n  }\n\n  function mergeIntoListWith(list, merger, iterables) {\n    var iters = [];\n    var maxSize = 0;\n    for (var ii = 0; ii < iterables.length; ii++) {\n      var value = iterables[ii];\n      var iter = IndexedIterable(value);\n      if (iter.size > maxSize) {\n        maxSize = iter.size;\n      }\n      if (!isIterable(value)) {\n        iter = iter.map(function(v ) {return fromJS(v)});\n      }\n      iters.push(iter);\n    }\n    if (maxSize > list.size) {\n      list = list.setSize(maxSize);\n    }\n    return mergeIntoCollectionWith(list, merger, iters);\n  }\n\n  function getTailOffset(size) {\n    return size < SIZE ? 0 : (((size - 1) >>> SHIFT) << SHIFT);\n  }\n\n  createClass(OrderedMap, Map);\n\n    // @pragma Construction\n\n    function OrderedMap(value) {\n      return value === null || value === undefined ? emptyOrderedMap() :\n        isOrderedMap(value) ? value :\n        emptyOrderedMap().withMutations(function(map ) {\n          var iter = KeyedIterable(value);\n          assertNotInfinite(iter.size);\n          iter.forEach(function(v, k)  {return map.set(k, v)});\n        });\n    }\n\n    OrderedMap.of = function(/*...values*/) {\n      return this(arguments);\n    };\n\n    OrderedMap.prototype.toString = function() {\n      return this.__toString('OrderedMap {', '}');\n    };\n\n    // @pragma Access\n\n    OrderedMap.prototype.get = function(k, notSetValue) {\n      var index = this._map.get(k);\n      return index !== undefined ? this._list.get(index)[1] : notSetValue;\n    };\n\n    // @pragma Modification\n\n    OrderedMap.prototype.clear = function() {\n      if (this.size === 0) {\n        return this;\n      }\n      if (this.__ownerID) {\n        this.size = 0;\n        this._map.clear();\n        this._list.clear();\n        return this;\n      }\n      return emptyOrderedMap();\n    };\n\n    OrderedMap.prototype.set = function(k, v) {\n      return updateOrderedMap(this, k, v);\n    };\n\n    OrderedMap.prototype.remove = function(k) {\n      return updateOrderedMap(this, k, NOT_SET);\n    };\n\n    OrderedMap.prototype.wasAltered = function() {\n      return this._map.wasAltered() || this._list.wasAltered();\n    };\n\n    OrderedMap.prototype.__iterate = function(fn, reverse) {var this$0 = this;\n      return this._list.__iterate(\n        function(entry ) {return entry && fn(entry[1], entry[0], this$0)},\n        reverse\n      );\n    };\n\n    OrderedMap.prototype.__iterator = function(type, reverse) {\n      return this._list.fromEntrySeq().__iterator(type, reverse);\n    };\n\n    OrderedMap.prototype.__ensureOwner = function(ownerID) {\n      if (ownerID === this.__ownerID) {\n        return this;\n      }\n      var newMap = this._map.__ensureOwner(ownerID);\n      var newList = this._list.__ensureOwner(ownerID);\n      if (!ownerID) {\n        this.__ownerID = ownerID;\n        this._map = newMap;\n        this._list = newList;\n        return this;\n      }\n      return makeOrderedMap(newMap, newList, ownerID, this.__hash);\n    };\n\n\n  function isOrderedMap(maybeOrderedMap) {\n    return isMap(maybeOrderedMap) && isOrdered(maybeOrderedMap);\n  }\n\n  OrderedMap.isOrderedMap = isOrderedMap;\n\n  OrderedMap.prototype[IS_ORDERED_SENTINEL] = true;\n  OrderedMap.prototype[DELETE] = OrderedMap.prototype.remove;\n\n\n\n  function makeOrderedMap(map, list, ownerID, hash) {\n    var omap = Object.create(OrderedMap.prototype);\n    omap.size = map ? map.size : 0;\n    omap._map = map;\n    omap._list = list;\n    omap.__ownerID = ownerID;\n    omap.__hash = hash;\n    return omap;\n  }\n\n  var EMPTY_ORDERED_MAP;\n  function emptyOrderedMap() {\n    return EMPTY_ORDERED_MAP || (EMPTY_ORDERED_MAP = makeOrderedMap(emptyMap(), emptyList()));\n  }\n\n  function updateOrderedMap(omap, k, v) {\n    var map = omap._map;\n    var list = omap._list;\n    var i = map.get(k);\n    var has = i !== undefined;\n    var newMap;\n    var newList;\n    if (v === NOT_SET) { // removed\n      if (!has) {\n        return omap;\n      }\n      if (list.size >= SIZE && list.size >= map.size * 2) {\n        newList = list.filter(function(entry, idx)  {return entry !== undefined && i !== idx});\n        newMap = newList.toKeyedSeq().map(function(entry ) {return entry[0]}).flip().toMap();\n        if (omap.__ownerID) {\n          newMap.__ownerID = newList.__ownerID = omap.__ownerID;\n        }\n      } else {\n        newMap = map.remove(k);\n        newList = i === list.size - 1 ? list.pop() : list.set(i, undefined);\n      }\n    } else {\n      if (has) {\n        if (v === list.get(i)[1]) {\n          return omap;\n        }\n        newMap = map;\n        newList = list.set(i, [k, v]);\n      } else {\n        newMap = map.set(k, list.size);\n        newList = list.set(list.size, [k, v]);\n      }\n    }\n    if (omap.__ownerID) {\n      omap.size = newMap.size;\n      omap._map = newMap;\n      omap._list = newList;\n      omap.__hash = undefined;\n      return omap;\n    }\n    return makeOrderedMap(newMap, newList);\n  }\n\n  createClass(ToKeyedSequence, KeyedSeq);\n    function ToKeyedSequence(indexed, useKeys) {\n      this._iter = indexed;\n      this._useKeys = useKeys;\n      this.size = indexed.size;\n    }\n\n    ToKeyedSequence.prototype.get = function(key, notSetValue) {\n      return this._iter.get(key, notSetValue);\n    };\n\n    ToKeyedSequence.prototype.has = function(key) {\n      return this._iter.has(key);\n    };\n\n    ToKeyedSequence.prototype.valueSeq = function() {\n      return this._iter.valueSeq();\n    };\n\n    ToKeyedSequence.prototype.reverse = function() {var this$0 = this;\n      var reversedSequence = reverseFactory(this, true);\n      if (!this._useKeys) {\n        reversedSequence.valueSeq = function()  {return this$0._iter.toSeq().reverse()};\n      }\n      return reversedSequence;\n    };\n\n    ToKeyedSequence.prototype.map = function(mapper, context) {var this$0 = this;\n      var mappedSequence = mapFactory(this, mapper, context);\n      if (!this._useKeys) {\n        mappedSequence.valueSeq = function()  {return this$0._iter.toSeq().map(mapper, context)};\n      }\n      return mappedSequence;\n    };\n\n    ToKeyedSequence.prototype.__iterate = function(fn, reverse) {var this$0 = this;\n      var ii;\n      return this._iter.__iterate(\n        this._useKeys ?\n          function(v, k)  {return fn(v, k, this$0)} :\n          ((ii = reverse ? resolveSize(this) : 0),\n            function(v ) {return fn(v, reverse ? --ii : ii++, this$0)}),\n        reverse\n      );\n    };\n\n    ToKeyedSequence.prototype.__iterator = function(type, reverse) {\n      if (this._useKeys) {\n        return this._iter.__iterator(type, reverse);\n      }\n      var iterator = this._iter.__iterator(ITERATE_VALUES, reverse);\n      var ii = reverse ? resolveSize(this) : 0;\n      return new Iterator(function()  {\n        var step = iterator.next();\n        return step.done ? step :\n          iteratorValue(type, reverse ? --ii : ii++, step.value, step);\n      });\n    };\n\n  ToKeyedSequence.prototype[IS_ORDERED_SENTINEL] = true;\n\n\n  createClass(ToIndexedSequence, IndexedSeq);\n    function ToIndexedSequence(iter) {\n      this._iter = iter;\n      this.size = iter.size;\n    }\n\n    ToIndexedSequence.prototype.includes = function(value) {\n      return this._iter.includes(value);\n    };\n\n    ToIndexedSequence.prototype.__iterate = function(fn, reverse) {var this$0 = this;\n      var iterations = 0;\n      return this._iter.__iterate(function(v ) {return fn(v, iterations++, this$0)}, reverse);\n    };\n\n    ToIndexedSequence.prototype.__iterator = function(type, reverse) {\n      var iterator = this._iter.__iterator(ITERATE_VALUES, reverse);\n      var iterations = 0;\n      return new Iterator(function()  {\n        var step = iterator.next();\n        return step.done ? step :\n          iteratorValue(type, iterations++, step.value, step)\n      });\n    };\n\n\n\n  createClass(ToSetSequence, SetSeq);\n    function ToSetSequence(iter) {\n      this._iter = iter;\n      this.size = iter.size;\n    }\n\n    ToSetSequence.prototype.has = function(key) {\n      return this._iter.includes(key);\n    };\n\n    ToSetSequence.prototype.__iterate = function(fn, reverse) {var this$0 = this;\n      return this._iter.__iterate(function(v ) {return fn(v, v, this$0)}, reverse);\n    };\n\n    ToSetSequence.prototype.__iterator = function(type, reverse) {\n      var iterator = this._iter.__iterator(ITERATE_VALUES, reverse);\n      return new Iterator(function()  {\n        var step = iterator.next();\n        return step.done ? step :\n          iteratorValue(type, step.value, step.value, step);\n      });\n    };\n\n\n\n  createClass(FromEntriesSequence, KeyedSeq);\n    function FromEntriesSequence(entries) {\n      this._iter = entries;\n      this.size = entries.size;\n    }\n\n    FromEntriesSequence.prototype.entrySeq = function() {\n      return this._iter.toSeq();\n    };\n\n    FromEntriesSequence.prototype.__iterate = function(fn, reverse) {var this$0 = this;\n      return this._iter.__iterate(function(entry ) {\n        // Check if entry exists first so array access doesn't throw for holes\n        // in the parent iteration.\n        if (entry) {\n          validateEntry(entry);\n          var indexedIterable = isIterable(entry);\n          return fn(\n            indexedIterable ? entry.get(1) : entry[1],\n            indexedIterable ? entry.get(0) : entry[0],\n            this$0\n          );\n        }\n      }, reverse);\n    };\n\n    FromEntriesSequence.prototype.__iterator = function(type, reverse) {\n      var iterator = this._iter.__iterator(ITERATE_VALUES, reverse);\n      return new Iterator(function()  {\n        while (true) {\n          var step = iterator.next();\n          if (step.done) {\n            return step;\n          }\n          var entry = step.value;\n          // Check if entry exists first so array access doesn't throw for holes\n          // in the parent iteration.\n          if (entry) {\n            validateEntry(entry);\n            var indexedIterable = isIterable(entry);\n            return iteratorValue(\n              type,\n              indexedIterable ? entry.get(0) : entry[0],\n              indexedIterable ? entry.get(1) : entry[1],\n              step\n            );\n          }\n        }\n      });\n    };\n\n\n  ToIndexedSequence.prototype.cacheResult =\n  ToKeyedSequence.prototype.cacheResult =\n  ToSetSequence.prototype.cacheResult =\n  FromEntriesSequence.prototype.cacheResult =\n    cacheResultThrough;\n\n\n  function flipFactory(iterable) {\n    var flipSequence = makeSequence(iterable);\n    flipSequence._iter = iterable;\n    flipSequence.size = iterable.size;\n    flipSequence.flip = function()  {return iterable};\n    flipSequence.reverse = function () {\n      var reversedSequence = iterable.reverse.apply(this); // super.reverse()\n      reversedSequence.flip = function()  {return iterable.reverse()};\n      return reversedSequence;\n    };\n    flipSequence.has = function(key ) {return iterable.includes(key)};\n    flipSequence.includes = function(key ) {return iterable.has(key)};\n    flipSequence.cacheResult = cacheResultThrough;\n    flipSequence.__iterateUncached = function (fn, reverse) {var this$0 = this;\n      return iterable.__iterate(function(v, k)  {return fn(k, v, this$0) !== false}, reverse);\n    }\n    flipSequence.__iteratorUncached = function(type, reverse) {\n      if (type === ITERATE_ENTRIES) {\n        var iterator = iterable.__iterator(type, reverse);\n        return new Iterator(function()  {\n          var step = iterator.next();\n          if (!step.done) {\n            var k = step.value[0];\n            step.value[0] = step.value[1];\n            step.value[1] = k;\n          }\n          return step;\n        });\n      }\n      return iterable.__iterator(\n        type === ITERATE_VALUES ? ITERATE_KEYS : ITERATE_VALUES,\n        reverse\n      );\n    }\n    return flipSequence;\n  }\n\n\n  function mapFactory(iterable, mapper, context) {\n    var mappedSequence = makeSequence(iterable);\n    mappedSequence.size = iterable.size;\n    mappedSequence.has = function(key ) {return iterable.has(key)};\n    mappedSequence.get = function(key, notSetValue)  {\n      var v = iterable.get(key, NOT_SET);\n      return v === NOT_SET ?\n        notSetValue :\n        mapper.call(context, v, key, iterable);\n    };\n    mappedSequence.__iterateUncached = function (fn, reverse) {var this$0 = this;\n      return iterable.__iterate(\n        function(v, k, c)  {return fn(mapper.call(context, v, k, c), k, this$0) !== false},\n        reverse\n      );\n    }\n    mappedSequence.__iteratorUncached = function (type, reverse) {\n      var iterator = iterable.__iterator(ITERATE_ENTRIES, reverse);\n      return new Iterator(function()  {\n        var step = iterator.next();\n        if (step.done) {\n          return step;\n        }\n        var entry = step.value;\n        var key = entry[0];\n        return iteratorValue(\n          type,\n          key,\n          mapper.call(context, entry[1], key, iterable),\n          step\n        );\n      });\n    }\n    return mappedSequence;\n  }\n\n\n  function reverseFactory(iterable, useKeys) {\n    var reversedSequence = makeSequence(iterable);\n    reversedSequence._iter = iterable;\n    reversedSequence.size = iterable.size;\n    reversedSequence.reverse = function()  {return iterable};\n    if (iterable.flip) {\n      reversedSequence.flip = function () {\n        var flipSequence = flipFactory(iterable);\n        flipSequence.reverse = function()  {return iterable.flip()};\n        return flipSequence;\n      };\n    }\n    reversedSequence.get = function(key, notSetValue) \n      {return iterable.get(useKeys ? key : -1 - key, notSetValue)};\n    reversedSequence.has = function(key )\n      {return iterable.has(useKeys ? key : -1 - key)};\n    reversedSequence.includes = function(value ) {return iterable.includes(value)};\n    reversedSequence.cacheResult = cacheResultThrough;\n    reversedSequence.__iterate = function (fn, reverse) {var this$0 = this;\n      return iterable.__iterate(function(v, k)  {return fn(v, k, this$0)}, !reverse);\n    };\n    reversedSequence.__iterator =\n      function(type, reverse)  {return iterable.__iterator(type, !reverse)};\n    return reversedSequence;\n  }\n\n\n  function filterFactory(iterable, predicate, context, useKeys) {\n    var filterSequence = makeSequence(iterable);\n    if (useKeys) {\n      filterSequence.has = function(key ) {\n        var v = iterable.get(key, NOT_SET);\n        return v !== NOT_SET && !!predicate.call(context, v, key, iterable);\n      };\n      filterSequence.get = function(key, notSetValue)  {\n        var v = iterable.get(key, NOT_SET);\n        return v !== NOT_SET && predicate.call(context, v, key, iterable) ?\n          v : notSetValue;\n      };\n    }\n    filterSequence.__iterateUncached = function (fn, reverse) {var this$0 = this;\n      var iterations = 0;\n      iterable.__iterate(function(v, k, c)  {\n        if (predicate.call(context, v, k, c)) {\n          iterations++;\n          return fn(v, useKeys ? k : iterations - 1, this$0);\n        }\n      }, reverse);\n      return iterations;\n    };\n    filterSequence.__iteratorUncached = function (type, reverse) {\n      var iterator = iterable.__iterator(ITERATE_ENTRIES, reverse);\n      var iterations = 0;\n      return new Iterator(function()  {\n        while (true) {\n          var step = iterator.next();\n          if (step.done) {\n            return step;\n          }\n          var entry = step.value;\n          var key = entry[0];\n          var value = entry[1];\n          if (predicate.call(context, value, key, iterable)) {\n            return iteratorValue(type, useKeys ? key : iterations++, value, step);\n          }\n        }\n      });\n    }\n    return filterSequence;\n  }\n\n\n  function countByFactory(iterable, grouper, context) {\n    var groups = Map().asMutable();\n    iterable.__iterate(function(v, k)  {\n      groups.update(\n        grouper.call(context, v, k, iterable),\n        0,\n        function(a ) {return a + 1}\n      );\n    });\n    return groups.asImmutable();\n  }\n\n\n  function groupByFactory(iterable, grouper, context) {\n    var isKeyedIter = isKeyed(iterable);\n    var groups = (isOrdered(iterable) ? OrderedMap() : Map()).asMutable();\n    iterable.__iterate(function(v, k)  {\n      groups.update(\n        grouper.call(context, v, k, iterable),\n        function(a ) {return (a = a || [], a.push(isKeyedIter ? [k, v] : v), a)}\n      );\n    });\n    var coerce = iterableClass(iterable);\n    return groups.map(function(arr ) {return reify(iterable, coerce(arr))});\n  }\n\n\n  function sliceFactory(iterable, begin, end, useKeys) {\n    var originalSize = iterable.size;\n\n    // Sanitize begin & end using this shorthand for ToInt32(argument)\n    // http://www.ecma-international.org/ecma-262/6.0/#sec-toint32\n    if (begin !== undefined) {\n      begin = begin | 0;\n    }\n    if (end !== undefined) {\n      if (end === Infinity) {\n        end = originalSize;\n      } else {\n        end = end | 0;\n      }\n    }\n\n    if (wholeSlice(begin, end, originalSize)) {\n      return iterable;\n    }\n\n    var resolvedBegin = resolveBegin(begin, originalSize);\n    var resolvedEnd = resolveEnd(end, originalSize);\n\n    // begin or end will be NaN if they were provided as negative numbers and\n    // this iterable's size is unknown. In that case, cache first so there is\n    // a known size and these do not resolve to NaN.\n    if (resolvedBegin !== resolvedBegin || resolvedEnd !== resolvedEnd) {\n      return sliceFactory(iterable.toSeq().cacheResult(), begin, end, useKeys);\n    }\n\n    // Note: resolvedEnd is undefined when the original sequence's length is\n    // unknown and this slice did not supply an end and should contain all\n    // elements after resolvedBegin.\n    // In that case, resolvedSize will be NaN and sliceSize will remain undefined.\n    var resolvedSize = resolvedEnd - resolvedBegin;\n    var sliceSize;\n    if (resolvedSize === resolvedSize) {\n      sliceSize = resolvedSize < 0 ? 0 : resolvedSize;\n    }\n\n    var sliceSeq = makeSequence(iterable);\n\n    // If iterable.size is undefined, the size of the realized sliceSeq is\n    // unknown at this point unless the number of items to slice is 0\n    sliceSeq.size = sliceSize === 0 ? sliceSize : iterable.size && sliceSize || undefined;\n\n    if (!useKeys && isSeq(iterable) && sliceSize >= 0) {\n      sliceSeq.get = function (index, notSetValue) {\n        index = wrapIndex(this, index);\n        return index >= 0 && index < sliceSize ?\n          iterable.get(index + resolvedBegin, notSetValue) :\n          notSetValue;\n      }\n    }\n\n    sliceSeq.__iterateUncached = function(fn, reverse) {var this$0 = this;\n      if (sliceSize === 0) {\n        return 0;\n      }\n      if (reverse) {\n        return this.cacheResult().__iterate(fn, reverse);\n      }\n      var skipped = 0;\n      var isSkipping = true;\n      var iterations = 0;\n      iterable.__iterate(function(v, k)  {\n        if (!(isSkipping && (isSkipping = skipped++ < resolvedBegin))) {\n          iterations++;\n          return fn(v, useKeys ? k : iterations - 1, this$0) !== false &&\n                 iterations !== sliceSize;\n        }\n      });\n      return iterations;\n    };\n\n    sliceSeq.__iteratorUncached = function(type, reverse) {\n      if (sliceSize !== 0 && reverse) {\n        return this.cacheResult().__iterator(type, reverse);\n      }\n      // Don't bother instantiating parent iterator if taking 0.\n      var iterator = sliceSize !== 0 && iterable.__iterator(type, reverse);\n      var skipped = 0;\n      var iterations = 0;\n      return new Iterator(function()  {\n        while (skipped++ < resolvedBegin) {\n          iterator.next();\n        }\n        if (++iterations > sliceSize) {\n          return iteratorDone();\n        }\n        var step = iterator.next();\n        if (useKeys || type === ITERATE_VALUES) {\n          return step;\n        } else if (type === ITERATE_KEYS) {\n          return iteratorValue(type, iterations - 1, undefined, step);\n        } else {\n          return iteratorValue(type, iterations - 1, step.value[1], step);\n        }\n      });\n    }\n\n    return sliceSeq;\n  }\n\n\n  function takeWhileFactory(iterable, predicate, context) {\n    var takeSequence = makeSequence(iterable);\n    takeSequence.__iterateUncached = function(fn, reverse) {var this$0 = this;\n      if (reverse) {\n        return this.cacheResult().__iterate(fn, reverse);\n      }\n      var iterations = 0;\n      iterable.__iterate(function(v, k, c) \n        {return predicate.call(context, v, k, c) && ++iterations && fn(v, k, this$0)}\n      );\n      return iterations;\n    };\n    takeSequence.__iteratorUncached = function(type, reverse) {var this$0 = this;\n      if (reverse) {\n        return this.cacheResult().__iterator(type, reverse);\n      }\n      var iterator = iterable.__iterator(ITERATE_ENTRIES, reverse);\n      var iterating = true;\n      return new Iterator(function()  {\n        if (!iterating) {\n          return iteratorDone();\n        }\n        var step = iterator.next();\n        if (step.done) {\n          return step;\n        }\n        var entry = step.value;\n        var k = entry[0];\n        var v = entry[1];\n        if (!predicate.call(context, v, k, this$0)) {\n          iterating = false;\n          return iteratorDone();\n        }\n        return type === ITERATE_ENTRIES ? step :\n          iteratorValue(type, k, v, step);\n      });\n    };\n    return takeSequence;\n  }\n\n\n  function skipWhileFactory(iterable, predicate, context, useKeys) {\n    var skipSequence = makeSequence(iterable);\n    skipSequence.__iterateUncached = function (fn, reverse) {var this$0 = this;\n      if (reverse) {\n        return this.cacheResult().__iterate(fn, reverse);\n      }\n      var isSkipping = true;\n      var iterations = 0;\n      iterable.__iterate(function(v, k, c)  {\n        if (!(isSkipping && (isSkipping = predicate.call(context, v, k, c)))) {\n          iterations++;\n          return fn(v, useKeys ? k : iterations - 1, this$0);\n        }\n      });\n      return iterations;\n    };\n    skipSequence.__iteratorUncached = function(type, reverse) {var this$0 = this;\n      if (reverse) {\n        return this.cacheResult().__iterator(type, reverse);\n      }\n      var iterator = iterable.__iterator(ITERATE_ENTRIES, reverse);\n      var skipping = true;\n      var iterations = 0;\n      return new Iterator(function()  {\n        var step, k, v;\n        do {\n          step = iterator.next();\n          if (step.done) {\n            if (useKeys || type === ITERATE_VALUES) {\n              return step;\n            } else if (type === ITERATE_KEYS) {\n              return iteratorValue(type, iterations++, undefined, step);\n            } else {\n              return iteratorValue(type, iterations++, step.value[1], step);\n            }\n          }\n          var entry = step.value;\n          k = entry[0];\n          v = entry[1];\n          skipping && (skipping = predicate.call(context, v, k, this$0));\n        } while (skipping);\n        return type === ITERATE_ENTRIES ? step :\n          iteratorValue(type, k, v, step);\n      });\n    };\n    return skipSequence;\n  }\n\n\n  function concatFactory(iterable, values) {\n    var isKeyedIterable = isKeyed(iterable);\n    var iters = [iterable].concat(values).map(function(v ) {\n      if (!isIterable(v)) {\n        v = isKeyedIterable ?\n          keyedSeqFromValue(v) :\n          indexedSeqFromValue(Array.isArray(v) ? v : [v]);\n      } else if (isKeyedIterable) {\n        v = KeyedIterable(v);\n      }\n      return v;\n    }).filter(function(v ) {return v.size !== 0});\n\n    if (iters.length === 0) {\n      return iterable;\n    }\n\n    if (iters.length === 1) {\n      var singleton = iters[0];\n      if (singleton === iterable ||\n          isKeyedIterable && isKeyed(singleton) ||\n          isIndexed(iterable) && isIndexed(singleton)) {\n        return singleton;\n      }\n    }\n\n    var concatSeq = new ArraySeq(iters);\n    if (isKeyedIterable) {\n      concatSeq = concatSeq.toKeyedSeq();\n    } else if (!isIndexed(iterable)) {\n      concatSeq = concatSeq.toSetSeq();\n    }\n    concatSeq = concatSeq.flatten(true);\n    concatSeq.size = iters.reduce(\n      function(sum, seq)  {\n        if (sum !== undefined) {\n          var size = seq.size;\n          if (size !== undefined) {\n            return sum + size;\n          }\n        }\n      },\n      0\n    );\n    return concatSeq;\n  }\n\n\n  function flattenFactory(iterable, depth, useKeys) {\n    var flatSequence = makeSequence(iterable);\n    flatSequence.__iterateUncached = function(fn, reverse) {\n      var iterations = 0;\n      var stopped = false;\n      function flatDeep(iter, currentDepth) {var this$0 = this;\n        iter.__iterate(function(v, k)  {\n          if ((!depth || currentDepth < depth) && isIterable(v)) {\n            flatDeep(v, currentDepth + 1);\n          } else if (fn(v, useKeys ? k : iterations++, this$0) === false) {\n            stopped = true;\n          }\n          return !stopped;\n        }, reverse);\n      }\n      flatDeep(iterable, 0);\n      return iterations;\n    }\n    flatSequence.__iteratorUncached = function(type, reverse) {\n      var iterator = iterable.__iterator(type, reverse);\n      var stack = [];\n      var iterations = 0;\n      return new Iterator(function()  {\n        while (iterator) {\n          var step = iterator.next();\n          if (step.done !== false) {\n            iterator = stack.pop();\n            continue;\n          }\n          var v = step.value;\n          if (type === ITERATE_ENTRIES) {\n            v = v[1];\n          }\n          if ((!depth || stack.length < depth) && isIterable(v)) {\n            stack.push(iterator);\n            iterator = v.__iterator(type, reverse);\n          } else {\n            return useKeys ? step : iteratorValue(type, iterations++, v, step);\n          }\n        }\n        return iteratorDone();\n      });\n    }\n    return flatSequence;\n  }\n\n\n  function flatMapFactory(iterable, mapper, context) {\n    var coerce = iterableClass(iterable);\n    return iterable.toSeq().map(\n      function(v, k)  {return coerce(mapper.call(context, v, k, iterable))}\n    ).flatten(true);\n  }\n\n\n  function interposeFactory(iterable, separator) {\n    var interposedSequence = makeSequence(iterable);\n    interposedSequence.size = iterable.size && iterable.size * 2 -1;\n    interposedSequence.__iterateUncached = function(fn, reverse) {var this$0 = this;\n      var iterations = 0;\n      iterable.__iterate(function(v, k) \n        {return (!iterations || fn(separator, iterations++, this$0) !== false) &&\n        fn(v, iterations++, this$0) !== false},\n        reverse\n      );\n      return iterations;\n    };\n    interposedSequence.__iteratorUncached = function(type, reverse) {\n      var iterator = iterable.__iterator(ITERATE_VALUES, reverse);\n      var iterations = 0;\n      var step;\n      return new Iterator(function()  {\n        if (!step || iterations % 2) {\n          step = iterator.next();\n          if (step.done) {\n            return step;\n          }\n        }\n        return iterations % 2 ?\n          iteratorValue(type, iterations++, separator) :\n          iteratorValue(type, iterations++, step.value, step);\n      });\n    };\n    return interposedSequence;\n  }\n\n\n  function sortFactory(iterable, comparator, mapper) {\n    if (!comparator) {\n      comparator = defaultComparator;\n    }\n    var isKeyedIterable = isKeyed(iterable);\n    var index = 0;\n    var entries = iterable.toSeq().map(\n      function(v, k)  {return [k, v, index++, mapper ? mapper(v, k, iterable) : v]}\n    ).toArray();\n    entries.sort(function(a, b)  {return comparator(a[3], b[3]) || a[2] - b[2]}).forEach(\n      isKeyedIterable ?\n      function(v, i)  { entries[i].length = 2; } :\n      function(v, i)  { entries[i] = v[1]; }\n    );\n    return isKeyedIterable ? KeyedSeq(entries) :\n      isIndexed(iterable) ? IndexedSeq(entries) :\n      SetSeq(entries);\n  }\n\n\n  function maxFactory(iterable, comparator, mapper) {\n    if (!comparator) {\n      comparator = defaultComparator;\n    }\n    if (mapper) {\n      var entry = iterable.toSeq()\n        .map(function(v, k)  {return [v, mapper(v, k, iterable)]})\n        .reduce(function(a, b)  {return maxCompare(comparator, a[1], b[1]) ? b : a});\n      return entry && entry[0];\n    } else {\n      return iterable.reduce(function(a, b)  {return maxCompare(comparator, a, b) ? b : a});\n    }\n  }\n\n  function maxCompare(comparator, a, b) {\n    var comp = comparator(b, a);\n    // b is considered the new max if the comparator declares them equal, but\n    // they are not equal and b is in fact a nullish value.\n    return (comp === 0 && b !== a && (b === undefined || b === null || b !== b)) || comp > 0;\n  }\n\n\n  function zipWithFactory(keyIter, zipper, iters) {\n    var zipSequence = makeSequence(keyIter);\n    zipSequence.size = new ArraySeq(iters).map(function(i ) {return i.size}).min();\n    // Note: this a generic base implementation of __iterate in terms of\n    // __iterator which may be more generically useful in the future.\n    zipSequence.__iterate = function(fn, reverse) {\n      /* generic:\n      var iterator = this.__iterator(ITERATE_ENTRIES, reverse);\n      var step;\n      var iterations = 0;\n      while (!(step = iterator.next()).done) {\n        iterations++;\n        if (fn(step.value[1], step.value[0], this) === false) {\n          break;\n        }\n      }\n      return iterations;\n      */\n      // indexed:\n      var iterator = this.__iterator(ITERATE_VALUES, reverse);\n      var step;\n      var iterations = 0;\n      while (!(step = iterator.next()).done) {\n        if (fn(step.value, iterations++, this) === false) {\n          break;\n        }\n      }\n      return iterations;\n    };\n    zipSequence.__iteratorUncached = function(type, reverse) {\n      var iterators = iters.map(function(i )\n        {return (i = Iterable(i), getIterator(reverse ? i.reverse() : i))}\n      );\n      var iterations = 0;\n      var isDone = false;\n      return new Iterator(function()  {\n        var steps;\n        if (!isDone) {\n          steps = iterators.map(function(i ) {return i.next()});\n          isDone = steps.some(function(s ) {return s.done});\n        }\n        if (isDone) {\n          return iteratorDone();\n        }\n        return iteratorValue(\n          type,\n          iterations++,\n          zipper.apply(null, steps.map(function(s ) {return s.value}))\n        );\n      });\n    };\n    return zipSequence\n  }\n\n\n  // #pragma Helper Functions\n\n  function reify(iter, seq) {\n    return isSeq(iter) ? seq : iter.constructor(seq);\n  }\n\n  function validateEntry(entry) {\n    if (entry !== Object(entry)) {\n      throw new TypeError('Expected [K, V] tuple: ' + entry);\n    }\n  }\n\n  function resolveSize(iter) {\n    assertNotInfinite(iter.size);\n    return ensureSize(iter);\n  }\n\n  function iterableClass(iterable) {\n    return isKeyed(iterable) ? KeyedIterable :\n      isIndexed(iterable) ? IndexedIterable :\n      SetIterable;\n  }\n\n  function makeSequence(iterable) {\n    return Object.create(\n      (\n        isKeyed(iterable) ? KeyedSeq :\n        isIndexed(iterable) ? IndexedSeq :\n        SetSeq\n      ).prototype\n    );\n  }\n\n  function cacheResultThrough() {\n    if (this._iter.cacheResult) {\n      this._iter.cacheResult();\n      this.size = this._iter.size;\n      return this;\n    } else {\n      return Seq.prototype.cacheResult.call(this);\n    }\n  }\n\n  function defaultComparator(a, b) {\n    return a > b ? 1 : a < b ? -1 : 0;\n  }\n\n  function forceIterator(keyPath) {\n    var iter = getIterator(keyPath);\n    if (!iter) {\n      // Array might not be iterable in this environment, so we need a fallback\n      // to our wrapped type.\n      if (!isArrayLike(keyPath)) {\n        throw new TypeError('Expected iterable or array-like: ' + keyPath);\n      }\n      iter = getIterator(Iterable(keyPath));\n    }\n    return iter;\n  }\n\n  createClass(Record, KeyedCollection);\n\n    function Record(defaultValues, name) {\n      var hasInitialized;\n\n      var RecordType = function Record(values) {\n        if (values instanceof RecordType) {\n          return values;\n        }\n        if (!(this instanceof RecordType)) {\n          return new RecordType(values);\n        }\n        if (!hasInitialized) {\n          hasInitialized = true;\n          var keys = Object.keys(defaultValues);\n          setProps(RecordTypePrototype, keys);\n          RecordTypePrototype.size = keys.length;\n          RecordTypePrototype._name = name;\n          RecordTypePrototype._keys = keys;\n          RecordTypePrototype._defaultValues = defaultValues;\n        }\n        this._map = Map(values);\n      };\n\n      var RecordTypePrototype = RecordType.prototype = Object.create(RecordPrototype);\n      RecordTypePrototype.constructor = RecordType;\n\n      return RecordType;\n    }\n\n    Record.prototype.toString = function() {\n      return this.__toString(recordName(this) + ' {', '}');\n    };\n\n    // @pragma Access\n\n    Record.prototype.has = function(k) {\n      return this._defaultValues.hasOwnProperty(k);\n    };\n\n    Record.prototype.get = function(k, notSetValue) {\n      if (!this.has(k)) {\n        return notSetValue;\n      }\n      var defaultVal = this._defaultValues[k];\n      return this._map ? this._map.get(k, defaultVal) : defaultVal;\n    };\n\n    // @pragma Modification\n\n    Record.prototype.clear = function() {\n      if (this.__ownerID) {\n        this._map && this._map.clear();\n        return this;\n      }\n      var RecordType = this.constructor;\n      return RecordType._empty || (RecordType._empty = makeRecord(this, emptyMap()));\n    };\n\n    Record.prototype.set = function(k, v) {\n      if (!this.has(k)) {\n        throw new Error('Cannot set unknown key \"' + k + '\" on ' + recordName(this));\n      }\n      if (this._map && !this._map.has(k)) {\n        var defaultVal = this._defaultValues[k];\n        if (v === defaultVal) {\n          return this;\n        }\n      }\n      var newMap = this._map && this._map.set(k, v);\n      if (this.__ownerID || newMap === this._map) {\n        return this;\n      }\n      return makeRecord(this, newMap);\n    };\n\n    Record.prototype.remove = function(k) {\n      if (!this.has(k)) {\n        return this;\n      }\n      var newMap = this._map && this._map.remove(k);\n      if (this.__ownerID || newMap === this._map) {\n        return this;\n      }\n      return makeRecord(this, newMap);\n    };\n\n    Record.prototype.wasAltered = function() {\n      return this._map.wasAltered();\n    };\n\n    Record.prototype.__iterator = function(type, reverse) {var this$0 = this;\n      return KeyedIterable(this._defaultValues).map(function(_, k)  {return this$0.get(k)}).__iterator(type, reverse);\n    };\n\n    Record.prototype.__iterate = function(fn, reverse) {var this$0 = this;\n      return KeyedIterable(this._defaultValues).map(function(_, k)  {return this$0.get(k)}).__iterate(fn, reverse);\n    };\n\n    Record.prototype.__ensureOwner = function(ownerID) {\n      if (ownerID === this.__ownerID) {\n        return this;\n      }\n      var newMap = this._map && this._map.__ensureOwner(ownerID);\n      if (!ownerID) {\n        this.__ownerID = ownerID;\n        this._map = newMap;\n        return this;\n      }\n      return makeRecord(this, newMap, ownerID);\n    };\n\n\n  var RecordPrototype = Record.prototype;\n  RecordPrototype[DELETE] = RecordPrototype.remove;\n  RecordPrototype.deleteIn =\n  RecordPrototype.removeIn = MapPrototype.removeIn;\n  RecordPrototype.merge = MapPrototype.merge;\n  RecordPrototype.mergeWith = MapPrototype.mergeWith;\n  RecordPrototype.mergeIn = MapPrototype.mergeIn;\n  RecordPrototype.mergeDeep = MapPrototype.mergeDeep;\n  RecordPrototype.mergeDeepWith = MapPrototype.mergeDeepWith;\n  RecordPrototype.mergeDeepIn = MapPrototype.mergeDeepIn;\n  RecordPrototype.setIn = MapPrototype.setIn;\n  RecordPrototype.update = MapPrototype.update;\n  RecordPrototype.updateIn = MapPrototype.updateIn;\n  RecordPrototype.withMutations = MapPrototype.withMutations;\n  RecordPrototype.asMutable = MapPrototype.asMutable;\n  RecordPrototype.asImmutable = MapPrototype.asImmutable;\n\n\n  function makeRecord(likeRecord, map, ownerID) {\n    var record = Object.create(Object.getPrototypeOf(likeRecord));\n    record._map = map;\n    record.__ownerID = ownerID;\n    return record;\n  }\n\n  function recordName(record) {\n    return record._name || record.constructor.name || 'Record';\n  }\n\n  function setProps(prototype, names) {\n    try {\n      names.forEach(setProp.bind(undefined, prototype));\n    } catch (error) {\n      // Object.defineProperty failed. Probably IE8.\n    }\n  }\n\n  function setProp(prototype, name) {\n    Object.defineProperty(prototype, name, {\n      get: function() {\n        return this.get(name);\n      },\n      set: function(value) {\n        invariant(this.__ownerID, 'Cannot set on an immutable record.');\n        this.set(name, value);\n      }\n    });\n  }\n\n  createClass(Set, SetCollection);\n\n    // @pragma Construction\n\n    function Set(value) {\n      return value === null || value === undefined ? emptySet() :\n        isSet(value) && !isOrdered(value) ? value :\n        emptySet().withMutations(function(set ) {\n          var iter = SetIterable(value);\n          assertNotInfinite(iter.size);\n          iter.forEach(function(v ) {return set.add(v)});\n        });\n    }\n\n    Set.of = function(/*...values*/) {\n      return this(arguments);\n    };\n\n    Set.fromKeys = function(value) {\n      return this(KeyedIterable(value).keySeq());\n    };\n\n    Set.prototype.toString = function() {\n      return this.__toString('Set {', '}');\n    };\n\n    // @pragma Access\n\n    Set.prototype.has = function(value) {\n      return this._map.has(value);\n    };\n\n    // @pragma Modification\n\n    Set.prototype.add = function(value) {\n      return updateSet(this, this._map.set(value, true));\n    };\n\n    Set.prototype.remove = function(value) {\n      return updateSet(this, this._map.remove(value));\n    };\n\n    Set.prototype.clear = function() {\n      return updateSet(this, this._map.clear());\n    };\n\n    // @pragma Composition\n\n    Set.prototype.union = function() {var iters = SLICE$0.call(arguments, 0);\n      iters = iters.filter(function(x ) {return x.size !== 0});\n      if (iters.length === 0) {\n        return this;\n      }\n      if (this.size === 0 && !this.__ownerID && iters.length === 1) {\n        return this.constructor(iters[0]);\n      }\n      return this.withMutations(function(set ) {\n        for (var ii = 0; ii < iters.length; ii++) {\n          SetIterable(iters[ii]).forEach(function(value ) {return set.add(value)});\n        }\n      });\n    };\n\n    Set.prototype.intersect = function() {var iters = SLICE$0.call(arguments, 0);\n      if (iters.length === 0) {\n        return this;\n      }\n      iters = iters.map(function(iter ) {return SetIterable(iter)});\n      var originalSet = this;\n      return this.withMutations(function(set ) {\n        originalSet.forEach(function(value ) {\n          if (!iters.every(function(iter ) {return iter.includes(value)})) {\n            set.remove(value);\n          }\n        });\n      });\n    };\n\n    Set.prototype.subtract = function() {var iters = SLICE$0.call(arguments, 0);\n      if (iters.length === 0) {\n        return this;\n      }\n      iters = iters.map(function(iter ) {return SetIterable(iter)});\n      var originalSet = this;\n      return this.withMutations(function(set ) {\n        originalSet.forEach(function(value ) {\n          if (iters.some(function(iter ) {return iter.includes(value)})) {\n            set.remove(value);\n          }\n        });\n      });\n    };\n\n    Set.prototype.merge = function() {\n      return this.union.apply(this, arguments);\n    };\n\n    Set.prototype.mergeWith = function(merger) {var iters = SLICE$0.call(arguments, 1);\n      return this.union.apply(this, iters);\n    };\n\n    Set.prototype.sort = function(comparator) {\n      // Late binding\n      return OrderedSet(sortFactory(this, comparator));\n    };\n\n    Set.prototype.sortBy = function(mapper, comparator) {\n      // Late binding\n      return OrderedSet(sortFactory(this, comparator, mapper));\n    };\n\n    Set.prototype.wasAltered = function() {\n      return this._map.wasAltered();\n    };\n\n    Set.prototype.__iterate = function(fn, reverse) {var this$0 = this;\n      return this._map.__iterate(function(_, k)  {return fn(k, k, this$0)}, reverse);\n    };\n\n    Set.prototype.__iterator = function(type, reverse) {\n      return this._map.map(function(_, k)  {return k}).__iterator(type, reverse);\n    };\n\n    Set.prototype.__ensureOwner = function(ownerID) {\n      if (ownerID === this.__ownerID) {\n        return this;\n      }\n      var newMap = this._map.__ensureOwner(ownerID);\n      if (!ownerID) {\n        this.__ownerID = ownerID;\n        this._map = newMap;\n        return this;\n      }\n      return this.__make(newMap, ownerID);\n    };\n\n\n  function isSet(maybeSet) {\n    return !!(maybeSet && maybeSet[IS_SET_SENTINEL]);\n  }\n\n  Set.isSet = isSet;\n\n  var IS_SET_SENTINEL = '@@__IMMUTABLE_SET__@@';\n\n  var SetPrototype = Set.prototype;\n  SetPrototype[IS_SET_SENTINEL] = true;\n  SetPrototype[DELETE] = SetPrototype.remove;\n  SetPrototype.mergeDeep = SetPrototype.merge;\n  SetPrototype.mergeDeepWith = SetPrototype.mergeWith;\n  SetPrototype.withMutations = MapPrototype.withMutations;\n  SetPrototype.asMutable = MapPrototype.asMutable;\n  SetPrototype.asImmutable = MapPrototype.asImmutable;\n\n  SetPrototype.__empty = emptySet;\n  SetPrototype.__make = makeSet;\n\n  function updateSet(set, newMap) {\n    if (set.__ownerID) {\n      set.size = newMap.size;\n      set._map = newMap;\n      return set;\n    }\n    return newMap === set._map ? set :\n      newMap.size === 0 ? set.__empty() :\n      set.__make(newMap);\n  }\n\n  function makeSet(map, ownerID) {\n    var set = Object.create(SetPrototype);\n    set.size = map ? map.size : 0;\n    set._map = map;\n    set.__ownerID = ownerID;\n    return set;\n  }\n\n  var EMPTY_SET;\n  function emptySet() {\n    return EMPTY_SET || (EMPTY_SET = makeSet(emptyMap()));\n  }\n\n  createClass(OrderedSet, Set);\n\n    // @pragma Construction\n\n    function OrderedSet(value) {\n      return value === null || value === undefined ? emptyOrderedSet() :\n        isOrderedSet(value) ? value :\n        emptyOrderedSet().withMutations(function(set ) {\n          var iter = SetIterable(value);\n          assertNotInfinite(iter.size);\n          iter.forEach(function(v ) {return set.add(v)});\n        });\n    }\n\n    OrderedSet.of = function(/*...values*/) {\n      return this(arguments);\n    };\n\n    OrderedSet.fromKeys = function(value) {\n      return this(KeyedIterable(value).keySeq());\n    };\n\n    OrderedSet.prototype.toString = function() {\n      return this.__toString('OrderedSet {', '}');\n    };\n\n\n  function isOrderedSet(maybeOrderedSet) {\n    return isSet(maybeOrderedSet) && isOrdered(maybeOrderedSet);\n  }\n\n  OrderedSet.isOrderedSet = isOrderedSet;\n\n  var OrderedSetPrototype = OrderedSet.prototype;\n  OrderedSetPrototype[IS_ORDERED_SENTINEL] = true;\n\n  OrderedSetPrototype.__empty = emptyOrderedSet;\n  OrderedSetPrototype.__make = makeOrderedSet;\n\n  function makeOrderedSet(map, ownerID) {\n    var set = Object.create(OrderedSetPrototype);\n    set.size = map ? map.size : 0;\n    set._map = map;\n    set.__ownerID = ownerID;\n    return set;\n  }\n\n  var EMPTY_ORDERED_SET;\n  function emptyOrderedSet() {\n    return EMPTY_ORDERED_SET || (EMPTY_ORDERED_SET = makeOrderedSet(emptyOrderedMap()));\n  }\n\n  createClass(Stack, IndexedCollection);\n\n    // @pragma Construction\n\n    function Stack(value) {\n      return value === null || value === undefined ? emptyStack() :\n        isStack(value) ? value :\n        emptyStack().unshiftAll(value);\n    }\n\n    Stack.of = function(/*...values*/) {\n      return this(arguments);\n    };\n\n    Stack.prototype.toString = function() {\n      return this.__toString('Stack [', ']');\n    };\n\n    // @pragma Access\n\n    Stack.prototype.get = function(index, notSetValue) {\n      var head = this._head;\n      index = wrapIndex(this, index);\n      while (head && index--) {\n        head = head.next;\n      }\n      return head ? head.value : notSetValue;\n    };\n\n    Stack.prototype.peek = function() {\n      return this._head && this._head.value;\n    };\n\n    // @pragma Modification\n\n    Stack.prototype.push = function(/*...values*/) {\n      if (arguments.length === 0) {\n        return this;\n      }\n      var newSize = this.size + arguments.length;\n      var head = this._head;\n      for (var ii = arguments.length - 1; ii >= 0; ii--) {\n        head = {\n          value: arguments[ii],\n          next: head\n        };\n      }\n      if (this.__ownerID) {\n        this.size = newSize;\n        this._head = head;\n        this.__hash = undefined;\n        this.__altered = true;\n        return this;\n      }\n      return makeStack(newSize, head);\n    };\n\n    Stack.prototype.pushAll = function(iter) {\n      iter = IndexedIterable(iter);\n      if (iter.size === 0) {\n        return this;\n      }\n      assertNotInfinite(iter.size);\n      var newSize = this.size;\n      var head = this._head;\n      iter.reverse().forEach(function(value ) {\n        newSize++;\n        head = {\n          value: value,\n          next: head\n        };\n      });\n      if (this.__ownerID) {\n        this.size = newSize;\n        this._head = head;\n        this.__hash = undefined;\n        this.__altered = true;\n        return this;\n      }\n      return makeStack(newSize, head);\n    };\n\n    Stack.prototype.pop = function() {\n      return this.slice(1);\n    };\n\n    Stack.prototype.unshift = function(/*...values*/) {\n      return this.push.apply(this, arguments);\n    };\n\n    Stack.prototype.unshiftAll = function(iter) {\n      return this.pushAll(iter);\n    };\n\n    Stack.prototype.shift = function() {\n      return this.pop.apply(this, arguments);\n    };\n\n    Stack.prototype.clear = function() {\n      if (this.size === 0) {\n        return this;\n      }\n      if (this.__ownerID) {\n        this.size = 0;\n        this._head = undefined;\n        this.__hash = undefined;\n        this.__altered = true;\n        return this;\n      }\n      return emptyStack();\n    };\n\n    Stack.prototype.slice = function(begin, end) {\n      if (wholeSlice(begin, end, this.size)) {\n        return this;\n      }\n      var resolvedBegin = resolveBegin(begin, this.size);\n      var resolvedEnd = resolveEnd(end, this.size);\n      if (resolvedEnd !== this.size) {\n        // super.slice(begin, end);\n        return IndexedCollection.prototype.slice.call(this, begin, end);\n      }\n      var newSize = this.size - resolvedBegin;\n      var head = this._head;\n      while (resolvedBegin--) {\n        head = head.next;\n      }\n      if (this.__ownerID) {\n        this.size = newSize;\n        this._head = head;\n        this.__hash = undefined;\n        this.__altered = true;\n        return this;\n      }\n      return makeStack(newSize, head);\n    };\n\n    // @pragma Mutability\n\n    Stack.prototype.__ensureOwner = function(ownerID) {\n      if (ownerID === this.__ownerID) {\n        return this;\n      }\n      if (!ownerID) {\n        this.__ownerID = ownerID;\n        this.__altered = false;\n        return this;\n      }\n      return makeStack(this.size, this._head, ownerID, this.__hash);\n    };\n\n    // @pragma Iteration\n\n    Stack.prototype.__iterate = function(fn, reverse) {\n      if (reverse) {\n        return this.reverse().__iterate(fn);\n      }\n      var iterations = 0;\n      var node = this._head;\n      while (node) {\n        if (fn(node.value, iterations++, this) === false) {\n          break;\n        }\n        node = node.next;\n      }\n      return iterations;\n    };\n\n    Stack.prototype.__iterator = function(type, reverse) {\n      if (reverse) {\n        return this.reverse().__iterator(type);\n      }\n      var iterations = 0;\n      var node = this._head;\n      return new Iterator(function()  {\n        if (node) {\n          var value = node.value;\n          node = node.next;\n          return iteratorValue(type, iterations++, value);\n        }\n        return iteratorDone();\n      });\n    };\n\n\n  function isStack(maybeStack) {\n    return !!(maybeStack && maybeStack[IS_STACK_SENTINEL]);\n  }\n\n  Stack.isStack = isStack;\n\n  var IS_STACK_SENTINEL = '@@__IMMUTABLE_STACK__@@';\n\n  var StackPrototype = Stack.prototype;\n  StackPrototype[IS_STACK_SENTINEL] = true;\n  StackPrototype.withMutations = MapPrototype.withMutations;\n  StackPrototype.asMutable = MapPrototype.asMutable;\n  StackPrototype.asImmutable = MapPrototype.asImmutable;\n  StackPrototype.wasAltered = MapPrototype.wasAltered;\n\n\n  function makeStack(size, head, ownerID, hash) {\n    var map = Object.create(StackPrototype);\n    map.size = size;\n    map._head = head;\n    map.__ownerID = ownerID;\n    map.__hash = hash;\n    map.__altered = false;\n    return map;\n  }\n\n  var EMPTY_STACK;\n  function emptyStack() {\n    return EMPTY_STACK || (EMPTY_STACK = makeStack(0));\n  }\n\n  /**\n   * Contributes additional methods to a constructor\n   */\n  function mixin(ctor, methods) {\n    var keyCopier = function(key ) { ctor.prototype[key] = methods[key]; };\n    Object.keys(methods).forEach(keyCopier);\n    Object.getOwnPropertySymbols &&\n      Object.getOwnPropertySymbols(methods).forEach(keyCopier);\n    return ctor;\n  }\n\n  Iterable.Iterator = Iterator;\n\n  mixin(Iterable, {\n\n    // ### Conversion to other types\n\n    toArray: function() {\n      assertNotInfinite(this.size);\n      var array = new Array(this.size || 0);\n      this.valueSeq().__iterate(function(v, i)  { array[i] = v; });\n      return array;\n    },\n\n    toIndexedSeq: function() {\n      return new ToIndexedSequence(this);\n    },\n\n    toJS: function() {\n      return this.toSeq().map(\n        function(value ) {return value && typeof value.toJS === 'function' ? value.toJS() : value}\n      ).__toJS();\n    },\n\n    toJSON: function() {\n      return this.toSeq().map(\n        function(value ) {return value && typeof value.toJSON === 'function' ? value.toJSON() : value}\n      ).__toJS();\n    },\n\n    toKeyedSeq: function() {\n      return new ToKeyedSequence(this, true);\n    },\n\n    toMap: function() {\n      // Use Late Binding here to solve the circular dependency.\n      return Map(this.toKeyedSeq());\n    },\n\n    toObject: function() {\n      assertNotInfinite(this.size);\n      var object = {};\n      this.__iterate(function(v, k)  { object[k] = v; });\n      return object;\n    },\n\n    toOrderedMap: function() {\n      // Use Late Binding here to solve the circular dependency.\n      return OrderedMap(this.toKeyedSeq());\n    },\n\n    toOrderedSet: function() {\n      // Use Late Binding here to solve the circular dependency.\n      return OrderedSet(isKeyed(this) ? this.valueSeq() : this);\n    },\n\n    toSet: function() {\n      // Use Late Binding here to solve the circular dependency.\n      return Set(isKeyed(this) ? this.valueSeq() : this);\n    },\n\n    toSetSeq: function() {\n      return new ToSetSequence(this);\n    },\n\n    toSeq: function() {\n      return isIndexed(this) ? this.toIndexedSeq() :\n        isKeyed(this) ? this.toKeyedSeq() :\n        this.toSetSeq();\n    },\n\n    toStack: function() {\n      // Use Late Binding here to solve the circular dependency.\n      return Stack(isKeyed(this) ? this.valueSeq() : this);\n    },\n\n    toList: function() {\n      // Use Late Binding here to solve the circular dependency.\n      return List(isKeyed(this) ? this.valueSeq() : this);\n    },\n\n\n    // ### Common JavaScript methods and properties\n\n    toString: function() {\n      return '[Iterable]';\n    },\n\n    __toString: function(head, tail) {\n      if (this.size === 0) {\n        return head + tail;\n      }\n      return head + ' ' + this.toSeq().map(this.__toStringMapper).join(', ') + ' ' + tail;\n    },\n\n\n    // ### ES6 Collection methods (ES6 Array and Map)\n\n    concat: function() {var values = SLICE$0.call(arguments, 0);\n      return reify(this, concatFactory(this, values));\n    },\n\n    includes: function(searchValue) {\n      return this.some(function(value ) {return is(value, searchValue)});\n    },\n\n    entries: function() {\n      return this.__iterator(ITERATE_ENTRIES);\n    },\n\n    every: function(predicate, context) {\n      assertNotInfinite(this.size);\n      var returnValue = true;\n      this.__iterate(function(v, k, c)  {\n        if (!predicate.call(context, v, k, c)) {\n          returnValue = false;\n          return false;\n        }\n      });\n      return returnValue;\n    },\n\n    filter: function(predicate, context) {\n      return reify(this, filterFactory(this, predicate, context, true));\n    },\n\n    find: function(predicate, context, notSetValue) {\n      var entry = this.findEntry(predicate, context);\n      return entry ? entry[1] : notSetValue;\n    },\n\n    forEach: function(sideEffect, context) {\n      assertNotInfinite(this.size);\n      return this.__iterate(context ? sideEffect.bind(context) : sideEffect);\n    },\n\n    join: function(separator) {\n      assertNotInfinite(this.size);\n      separator = separator !== undefined ? '' + separator : ',';\n      var joined = '';\n      var isFirst = true;\n      this.__iterate(function(v ) {\n        isFirst ? (isFirst = false) : (joined += separator);\n        joined += v !== null && v !== undefined ? v.toString() : '';\n      });\n      return joined;\n    },\n\n    keys: function() {\n      return this.__iterator(ITERATE_KEYS);\n    },\n\n    map: function(mapper, context) {\n      return reify(this, mapFactory(this, mapper, context));\n    },\n\n    reduce: function(reducer, initialReduction, context) {\n      assertNotInfinite(this.size);\n      var reduction;\n      var useFirst;\n      if (arguments.length < 2) {\n        useFirst = true;\n      } else {\n        reduction = initialReduction;\n      }\n      this.__iterate(function(v, k, c)  {\n        if (useFirst) {\n          useFirst = false;\n          reduction = v;\n        } else {\n          reduction = reducer.call(context, reduction, v, k, c);\n        }\n      });\n      return reduction;\n    },\n\n    reduceRight: function(reducer, initialReduction, context) {\n      var reversed = this.toKeyedSeq().reverse();\n      return reversed.reduce.apply(reversed, arguments);\n    },\n\n    reverse: function() {\n      return reify(this, reverseFactory(this, true));\n    },\n\n    slice: function(begin, end) {\n      return reify(this, sliceFactory(this, begin, end, true));\n    },\n\n    some: function(predicate, context) {\n      return !this.every(not(predicate), context);\n    },\n\n    sort: function(comparator) {\n      return reify(this, sortFactory(this, comparator));\n    },\n\n    values: function() {\n      return this.__iterator(ITERATE_VALUES);\n    },\n\n\n    // ### More sequential methods\n\n    butLast: function() {\n      return this.slice(0, -1);\n    },\n\n    isEmpty: function() {\n      return this.size !== undefined ? this.size === 0 : !this.some(function()  {return true});\n    },\n\n    count: function(predicate, context) {\n      return ensureSize(\n        predicate ? this.toSeq().filter(predicate, context) : this\n      );\n    },\n\n    countBy: function(grouper, context) {\n      return countByFactory(this, grouper, context);\n    },\n\n    equals: function(other) {\n      return deepEqual(this, other);\n    },\n\n    entrySeq: function() {\n      var iterable = this;\n      if (iterable._cache) {\n        // We cache as an entries array, so we can just return the cache!\n        return new ArraySeq(iterable._cache);\n      }\n      var entriesSequence = iterable.toSeq().map(entryMapper).toIndexedSeq();\n      entriesSequence.fromEntrySeq = function()  {return iterable.toSeq()};\n      return entriesSequence;\n    },\n\n    filterNot: function(predicate, context) {\n      return this.filter(not(predicate), context);\n    },\n\n    findEntry: function(predicate, context, notSetValue) {\n      var found = notSetValue;\n      this.__iterate(function(v, k, c)  {\n        if (predicate.call(context, v, k, c)) {\n          found = [k, v];\n          return false;\n        }\n      });\n      return found;\n    },\n\n    findKey: function(predicate, context) {\n      var entry = this.findEntry(predicate, context);\n      return entry && entry[0];\n    },\n\n    findLast: function(predicate, context, notSetValue) {\n      return this.toKeyedSeq().reverse().find(predicate, context, notSetValue);\n    },\n\n    findLastEntry: function(predicate, context, notSetValue) {\n      return this.toKeyedSeq().reverse().findEntry(predicate, context, notSetValue);\n    },\n\n    findLastKey: function(predicate, context) {\n      return this.toKeyedSeq().reverse().findKey(predicate, context);\n    },\n\n    first: function() {\n      return this.find(returnTrue);\n    },\n\n    flatMap: function(mapper, context) {\n      return reify(this, flatMapFactory(this, mapper, context));\n    },\n\n    flatten: function(depth) {\n      return reify(this, flattenFactory(this, depth, true));\n    },\n\n    fromEntrySeq: function() {\n      return new FromEntriesSequence(this);\n    },\n\n    get: function(searchKey, notSetValue) {\n      return this.find(function(_, key)  {return is(key, searchKey)}, undefined, notSetValue);\n    },\n\n    getIn: function(searchKeyPath, notSetValue) {\n      var nested = this;\n      // Note: in an ES6 environment, we would prefer:\n      // for (var key of searchKeyPath) {\n      var iter = forceIterator(searchKeyPath);\n      var step;\n      while (!(step = iter.next()).done) {\n        var key = step.value;\n        nested = nested && nested.get ? nested.get(key, NOT_SET) : NOT_SET;\n        if (nested === NOT_SET) {\n          return notSetValue;\n        }\n      }\n      return nested;\n    },\n\n    groupBy: function(grouper, context) {\n      return groupByFactory(this, grouper, context);\n    },\n\n    has: function(searchKey) {\n      return this.get(searchKey, NOT_SET) !== NOT_SET;\n    },\n\n    hasIn: function(searchKeyPath) {\n      return this.getIn(searchKeyPath, NOT_SET) !== NOT_SET;\n    },\n\n    isSubset: function(iter) {\n      iter = typeof iter.includes === 'function' ? iter : Iterable(iter);\n      return this.every(function(value ) {return iter.includes(value)});\n    },\n\n    isSuperset: function(iter) {\n      iter = typeof iter.isSubset === 'function' ? iter : Iterable(iter);\n      return iter.isSubset(this);\n    },\n\n    keyOf: function(searchValue) {\n      return this.findKey(function(value ) {return is(value, searchValue)});\n    },\n\n    keySeq: function() {\n      return this.toSeq().map(keyMapper).toIndexedSeq();\n    },\n\n    last: function() {\n      return this.toSeq().reverse().first();\n    },\n\n    lastKeyOf: function(searchValue) {\n      return this.toKeyedSeq().reverse().keyOf(searchValue);\n    },\n\n    max: function(comparator) {\n      return maxFactory(this, comparator);\n    },\n\n    maxBy: function(mapper, comparator) {\n      return maxFactory(this, comparator, mapper);\n    },\n\n    min: function(comparator) {\n      return maxFactory(this, comparator ? neg(comparator) : defaultNegComparator);\n    },\n\n    minBy: function(mapper, comparator) {\n      return maxFactory(this, comparator ? neg(comparator) : defaultNegComparator, mapper);\n    },\n\n    rest: function() {\n      return this.slice(1);\n    },\n\n    skip: function(amount) {\n      return this.slice(Math.max(0, amount));\n    },\n\n    skipLast: function(amount) {\n      return reify(this, this.toSeq().reverse().skip(amount).reverse());\n    },\n\n    skipWhile: function(predicate, context) {\n      return reify(this, skipWhileFactory(this, predicate, context, true));\n    },\n\n    skipUntil: function(predicate, context) {\n      return this.skipWhile(not(predicate), context);\n    },\n\n    sortBy: function(mapper, comparator) {\n      return reify(this, sortFactory(this, comparator, mapper));\n    },\n\n    take: function(amount) {\n      return this.slice(0, Math.max(0, amount));\n    },\n\n    takeLast: function(amount) {\n      return reify(this, this.toSeq().reverse().take(amount).reverse());\n    },\n\n    takeWhile: function(predicate, context) {\n      return reify(this, takeWhileFactory(this, predicate, context));\n    },\n\n    takeUntil: function(predicate, context) {\n      return this.takeWhile(not(predicate), context);\n    },\n\n    valueSeq: function() {\n      return this.toIndexedSeq();\n    },\n\n\n    // ### Hashable Object\n\n    hashCode: function() {\n      return this.__hash || (this.__hash = hashIterable(this));\n    }\n\n\n    // ### Internal\n\n    // abstract __iterate(fn, reverse)\n\n    // abstract __iterator(type, reverse)\n  });\n\n  // var IS_ITERABLE_SENTINEL = '@@__IMMUTABLE_ITERABLE__@@';\n  // var IS_KEYED_SENTINEL = '@@__IMMUTABLE_KEYED__@@';\n  // var IS_INDEXED_SENTINEL = '@@__IMMUTABLE_INDEXED__@@';\n  // var IS_ORDERED_SENTINEL = '@@__IMMUTABLE_ORDERED__@@';\n\n  var IterablePrototype = Iterable.prototype;\n  IterablePrototype[IS_ITERABLE_SENTINEL] = true;\n  IterablePrototype[ITERATOR_SYMBOL] = IterablePrototype.values;\n  IterablePrototype.__toJS = IterablePrototype.toArray;\n  IterablePrototype.__toStringMapper = quoteString;\n  IterablePrototype.inspect =\n  IterablePrototype.toSource = function() { return this.toString(); };\n  IterablePrototype.chain = IterablePrototype.flatMap;\n  IterablePrototype.contains = IterablePrototype.includes;\n\n  mixin(KeyedIterable, {\n\n    // ### More sequential methods\n\n    flip: function() {\n      return reify(this, flipFactory(this));\n    },\n\n    mapEntries: function(mapper, context) {var this$0 = this;\n      var iterations = 0;\n      return reify(this,\n        this.toSeq().map(\n          function(v, k)  {return mapper.call(context, [k, v], iterations++, this$0)}\n        ).fromEntrySeq()\n      );\n    },\n\n    mapKeys: function(mapper, context) {var this$0 = this;\n      return reify(this,\n        this.toSeq().flip().map(\n          function(k, v)  {return mapper.call(context, k, v, this$0)}\n        ).flip()\n      );\n    }\n\n  });\n\n  var KeyedIterablePrototype = KeyedIterable.prototype;\n  KeyedIterablePrototype[IS_KEYED_SENTINEL] = true;\n  KeyedIterablePrototype[ITERATOR_SYMBOL] = IterablePrototype.entries;\n  KeyedIterablePrototype.__toJS = IterablePrototype.toObject;\n  KeyedIterablePrototype.__toStringMapper = function(v, k)  {return JSON.stringify(k) + ': ' + quoteString(v)};\n\n\n\n  mixin(IndexedIterable, {\n\n    // ### Conversion to other types\n\n    toKeyedSeq: function() {\n      return new ToKeyedSequence(this, false);\n    },\n\n\n    // ### ES6 Collection methods (ES6 Array and Map)\n\n    filter: function(predicate, context) {\n      return reify(this, filterFactory(this, predicate, context, false));\n    },\n\n    findIndex: function(predicate, context) {\n      var entry = this.findEntry(predicate, context);\n      return entry ? entry[0] : -1;\n    },\n\n    indexOf: function(searchValue) {\n      var key = this.keyOf(searchValue);\n      return key === undefined ? -1 : key;\n    },\n\n    lastIndexOf: function(searchValue) {\n      var key = this.lastKeyOf(searchValue);\n      return key === undefined ? -1 : key;\n    },\n\n    reverse: function() {\n      return reify(this, reverseFactory(this, false));\n    },\n\n    slice: function(begin, end) {\n      return reify(this, sliceFactory(this, begin, end, false));\n    },\n\n    splice: function(index, removeNum /*, ...values*/) {\n      var numArgs = arguments.length;\n      removeNum = Math.max(removeNum | 0, 0);\n      if (numArgs === 0 || (numArgs === 2 && !removeNum)) {\n        return this;\n      }\n      // If index is negative, it should resolve relative to the size of the\n      // collection. However size may be expensive to compute if not cached, so\n      // only call count() if the number is in fact negative.\n      index = resolveBegin(index, index < 0 ? this.count() : this.size);\n      var spliced = this.slice(0, index);\n      return reify(\n        this,\n        numArgs === 1 ?\n          spliced :\n          spliced.concat(arrCopy(arguments, 2), this.slice(index + removeNum))\n      );\n    },\n\n\n    // ### More collection methods\n\n    findLastIndex: function(predicate, context) {\n      var entry = this.findLastEntry(predicate, context);\n      return entry ? entry[0] : -1;\n    },\n\n    first: function() {\n      return this.get(0);\n    },\n\n    flatten: function(depth) {\n      return reify(this, flattenFactory(this, depth, false));\n    },\n\n    get: function(index, notSetValue) {\n      index = wrapIndex(this, index);\n      return (index < 0 || (this.size === Infinity ||\n          (this.size !== undefined && index > this.size))) ?\n        notSetValue :\n        this.find(function(_, key)  {return key === index}, undefined, notSetValue);\n    },\n\n    has: function(index) {\n      index = wrapIndex(this, index);\n      return index >= 0 && (this.size !== undefined ?\n        this.size === Infinity || index < this.size :\n        this.indexOf(index) !== -1\n      );\n    },\n\n    interpose: function(separator) {\n      return reify(this, interposeFactory(this, separator));\n    },\n\n    interleave: function(/*...iterables*/) {\n      var iterables = [this].concat(arrCopy(arguments));\n      var zipped = zipWithFactory(this.toSeq(), IndexedSeq.of, iterables);\n      var interleaved = zipped.flatten(true);\n      if (zipped.size) {\n        interleaved.size = zipped.size * iterables.length;\n      }\n      return reify(this, interleaved);\n    },\n\n    keySeq: function() {\n      return Range(0, this.size);\n    },\n\n    last: function() {\n      return this.get(-1);\n    },\n\n    skipWhile: function(predicate, context) {\n      return reify(this, skipWhileFactory(this, predicate, context, false));\n    },\n\n    zip: function(/*, ...iterables */) {\n      var iterables = [this].concat(arrCopy(arguments));\n      return reify(this, zipWithFactory(this, defaultZipper, iterables));\n    },\n\n    zipWith: function(zipper/*, ...iterables */) {\n      var iterables = arrCopy(arguments);\n      iterables[0] = this;\n      return reify(this, zipWithFactory(this, zipper, iterables));\n    }\n\n  });\n\n  IndexedIterable.prototype[IS_INDEXED_SENTINEL] = true;\n  IndexedIterable.prototype[IS_ORDERED_SENTINEL] = true;\n\n\n\n  mixin(SetIterable, {\n\n    // ### ES6 Collection methods (ES6 Array and Map)\n\n    get: function(value, notSetValue) {\n      return this.has(value) ? value : notSetValue;\n    },\n\n    includes: function(value) {\n      return this.has(value);\n    },\n\n\n    // ### More sequential methods\n\n    keySeq: function() {\n      return this.valueSeq();\n    }\n\n  });\n\n  SetIterable.prototype.has = IterablePrototype.includes;\n  SetIterable.prototype.contains = SetIterable.prototype.includes;\n\n\n  // Mixin subclasses\n\n  mixin(KeyedSeq, KeyedIterable.prototype);\n  mixin(IndexedSeq, IndexedIterable.prototype);\n  mixin(SetSeq, SetIterable.prototype);\n\n  mixin(KeyedCollection, KeyedIterable.prototype);\n  mixin(IndexedCollection, IndexedIterable.prototype);\n  mixin(SetCollection, SetIterable.prototype);\n\n\n  // #pragma Helper functions\n\n  function keyMapper(v, k) {\n    return k;\n  }\n\n  function entryMapper(v, k) {\n    return [k, v];\n  }\n\n  function not(predicate) {\n    return function() {\n      return !predicate.apply(this, arguments);\n    }\n  }\n\n  function neg(predicate) {\n    return function() {\n      return -predicate.apply(this, arguments);\n    }\n  }\n\n  function quoteString(value) {\n    return typeof value === 'string' ? JSON.stringify(value) : String(value);\n  }\n\n  function defaultZipper() {\n    return arrCopy(arguments);\n  }\n\n  function defaultNegComparator(a, b) {\n    return a < b ? 1 : a > b ? -1 : 0;\n  }\n\n  function hashIterable(iterable) {\n    if (iterable.size === Infinity) {\n      return 0;\n    }\n    var ordered = isOrdered(iterable);\n    var keyed = isKeyed(iterable);\n    var h = ordered ? 1 : 0;\n    var size = iterable.__iterate(\n      keyed ?\n        ordered ?\n          function(v, k)  { h = 31 * h + hashMerge(hash(v), hash(k)) | 0; } :\n          function(v, k)  { h = h + hashMerge(hash(v), hash(k)) | 0; } :\n        ordered ?\n          function(v ) { h = 31 * h + hash(v) | 0; } :\n          function(v ) { h = h + hash(v) | 0; }\n    );\n    return murmurHashOfSize(size, h);\n  }\n\n  function murmurHashOfSize(size, h) {\n    h = imul(h, 0xCC9E2D51);\n    h = imul(h << 15 | h >>> -15, 0x1B873593);\n    h = imul(h << 13 | h >>> -13, 5);\n    h = (h + 0xE6546B64 | 0) ^ size;\n    h = imul(h ^ h >>> 16, 0x85EBCA6B);\n    h = imul(h ^ h >>> 13, 0xC2B2AE35);\n    h = smi(h ^ h >>> 16);\n    return h;\n  }\n\n  function hashMerge(a, b) {\n    return a ^ b + 0x9E3779B9 + (a << 6) + (a >> 2) | 0; // int\n  }\n\n  var Immutable = {\n\n    Iterable: Iterable,\n\n    Seq: Seq,\n    Collection: Collection,\n    Map: Map,\n    OrderedMap: OrderedMap,\n    List: List,\n    Stack: Stack,\n    Set: Set,\n    OrderedSet: OrderedSet,\n\n    Record: Record,\n    Range: Range,\n    Repeat: Repeat,\n\n    is: is,\n    fromJS: fromJS\n\n  };\n\n  return Immutable;\n\n}));\n\n\n// WEBPACK FOOTER //\n// ./~/immutable/dist/immutable.js","\"use strict\";\n\nimport fastApply from \"fast-apply\";\nimport libUrl from \"url\";\nimport urlTransform from \"./urlTransform\";\nimport merge from \"./utils/merge\";\nimport get from \"./utils/get\";\nimport fetchResolver from \"./fetchResolver\";\nimport PubSub from \"./PubSub\";\nimport createHolder from \"./createHolder\";\n\nfunction none() {}\n\nfunction extractArgs(args) {\n  let pathvars;\n  let params={};\n  let callback;\n  if (args[0] instanceof Function) {\n    callback = args[0];\n  } else if (args[1] instanceof Function) {\n    pathvars = args[0];\n    callback = args[1];\n  } else {\n    pathvars = args[0];\n    params = args[1];\n    callback = args[2] || none;\n  }\n  return [pathvars, params, callback];\n}\n\nfunction helperCrudFunction(name) {\n  return (...args)=> {\n    const [pathvars, params, cb] = extractArgs(args);\n    return [pathvars, { ...params, method: name.toUpperCase() }, cb];\n  };\n}\n\nfunction defaultMiddlewareArgsParser(dispatch, getState) {\n  return {\n    dispatch,\n    getState: ()=> getState().toJS()\n  };\n}\n\nexport const CRUD = [\"get\", \"post\", \"put\", \"delete\", \"patch\"].reduce(\n  (memo, name)=> {\n    memo[name] = helperCrudFunction(name);\n    return memo;\n  }, {});\n\n/**\n * Constructor for create action\n * @param  {String} url          endpoint's url\n * @param  {String} name         action name\n * @param  {Object} options      action configuration\n * @param  {Object} ACTIONS      map of actions\n * @param  {[type]} fetchAdapter adapter for fetching data\n * @return {Function+Object}     action function object\n */\nexport default function actionFn(url, name, options, ACTIONS={}, meta={}) {\n  const { actionFetch, actionSuccess, actionFail, actionReset } = ACTIONS;\n  const pubsub = new PubSub();\n  const requestHolder = createHolder();\n  /**\n   * Fetch data from server\n   * @param  {Object}   pathvars    path vars for url\n   * @param  {Object}   params      fetch params\n   * @param  {Function} getState    helper meta function\n  */\n  const request = (pathvars, params, getState=none)=> {\n    const responseHandler = meta && meta.holder && meta.holder.responseHandler;\n    const resultUrlT = urlTransform(url, pathvars, meta.urlOptions);\n    let urlT = resultUrlT;\n    let rootUrl = meta.holder ? meta.holder.rootUrl : null;\n    rootUrl = (rootUrl instanceof Function) ?\n      rootUrl(urlT, params, getState) :\n      rootUrl;\n    if (rootUrl) {\n      const rootUrlObject = libUrl.parse(rootUrl);\n      const urlObject = libUrl.parse(urlT);\n      if (!urlObject.host) {\n        const urlPath = (rootUrlObject.path ? rootUrlObject.path.replace(/\\/$/, \"\") : \"\") +\n          \"/\" + (urlObject.path ? urlObject.path.replace(/^\\//, \"\") : \"\");\n        urlT = `${rootUrlObject.protocol}//${rootUrlObject.host}${urlPath}`;\n      }\n    }\n    const globalOptions = !meta.holder ? {} :\n      (meta.holder.options instanceof Function) ?\n        meta.holder.options(urlT, params, getState) : (meta.holder.options);\n    const baseOptions = (options instanceof Function) ?\n      options(urlT, params, getState) :\n      options;\n    const opts = merge({}, globalOptions, baseOptions, params);\n    const response = meta.fetch(urlT, opts);\n    const result = !meta.validation ? response : response.then(\n      data=> new Promise(\n        (resolve, reject)=> meta.validation(data,\n          err=> err ? reject(err) : resolve(data))));\n    let ret = result;\n    if (responseHandler) {\n      if (result && result.then) {\n        ret = result.then(\n          (data)=> {\n            const res = responseHandler(null, data);\n            if (res === undefined) {\n              return data;\n            } else {\n              return res;\n            }\n          },\n          err=> responseHandler(err)\n        );\n      } else {\n        ret = responseHandler(result);\n      }\n    }\n    ret && ret.catch && ret.catch(none);\n    return ret;\n  };\n\n  /**\n   * Fetch data from server\n   * @param  {Object}   pathvars    path vars for url\n   * @param  {Object}   params      fetch params\n   * @param  {Function} callback)   callback execute after end request\n   */\n  function fn(...args) {\n    const [pathvars, params, callback] = extractArgs(args);\n    const syncing = params ? !!params.syncing : false;\n    params && delete params.syncing;\n    pubsub.push(callback);\n    return (...middlewareArgs)=> {\n      const middlewareParser = (meta.holder && meta.holder.middlewareParser) ||\n        defaultMiddlewareArgsParser;\n      const { dispatch, getState } = middlewareParser(...middlewareArgs);\n      const { reducerName, prefix } = meta;\n      const state = getState();\n      const isLoading = get(state, prefix, reducerName, \"loading\");\n      if (isLoading) {\n        return;\n      }\n      const requestOptions = { pathvars, params };\n      const prevData =  get(state, prefix, reducerName, \"data\");\n      dispatch({ type: actionFetch, syncing, request: requestOptions });\n      const fetchResolverOpts = {\n        dispatch,\n        getState,\n        requestOptions,\n        actions: meta.actions,\n        prefetch: meta.prefetch\n      };\n      const result = new Promise((done, fail)=> {\n        fetchResolver(0, fetchResolverOpts, (err)=> {\n          if (err) {\n            pubsub.reject(err);\n            return fail(err);\n          }\n          new Promise((resolve, reject)=> {\n            requestHolder.set({\n              resolve,\n              reject,\n              promise: request(pathvars, params, getState).then(resolve, reject)\n            });\n          }).then((d)=> {\n            requestHolder.pop();\n            const data = meta.transformer(d, prevData, {\n              type: actionSuccess, request: requestOptions\n            });\n            dispatch({\n              data,\n              origData: d,\n              type: actionSuccess,\n              syncing: false,\n              request: requestOptions\n            });\n            if (meta.broadcast) {\n              meta.broadcast.forEach((type)=> {\n                dispatch({ type, data, origData: d, request: requestOptions });\n              });\n            }\n            if (meta.postfetch) {\n              meta.postfetch.forEach((postfetch)=> {\n                (postfetch instanceof Function) && postfetch({\n                  data, getState, dispatch, actions: meta.actions, request: requestOptions\n                });\n              });\n            }\n            pubsub.resolve(data);\n            done(data);\n          }, (error)=> {\n            dispatch({ type: actionFail, syncing: false, error, request: requestOptions });\n            pubsub.reject(error);\n            fail(error);\n          });\n        });\n      });\n      result.catch(none);\n      return result;\n    };\n  }\n\n  /*\n    Pure rest request\n   */\n  fn.request = request;\n\n  /**\n   * Reset store to initial state\n   */\n  fn.reset = (mutation)=> {\n    const defer = requestHolder.pop();\n    defer && defer.reject(new Error(\"Application abort request\"));\n    return mutation === \"sync\" ? { type: actionReset, mutation } : { type: actionReset };\n  };\n\n  /**\n   * Sync store with server. In server mode works as usual method.\n   * If data have already synced, data would not fetch after call this method.\n   * @param  {Object} pathvars    path vars for url\n   * @param  {Object} params      fetch params\n   * @param  {Function} callback) callback execute after end request\n   */\n  fn.sync = (...args)=> {\n    const [pathvars, params, callback] = extractArgs(args);\n    const isServer = meta.holder ? meta.holder.server : false;\n    return (dispatch, getState)=> {\n      const state = getState();\n      const store = state[name];\n      if (!isServer && store && store.sync) {\n        callback(null, store.data);\n        return;\n      }\n      const modifyParams = { ...params, syncing: true };\n      return fn(pathvars, modifyParams, callback)(dispatch, getState);\n    };\n  };\n\n  let helpers = meta.helpers || {};\n  if (meta.crud) {\n    helpers = { ...CRUD, ...helpers };\n  }\n  const fnHelperCallback = (memo, func, helpername)=> {\n    if (memo[helpername]) {\n      throw new Error(\n        `Helper name: \"${helpername}\" for endpoint \"${name}\" has been already reserved`\n      );\n    }\n    const { sync, call } = (func instanceof Function) ? { call: func } : func;\n    memo[helpername] = (...args)=> (dispatch, getState)=> {\n      const index = args.length - 1;\n      const callbackFn = (args[index] instanceof Function) ? args[index] : none;\n      const helpersResult = fastApply(call, { getState, dispatch, actions: meta.actions }, args);\n      const result = new Promise((resolve, reject)=> {\n        const callback = (err, data)=> {\n          err ? reject(err) : resolve(data);\n          callbackFn(err, data);\n        };\n        // If helper alias using async functionality\n        if (helpersResult instanceof Function) {\n          helpersResult((error, newArgs=[])=> {\n            if (error) {\n              callback(error);\n            } else {\n              fastApply(\n                sync ? fn.sync : fn, null, newArgs.concat(callback)\n              )(dispatch, getState);\n            }\n          });\n        } else {\n          // if helper alias is synchronous\n          const [pathvars, params] = helpersResult;\n          fastApply(\n            sync ? fn.sync : fn, null, [pathvars, params, callback]\n          )(dispatch, getState);\n        }\n      });\n      result.catch(none);\n      return result;\n    };\n    return memo;\n  };\n\n  return Object.keys(helpers).reduce(\n    (memo, key)=> fnHelperCallback(memo, helpers[key], key, helpers), fn);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/actionFn.js","/**\n *\n * @param  {[type]}    dispatch [description]\n * @param  {...[type]} args     [description]\n * @return {[type]}             [description]\n * @example\n * async(dispatch,\n *   cb=> actions.test(1, cb),\n *   actions.test2\n * ).then(()=> async(dispatch, actions.test3))\n */\nexport default function async(dispatch, currentFunction = null, ...restFunctions) {\n  return new Promise(\n    (resolve, reject)=> {\n      if (!currentFunction) {\n        reject(\"no chain function\");\n      } else {\n        dispatch(currentFunction((err, data)=> {\n          err ? reject(err) : resolve(data);\n        }) || {});\n      }\n    })\n  .then((data)=> {\n    if (restFunctions.length) {\n      return async(dispatch, ...restFunctions);\n    } else {\n      return data;\n    }\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/async.js","\"use strict\";\n\n/* eslint no-case-declarations: 0 */\n/**\n * Reducer contructor\n * @param  {Object}   initialState default initial state\n * @param  {Object}   actions      actions map\n * @param  {Function} transformer  transformer function\n * @param  {Function} reducer      custom reducer function\n * @return {Function}              reducer function\n */\nexport default function reducerFn(initialState, actions={}, reducer) {\n  const { actionFetch, actionSuccess, actionFail, actionReset } = actions;\n  return (state=initialState, action)=> {\n    switch (action.type) {\n      case actionFetch:\n        return state.merge({\n          loading: true,\n          error: null,\n          syncing: !!action.syncing\n        });\n      case actionSuccess:\n        return state.mergeDeep({\n          loading: false,\n          sync: true,\n          syncing: false,\n          error: null,\n          data: action.data\n        });\n      case actionFail:\n        return state.merge({\n          loading: false,\n          error: action.error,\n          syncing: false\n        });\n      case actionReset:\n        const { mutation } = action;\n        return (mutation === \"sync\") ?\n          state.merge({ sync: false }) :\n          { ...initialState };\n      default:\n        return reducer ? reducer(state, action) : state;\n    }\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/reducerFn.js","\"use strict\";\n\nconst toString = Object.prototype.toString;\nconst OBJECT = \"[object Object]\";\n\n/**\n * Default responce transformens\n */\nexport default {\n  array(data) {\n    return !data ? [] : (Array.isArray(data) ? data : [data]);\n  },\n  object(data) {\n    if (!data) {\n      return {};\n    }\n    return toString.call(data) === OBJECT ? data : { data };\n  }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/transformers.js","module.exports = fastApply;\r\n\r\nfunction fastApply(fn, context, args) {\r\n    \r\n    switch (args ? args.length : 0) {\r\n        case 0:\r\n            return context ? fn.call(context) : fn();\r\n        case 1:\r\n            return context ? fn.call(context, args[0]) : fn(args[0]);\r\n        case 2:\r\n            return context ? fn.call(context, args[0], args[1]) : fn(args[0], args[1]);\r\n        case 3:\r\n            return context ? fn.call(context, args[0], args[1], args[2]) : fn(args[0], args[1], args[2]);\r\n        case 4:\r\n            return context ? fn.call(context, args[0], args[1], args[2], args[3]) : fn(args[0], args[1], args[2], args[3]);\r\n        case 5:\r\n            return context ? fn.call(context, args[0], args[1], args[2], args[3], args[4]) : fn(args[0], args[1], args[2], args[3], args[4]);\r\n        default:\r\n            return fn.apply(context, args);\r\n    }\r\n    \r\n}\n\n\n// WEBPACK FOOTER //\n// ./~/fast-apply/index.js","/*! https://mths.be/punycode v1.4.1 by @mathias */\n;(function(root) {\n\n\t/** Detect free variables */\n\tvar freeExports = typeof exports == 'object' && exports &&\n\t\t!exports.nodeType && exports;\n\tvar freeModule = typeof module == 'object' && module &&\n\t\t!module.nodeType && module;\n\tvar freeGlobal = typeof global == 'object' && global;\n\tif (\n\t\tfreeGlobal.global === freeGlobal ||\n\t\tfreeGlobal.window === freeGlobal ||\n\t\tfreeGlobal.self === freeGlobal\n\t) {\n\t\troot = freeGlobal;\n\t}\n\n\t/**\n\t * The `punycode` object.\n\t * @name punycode\n\t * @type Object\n\t */\n\tvar punycode,\n\n\t/** Highest positive signed 32-bit float value */\n\tmaxInt = 2147483647, // aka. 0x7FFFFFFF or 2^31-1\n\n\t/** Bootstring parameters */\n\tbase = 36,\n\ttMin = 1,\n\ttMax = 26,\n\tskew = 38,\n\tdamp = 700,\n\tinitialBias = 72,\n\tinitialN = 128, // 0x80\n\tdelimiter = '-', // '\\x2D'\n\n\t/** Regular expressions */\n\tregexPunycode = /^xn--/,\n\tregexNonASCII = /[^\\x20-\\x7E]/, // unprintable ASCII chars + non-ASCII chars\n\tregexSeparators = /[\\x2E\\u3002\\uFF0E\\uFF61]/g, // RFC 3490 separators\n\n\t/** Error messages */\n\terrors = {\n\t\t'overflow': 'Overflow: input needs wider integers to process',\n\t\t'not-basic': 'Illegal input >= 0x80 (not a basic code point)',\n\t\t'invalid-input': 'Invalid input'\n\t},\n\n\t/** Convenience shortcuts */\n\tbaseMinusTMin = base - tMin,\n\tfloor = Math.floor,\n\tstringFromCharCode = String.fromCharCode,\n\n\t/** Temporary variable */\n\tkey;\n\n\t/*--------------------------------------------------------------------------*/\n\n\t/**\n\t * A generic error utility function.\n\t * @private\n\t * @param {String} type The error type.\n\t * @returns {Error} Throws a `RangeError` with the applicable error message.\n\t */\n\tfunction error(type) {\n\t\tthrow new RangeError(errors[type]);\n\t}\n\n\t/**\n\t * A generic `Array#map` utility function.\n\t * @private\n\t * @param {Array} array The array to iterate over.\n\t * @param {Function} callback The function that gets called for every array\n\t * item.\n\t * @returns {Array} A new array of values returned by the callback function.\n\t */\n\tfunction map(array, fn) {\n\t\tvar length = array.length;\n\t\tvar result = [];\n\t\twhile (length--) {\n\t\t\tresult[length] = fn(array[length]);\n\t\t}\n\t\treturn result;\n\t}\n\n\t/**\n\t * A simple `Array#map`-like wrapper to work with domain name strings or email\n\t * addresses.\n\t * @private\n\t * @param {String} domain The domain name or email address.\n\t * @param {Function} callback The function that gets called for every\n\t * character.\n\t * @returns {Array} A new string of characters returned by the callback\n\t * function.\n\t */\n\tfunction mapDomain(string, fn) {\n\t\tvar parts = string.split('@');\n\t\tvar result = '';\n\t\tif (parts.length > 1) {\n\t\t\t// In email addresses, only the domain name should be punycoded. Leave\n\t\t\t// the local part (i.e. everything up to `@`) intact.\n\t\t\tresult = parts[0] + '@';\n\t\t\tstring = parts[1];\n\t\t}\n\t\t// Avoid `split(regex)` for IE8 compatibility. See #17.\n\t\tstring = string.replace(regexSeparators, '\\x2E');\n\t\tvar labels = string.split('.');\n\t\tvar encoded = map(labels, fn).join('.');\n\t\treturn result + encoded;\n\t}\n\n\t/**\n\t * Creates an array containing the numeric code points of each Unicode\n\t * character in the string. While JavaScript uses UCS-2 internally,\n\t * this function will convert a pair of surrogate halves (each of which\n\t * UCS-2 exposes as separate characters) into a single code point,\n\t * matching UTF-16.\n\t * @see `punycode.ucs2.encode`\n\t * @see <https://mathiasbynens.be/notes/javascript-encoding>\n\t * @memberOf punycode.ucs2\n\t * @name decode\n\t * @param {String} string The Unicode input string (UCS-2).\n\t * @returns {Array} The new array of code points.\n\t */\n\tfunction ucs2decode(string) {\n\t\tvar output = [],\n\t\t    counter = 0,\n\t\t    length = string.length,\n\t\t    value,\n\t\t    extra;\n\t\twhile (counter < length) {\n\t\t\tvalue = string.charCodeAt(counter++);\n\t\t\tif (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n\t\t\t\t// high surrogate, and there is a next character\n\t\t\t\textra = string.charCodeAt(counter++);\n\t\t\t\tif ((extra & 0xFC00) == 0xDC00) { // low surrogate\n\t\t\t\t\toutput.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n\t\t\t\t} else {\n\t\t\t\t\t// unmatched surrogate; only append this code unit, in case the next\n\t\t\t\t\t// code unit is the high surrogate of a surrogate pair\n\t\t\t\t\toutput.push(value);\n\t\t\t\t\tcounter--;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\toutput.push(value);\n\t\t\t}\n\t\t}\n\t\treturn output;\n\t}\n\n\t/**\n\t * Creates a string based on an array of numeric code points.\n\t * @see `punycode.ucs2.decode`\n\t * @memberOf punycode.ucs2\n\t * @name encode\n\t * @param {Array} codePoints The array of numeric code points.\n\t * @returns {String} The new Unicode string (UCS-2).\n\t */\n\tfunction ucs2encode(array) {\n\t\treturn map(array, function(value) {\n\t\t\tvar output = '';\n\t\t\tif (value > 0xFFFF) {\n\t\t\t\tvalue -= 0x10000;\n\t\t\t\toutput += stringFromCharCode(value >>> 10 & 0x3FF | 0xD800);\n\t\t\t\tvalue = 0xDC00 | value & 0x3FF;\n\t\t\t}\n\t\t\toutput += stringFromCharCode(value);\n\t\t\treturn output;\n\t\t}).join('');\n\t}\n\n\t/**\n\t * Converts a basic code point into a digit/integer.\n\t * @see `digitToBasic()`\n\t * @private\n\t * @param {Number} codePoint The basic numeric code point value.\n\t * @returns {Number} The numeric value of a basic code point (for use in\n\t * representing integers) in the range `0` to `base - 1`, or `base` if\n\t * the code point does not represent a value.\n\t */\n\tfunction basicToDigit(codePoint) {\n\t\tif (codePoint - 48 < 10) {\n\t\t\treturn codePoint - 22;\n\t\t}\n\t\tif (codePoint - 65 < 26) {\n\t\t\treturn codePoint - 65;\n\t\t}\n\t\tif (codePoint - 97 < 26) {\n\t\t\treturn codePoint - 97;\n\t\t}\n\t\treturn base;\n\t}\n\n\t/**\n\t * Converts a digit/integer into a basic code point.\n\t * @see `basicToDigit()`\n\t * @private\n\t * @param {Number} digit The numeric value of a basic code point.\n\t * @returns {Number} The basic code point whose value (when used for\n\t * representing integers) is `digit`, which needs to be in the range\n\t * `0` to `base - 1`. If `flag` is non-zero, the uppercase form is\n\t * used; else, the lowercase form is used. The behavior is undefined\n\t * if `flag` is non-zero and `digit` has no uppercase form.\n\t */\n\tfunction digitToBasic(digit, flag) {\n\t\t//  0..25 map to ASCII a..z or A..Z\n\t\t// 26..35 map to ASCII 0..9\n\t\treturn digit + 22 + 75 * (digit < 26) - ((flag != 0) << 5);\n\t}\n\n\t/**\n\t * Bias adaptation function as per section 3.4 of RFC 3492.\n\t * https://tools.ietf.org/html/rfc3492#section-3.4\n\t * @private\n\t */\n\tfunction adapt(delta, numPoints, firstTime) {\n\t\tvar k = 0;\n\t\tdelta = firstTime ? floor(delta / damp) : delta >> 1;\n\t\tdelta += floor(delta / numPoints);\n\t\tfor (/* no initialization */; delta > baseMinusTMin * tMax >> 1; k += base) {\n\t\t\tdelta = floor(delta / baseMinusTMin);\n\t\t}\n\t\treturn floor(k + (baseMinusTMin + 1) * delta / (delta + skew));\n\t}\n\n\t/**\n\t * Converts a Punycode string of ASCII-only symbols to a string of Unicode\n\t * symbols.\n\t * @memberOf punycode\n\t * @param {String} input The Punycode string of ASCII-only symbols.\n\t * @returns {String} The resulting string of Unicode symbols.\n\t */\n\tfunction decode(input) {\n\t\t// Don't use UCS-2\n\t\tvar output = [],\n\t\t    inputLength = input.length,\n\t\t    out,\n\t\t    i = 0,\n\t\t    n = initialN,\n\t\t    bias = initialBias,\n\t\t    basic,\n\t\t    j,\n\t\t    index,\n\t\t    oldi,\n\t\t    w,\n\t\t    k,\n\t\t    digit,\n\t\t    t,\n\t\t    /** Cached calculation results */\n\t\t    baseMinusT;\n\n\t\t// Handle the basic code points: let `basic` be the number of input code\n\t\t// points before the last delimiter, or `0` if there is none, then copy\n\t\t// the first basic code points to the output.\n\n\t\tbasic = input.lastIndexOf(delimiter);\n\t\tif (basic < 0) {\n\t\t\tbasic = 0;\n\t\t}\n\n\t\tfor (j = 0; j < basic; ++j) {\n\t\t\t// if it's not a basic code point\n\t\t\tif (input.charCodeAt(j) >= 0x80) {\n\t\t\t\terror('not-basic');\n\t\t\t}\n\t\t\toutput.push(input.charCodeAt(j));\n\t\t}\n\n\t\t// Main decoding loop: start just after the last delimiter if any basic code\n\t\t// points were copied; start at the beginning otherwise.\n\n\t\tfor (index = basic > 0 ? basic + 1 : 0; index < inputLength; /* no final expression */) {\n\n\t\t\t// `index` is the index of the next character to be consumed.\n\t\t\t// Decode a generalized variable-length integer into `delta`,\n\t\t\t// which gets added to `i`. The overflow checking is easier\n\t\t\t// if we increase `i` as we go, then subtract off its starting\n\t\t\t// value at the end to obtain `delta`.\n\t\t\tfor (oldi = i, w = 1, k = base; /* no condition */; k += base) {\n\n\t\t\t\tif (index >= inputLength) {\n\t\t\t\t\terror('invalid-input');\n\t\t\t\t}\n\n\t\t\t\tdigit = basicToDigit(input.charCodeAt(index++));\n\n\t\t\t\tif (digit >= base || digit > floor((maxInt - i) / w)) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\ti += digit * w;\n\t\t\t\tt = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\n\t\t\t\tif (digit < t) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tbaseMinusT = base - t;\n\t\t\t\tif (w > floor(maxInt / baseMinusT)) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\tw *= baseMinusT;\n\n\t\t\t}\n\n\t\t\tout = output.length + 1;\n\t\t\tbias = adapt(i - oldi, out, oldi == 0);\n\n\t\t\t// `i` was supposed to wrap around from `out` to `0`,\n\t\t\t// incrementing `n` each time, so we'll fix that now:\n\t\t\tif (floor(i / out) > maxInt - n) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\tn += floor(i / out);\n\t\t\ti %= out;\n\n\t\t\t// Insert `n` at position `i` of the output\n\t\t\toutput.splice(i++, 0, n);\n\n\t\t}\n\n\t\treturn ucs2encode(output);\n\t}\n\n\t/**\n\t * Converts a string of Unicode symbols (e.g. a domain name label) to a\n\t * Punycode string of ASCII-only symbols.\n\t * @memberOf punycode\n\t * @param {String} input The string of Unicode symbols.\n\t * @returns {String} The resulting Punycode string of ASCII-only symbols.\n\t */\n\tfunction encode(input) {\n\t\tvar n,\n\t\t    delta,\n\t\t    handledCPCount,\n\t\t    basicLength,\n\t\t    bias,\n\t\t    j,\n\t\t    m,\n\t\t    q,\n\t\t    k,\n\t\t    t,\n\t\t    currentValue,\n\t\t    output = [],\n\t\t    /** `inputLength` will hold the number of code points in `input`. */\n\t\t    inputLength,\n\t\t    /** Cached calculation results */\n\t\t    handledCPCountPlusOne,\n\t\t    baseMinusT,\n\t\t    qMinusT;\n\n\t\t// Convert the input in UCS-2 to Unicode\n\t\tinput = ucs2decode(input);\n\n\t\t// Cache the length\n\t\tinputLength = input.length;\n\n\t\t// Initialize the state\n\t\tn = initialN;\n\t\tdelta = 0;\n\t\tbias = initialBias;\n\n\t\t// Handle the basic code points\n\t\tfor (j = 0; j < inputLength; ++j) {\n\t\t\tcurrentValue = input[j];\n\t\t\tif (currentValue < 0x80) {\n\t\t\t\toutput.push(stringFromCharCode(currentValue));\n\t\t\t}\n\t\t}\n\n\t\thandledCPCount = basicLength = output.length;\n\n\t\t// `handledCPCount` is the number of code points that have been handled;\n\t\t// `basicLength` is the number of basic code points.\n\n\t\t// Finish the basic string - if it is not empty - with a delimiter\n\t\tif (basicLength) {\n\t\t\toutput.push(delimiter);\n\t\t}\n\n\t\t// Main encoding loop:\n\t\twhile (handledCPCount < inputLength) {\n\n\t\t\t// All non-basic code points < n have been handled already. Find the next\n\t\t\t// larger one:\n\t\t\tfor (m = maxInt, j = 0; j < inputLength; ++j) {\n\t\t\t\tcurrentValue = input[j];\n\t\t\t\tif (currentValue >= n && currentValue < m) {\n\t\t\t\t\tm = currentValue;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Increase `delta` enough to advance the decoder's <n,i> state to <m,0>,\n\t\t\t// but guard against overflow\n\t\t\thandledCPCountPlusOne = handledCPCount + 1;\n\t\t\tif (m - n > floor((maxInt - delta) / handledCPCountPlusOne)) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\tdelta += (m - n) * handledCPCountPlusOne;\n\t\t\tn = m;\n\n\t\t\tfor (j = 0; j < inputLength; ++j) {\n\t\t\t\tcurrentValue = input[j];\n\n\t\t\t\tif (currentValue < n && ++delta > maxInt) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\tif (currentValue == n) {\n\t\t\t\t\t// Represent delta as a generalized variable-length integer\n\t\t\t\t\tfor (q = delta, k = base; /* no condition */; k += base) {\n\t\t\t\t\t\tt = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\t\t\t\t\t\tif (q < t) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tqMinusT = q - t;\n\t\t\t\t\t\tbaseMinusT = base - t;\n\t\t\t\t\t\toutput.push(\n\t\t\t\t\t\t\tstringFromCharCode(digitToBasic(t + qMinusT % baseMinusT, 0))\n\t\t\t\t\t\t);\n\t\t\t\t\t\tq = floor(qMinusT / baseMinusT);\n\t\t\t\t\t}\n\n\t\t\t\t\toutput.push(stringFromCharCode(digitToBasic(q, 0)));\n\t\t\t\t\tbias = adapt(delta, handledCPCountPlusOne, handledCPCount == basicLength);\n\t\t\t\t\tdelta = 0;\n\t\t\t\t\t++handledCPCount;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t++delta;\n\t\t\t++n;\n\n\t\t}\n\t\treturn output.join('');\n\t}\n\n\t/**\n\t * Converts a Punycode string representing a domain name or an email address\n\t * to Unicode. Only the Punycoded parts of the input will be converted, i.e.\n\t * it doesn't matter if you call it on a string that has already been\n\t * converted to Unicode.\n\t * @memberOf punycode\n\t * @param {String} input The Punycoded domain name or email address to\n\t * convert to Unicode.\n\t * @returns {String} The Unicode representation of the given Punycode\n\t * string.\n\t */\n\tfunction toUnicode(input) {\n\t\treturn mapDomain(input, function(string) {\n\t\t\treturn regexPunycode.test(string)\n\t\t\t\t? decode(string.slice(4).toLowerCase())\n\t\t\t\t: string;\n\t\t});\n\t}\n\n\t/**\n\t * Converts a Unicode string representing a domain name or an email address to\n\t * Punycode. Only the non-ASCII parts of the domain name will be converted,\n\t * i.e. it doesn't matter if you call it with a domain that's already in\n\t * ASCII.\n\t * @memberOf punycode\n\t * @param {String} input The domain name or email address to convert, as a\n\t * Unicode string.\n\t * @returns {String} The Punycode representation of the given domain name or\n\t * email address.\n\t */\n\tfunction toASCII(input) {\n\t\treturn mapDomain(input, function(string) {\n\t\t\treturn regexNonASCII.test(string)\n\t\t\t\t? 'xn--' + encode(string)\n\t\t\t\t: string;\n\t\t});\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\t/** Define the public API */\n\tpunycode = {\n\t\t/**\n\t\t * A string representing the current Punycode.js version number.\n\t\t * @memberOf punycode\n\t\t * @type String\n\t\t */\n\t\t'version': '1.4.1',\n\t\t/**\n\t\t * An object of methods to convert from JavaScript's internal character\n\t\t * representation (UCS-2) to Unicode code points, and back.\n\t\t * @see <https://mathiasbynens.be/notes/javascript-encoding>\n\t\t * @memberOf punycode\n\t\t * @type Object\n\t\t */\n\t\t'ucs2': {\n\t\t\t'decode': ucs2decode,\n\t\t\t'encode': ucs2encode\n\t\t},\n\t\t'decode': decode,\n\t\t'encode': encode,\n\t\t'toASCII': toASCII,\n\t\t'toUnicode': toUnicode\n\t};\n\n\t/** Expose `punycode` */\n\t// Some AMD build optimizers, like r.js, check for specific condition patterns\n\t// like the following:\n\tif (\n\t\ttypeof define == 'function' &&\n\t\ttypeof define.amd == 'object' &&\n\t\tdefine.amd\n\t) {\n\t\tdefine('punycode', function() {\n\t\t\treturn punycode;\n\t\t});\n\t} else if (freeExports && freeModule) {\n\t\tif (module.exports == freeExports) {\n\t\t\t// in Node.js, io.js, or RingoJS v0.8.0+\n\t\t\tfreeModule.exports = punycode;\n\t\t} else {\n\t\t\t// in Narwhal or RingoJS v0.7.0-\n\t\t\tfor (key in punycode) {\n\t\t\t\tpunycode.hasOwnProperty(key) && (freeExports[key] = punycode[key]);\n\t\t\t}\n\t\t}\n\t} else {\n\t\t// in Rhino or a web browser\n\t\troot.punycode = punycode;\n\t}\n\n}(this));\n\n\n\n// WEBPACK FOOTER //\n// ./~/punycode/punycode.js","// Load modules\n\nvar Stringify = require('./stringify');\nvar Parse = require('./parse');\n\n\n// Declare internals\n\nvar internals = {};\n\n\nmodule.exports = {\n    stringify: Stringify,\n    parse: Parse\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/qs/lib/index.js","// Load modules\n\nvar Utils = require('./utils');\n\n\n// Declare internals\n\nvar internals = {\n    delimiter: '&',\n    depth: 5,\n    arrayLimit: 20,\n    parameterLimit: 1000,\n    strictNullHandling: false,\n    plainObjects: false,\n    allowPrototypes: false,\n    allowDots: false\n};\n\n\ninternals.parseValues = function (str, options) {\n\n    var obj = {};\n    var parts = str.split(options.delimiter, options.parameterLimit === Infinity ? undefined : options.parameterLimit);\n\n    for (var i = 0, il = parts.length; i < il; ++i) {\n        var part = parts[i];\n        var pos = part.indexOf(']=') === -1 ? part.indexOf('=') : part.indexOf(']=') + 1;\n\n        if (pos === -1) {\n            obj[Utils.decode(part)] = '';\n\n            if (options.strictNullHandling) {\n                obj[Utils.decode(part)] = null;\n            }\n        }\n        else {\n            var key = Utils.decode(part.slice(0, pos));\n            var val = Utils.decode(part.slice(pos + 1));\n\n            if (!Object.prototype.hasOwnProperty.call(obj, key)) {\n                obj[key] = val;\n            }\n            else {\n                obj[key] = [].concat(obj[key]).concat(val);\n            }\n        }\n    }\n\n    return obj;\n};\n\n\ninternals.parseObject = function (chain, val, options) {\n\n    if (!chain.length) {\n        return val;\n    }\n\n    var root = chain.shift();\n\n    var obj;\n    if (root === '[]') {\n        obj = [];\n        obj = obj.concat(internals.parseObject(chain, val, options));\n    }\n    else {\n        obj = options.plainObjects ? Object.create(null) : {};\n        var cleanRoot = root[0] === '[' && root[root.length - 1] === ']' ? root.slice(1, root.length - 1) : root;\n        var index = parseInt(cleanRoot, 10);\n        var indexString = '' + index;\n        if (!isNaN(index) &&\n            root !== cleanRoot &&\n            indexString === cleanRoot &&\n            index >= 0 &&\n            (options.parseArrays &&\n             index <= options.arrayLimit)) {\n\n            obj = [];\n            obj[index] = internals.parseObject(chain, val, options);\n        }\n        else {\n            obj[cleanRoot] = internals.parseObject(chain, val, options);\n        }\n    }\n\n    return obj;\n};\n\n\ninternals.parseKeys = function (key, val, options) {\n\n    if (!key) {\n        return;\n    }\n\n    // Transform dot notation to bracket notation\n\n    if (options.allowDots) {\n        key = key.replace(/\\.([^\\.\\[]+)/g, '[$1]');\n    }\n\n    // The regex chunks\n\n    var parent = /^([^\\[\\]]*)/;\n    var child = /(\\[[^\\[\\]]*\\])/g;\n\n    // Get the parent\n\n    var segment = parent.exec(key);\n\n    // Stash the parent if it exists\n\n    var keys = [];\n    if (segment[1]) {\n        // If we aren't using plain objects, optionally prefix keys\n        // that would overwrite object prototype properties\n        if (!options.plainObjects &&\n            Object.prototype.hasOwnProperty(segment[1])) {\n\n            if (!options.allowPrototypes) {\n                return;\n            }\n        }\n\n        keys.push(segment[1]);\n    }\n\n    // Loop through children appending to the array until we hit depth\n\n    var i = 0;\n    while ((segment = child.exec(key)) !== null && i < options.depth) {\n\n        ++i;\n        if (!options.plainObjects &&\n            Object.prototype.hasOwnProperty(segment[1].replace(/\\[|\\]/g, ''))) {\n\n            if (!options.allowPrototypes) {\n                continue;\n            }\n        }\n        keys.push(segment[1]);\n    }\n\n    // If there's a remainder, just add whatever is left\n\n    if (segment) {\n        keys.push('[' + key.slice(segment.index) + ']');\n    }\n\n    return internals.parseObject(keys, val, options);\n};\n\n\nmodule.exports = function (str, options) {\n\n    options = options || {};\n    options.delimiter = typeof options.delimiter === 'string' || Utils.isRegExp(options.delimiter) ? options.delimiter : internals.delimiter;\n    options.depth = typeof options.depth === 'number' ? options.depth : internals.depth;\n    options.arrayLimit = typeof options.arrayLimit === 'number' ? options.arrayLimit : internals.arrayLimit;\n    options.parseArrays = options.parseArrays !== false;\n    options.allowDots = typeof options.allowDots === 'boolean' ? options.allowDots : internals.allowDots;\n    options.plainObjects = typeof options.plainObjects === 'boolean' ? options.plainObjects : internals.plainObjects;\n    options.allowPrototypes = typeof options.allowPrototypes === 'boolean' ? options.allowPrototypes : internals.allowPrototypes;\n    options.parameterLimit = typeof options.parameterLimit === 'number' ? options.parameterLimit : internals.parameterLimit;\n    options.strictNullHandling = typeof options.strictNullHandling === 'boolean' ? options.strictNullHandling : internals.strictNullHandling;\n\n    if (str === '' ||\n        str === null ||\n        typeof str === 'undefined') {\n\n        return options.plainObjects ? Object.create(null) : {};\n    }\n\n    var tempObj = typeof str === 'string' ? internals.parseValues(str, options) : str;\n    var obj = options.plainObjects ? Object.create(null) : {};\n\n    // Iterate over the keys and setup the new object\n\n    var keys = Object.keys(tempObj);\n    for (var i = 0, il = keys.length; i < il; ++i) {\n        var key = keys[i];\n        var newObj = internals.parseKeys(key, tempObj[key], options);\n        obj = Utils.merge(obj, newObj, options);\n    }\n\n    return Utils.compact(obj);\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/qs/lib/parse.js","// Load modules\n\nvar Utils = require('./utils');\n\n\n// Declare internals\n\nvar internals = {\n    delimiter: '&',\n    arrayPrefixGenerators: {\n        brackets: function (prefix, key) {\n\n            return prefix + '[]';\n        },\n        indices: function (prefix, key) {\n\n            return prefix + '[' + key + ']';\n        },\n        repeat: function (prefix, key) {\n\n            return prefix;\n        }\n    },\n    strictNullHandling: false,\n    skipNulls: false,\n    encode: true\n};\n\n\ninternals.stringify = function (obj, prefix, generateArrayPrefix, strictNullHandling, skipNulls, encode, filter, sort) {\n\n    if (typeof filter === 'function') {\n        obj = filter(prefix, obj);\n    }\n    else if (Utils.isBuffer(obj)) {\n        obj = obj.toString();\n    }\n    else if (obj instanceof Date) {\n        obj = obj.toISOString();\n    }\n    else if (obj === null) {\n        if (strictNullHandling) {\n            return encode ? Utils.encode(prefix) : prefix;\n        }\n\n        obj = '';\n    }\n\n    if (typeof obj === 'string' ||\n        typeof obj === 'number' ||\n        typeof obj === 'boolean') {\n\n        if (encode) {\n            return [Utils.encode(prefix) + '=' + Utils.encode(obj)];\n        }\n        return [prefix + '=' + obj];\n    }\n\n    var values = [];\n\n    if (typeof obj === 'undefined') {\n        return values;\n    }\n\n    var objKeys;\n    if (Array.isArray(filter)) {\n        objKeys = filter;\n    } else {\n        var keys = Object.keys(obj);\n        objKeys = sort ? keys.sort(sort) : keys;\n    }\n\n    for (var i = 0, il = objKeys.length; i < il; ++i) {\n        var key = objKeys[i];\n\n        if (skipNulls &&\n            obj[key] === null) {\n\n            continue;\n        }\n\n        if (Array.isArray(obj)) {\n            values = values.concat(internals.stringify(obj[key], generateArrayPrefix(prefix, key), generateArrayPrefix, strictNullHandling, skipNulls, encode, filter));\n        }\n        else {\n            values = values.concat(internals.stringify(obj[key], prefix + '[' + key + ']', generateArrayPrefix, strictNullHandling, skipNulls, encode, filter));\n        }\n    }\n\n    return values;\n};\n\n\nmodule.exports = function (obj, options) {\n\n    options = options || {};\n    var delimiter = typeof options.delimiter === 'undefined' ? internals.delimiter : options.delimiter;\n    var strictNullHandling = typeof options.strictNullHandling === 'boolean' ? options.strictNullHandling : internals.strictNullHandling;\n    var skipNulls = typeof options.skipNulls === 'boolean' ? options.skipNulls : internals.skipNulls;\n    var encode = typeof options.encode === 'boolean' ? options.encode : internals.encode;\n    var sort = typeof options.sort === 'function' ? options.sort : null;\n    var objKeys;\n    var filter;\n    if (typeof options.filter === 'function') {\n        filter = options.filter;\n        obj = filter('', obj);\n    }\n    else if (Array.isArray(options.filter)) {\n        objKeys = filter = options.filter;\n    }\n\n    var keys = [];\n\n    if (typeof obj !== 'object' ||\n        obj === null) {\n\n        return '';\n    }\n\n    var arrayFormat;\n    if (options.arrayFormat in internals.arrayPrefixGenerators) {\n        arrayFormat = options.arrayFormat;\n    }\n    else if ('indices' in options) {\n        arrayFormat = options.indices ? 'indices' : 'repeat';\n    }\n    else {\n        arrayFormat = 'indices';\n    }\n\n    var generateArrayPrefix = internals.arrayPrefixGenerators[arrayFormat];\n\n    if (!objKeys) {\n        objKeys = Object.keys(obj);\n    }\n\n    if (sort) {\n        objKeys.sort(sort);\n    }\n\n    for (var i = 0, il = objKeys.length; i < il; ++i) {\n        var key = objKeys[i];\n\n        if (skipNulls &&\n            obj[key] === null) {\n\n            continue;\n        }\n\n        keys = keys.concat(internals.stringify(obj[key], key, generateArrayPrefix, strictNullHandling, skipNulls, encode, filter, sort));\n    }\n\n    return keys.join(delimiter);\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/qs/lib/stringify.js","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\n// If obj.hasOwnProperty has been overridden, then calling\n// obj.hasOwnProperty(prop) will break.\n// See: https://github.com/joyent/node/issues/1707\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\nmodule.exports = function(qs, sep, eq, options) {\n  sep = sep || '&';\n  eq = eq || '=';\n  var obj = {};\n\n  if (typeof qs !== 'string' || qs.length === 0) {\n    return obj;\n  }\n\n  var regexp = /\\+/g;\n  qs = qs.split(sep);\n\n  var maxKeys = 1000;\n  if (options && typeof options.maxKeys === 'number') {\n    maxKeys = options.maxKeys;\n  }\n\n  var len = qs.length;\n  // maxKeys <= 0 means that we should not limit keys count\n  if (maxKeys > 0 && len > maxKeys) {\n    len = maxKeys;\n  }\n\n  for (var i = 0; i < len; ++i) {\n    var x = qs[i].replace(regexp, '%20'),\n        idx = x.indexOf(eq),\n        kstr, vstr, k, v;\n\n    if (idx >= 0) {\n      kstr = x.substr(0, idx);\n      vstr = x.substr(idx + 1);\n    } else {\n      kstr = x;\n      vstr = '';\n    }\n\n    k = decodeURIComponent(kstr);\n    v = decodeURIComponent(vstr);\n\n    if (!hasOwnProperty(obj, k)) {\n      obj[k] = v;\n    } else if (isArray(obj[k])) {\n      obj[k].push(v);\n    } else {\n      obj[k] = [obj[k], v];\n    }\n  }\n\n  return obj;\n};\n\nvar isArray = Array.isArray || function (xs) {\n  return Object.prototype.toString.call(xs) === '[object Array]';\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/querystring-es3/decode.js","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar stringifyPrimitive = function(v) {\n  switch (typeof v) {\n    case 'string':\n      return v;\n\n    case 'boolean':\n      return v ? 'true' : 'false';\n\n    case 'number':\n      return isFinite(v) ? v : '';\n\n    default:\n      return '';\n  }\n};\n\nmodule.exports = function(obj, sep, eq, name) {\n  sep = sep || '&';\n  eq = eq || '=';\n  if (obj === null) {\n    obj = undefined;\n  }\n\n  if (typeof obj === 'object') {\n    return map(objectKeys(obj), function(k) {\n      var ks = encodeURIComponent(stringifyPrimitive(k)) + eq;\n      if (isArray(obj[k])) {\n        return map(obj[k], function(v) {\n          return ks + encodeURIComponent(stringifyPrimitive(v));\n        }).join(sep);\n      } else {\n        return ks + encodeURIComponent(stringifyPrimitive(obj[k]));\n      }\n    }).join(sep);\n\n  }\n\n  if (!name) return '';\n  return encodeURIComponent(stringifyPrimitive(name)) + eq +\n         encodeURIComponent(stringifyPrimitive(obj));\n};\n\nvar isArray = Array.isArray || function (xs) {\n  return Object.prototype.toString.call(xs) === '[object Array]';\n};\n\nfunction map (xs, f) {\n  if (xs.map) return xs.map(f);\n  var res = [];\n  for (var i = 0; i < xs.length; i++) {\n    res.push(f(xs[i], i));\n  }\n  return res;\n}\n\nvar objectKeys = Object.keys || function (obj) {\n  var res = [];\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) res.push(key);\n  }\n  return res;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/querystring-es3/encode.js","'use strict';\n\nexports.decode = exports.parse = require('./decode');\nexports.encode = exports.stringify = require('./encode');\n\n\n\n// WEBPACK FOOTER //\n// ./~/querystring-es3/index.js","'use strict';\n\nmodule.exports = {\n  isString: function(arg) {\n    return typeof(arg) === 'string';\n  },\n  isObject: function(arg) {\n    return typeof(arg) === 'object' && arg !== null;\n  },\n  isNull: function(arg) {\n    return arg === null;\n  },\n  isNullOrUndefined: function(arg) {\n    return arg == null;\n  }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/url/util.js","var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1,eval)(\"this\");\r\n} catch(e) {\r\n\t// This works if the window reference is available\r\n\tif(typeof window === \"object\")\r\n\t\tg = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n\n\n\n// WEBPACK FOOTER //\n// (webpack)/buildin/global.js","module.exports = function(module) {\r\n\tif(!module.webpackPolyfill) {\r\n\t\tmodule.deprecate = function() {};\r\n\t\tmodule.paths = [];\r\n\t\t// module.parent = undefined by default\r\n\t\tif(!module.children) module.children = [];\r\n\t\tObject.defineProperty(module, \"loaded\", {\r\n\t\t\tenumerable: true,\r\n\t\t\tget: function() {\r\n\t\t\t\treturn module.l;\r\n\t\t\t}\r\n\t\t});\r\n\t\tObject.defineProperty(module, \"id\", {\r\n\t\t\tenumerable: true,\r\n\t\t\tget: function() {\r\n\t\t\t\treturn module.i;\r\n\t\t\t}\r\n\t\t});\r\n\t\tmodule.webpackPolyfill = 1;\r\n\t}\r\n\treturn module;\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// (webpack)/buildin/module.js","\"use strict\";\n\nexport default class PubSub {\n  constructor() {\n    this.container = [];\n  }\n  push(cb) {\n    (cb instanceof Function) && this.container.push(cb);\n  }\n  resolve(data) {\n    this.container.forEach(cb=> cb(null, data));\n    this.container = [];\n  }\n  reject(err) {\n    this.container.forEach(cb=> cb(err));\n    this.container = [];\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/PubSub.js","\"use strict\";\n\nexport default function() {\n  let data;\n  let hasData = false;\n  return {\n    set(val) {\n      if (!hasData) {\n        data = val;\n        hasData = true;\n        return true;\n      }\n      return false;\n    },\n    empty() {\n      return !hasData;\n    },\n    pop() {\n      if (hasData) {\n        hasData = false;\n        const result = data;\n        data = null;\n        return result;\n      }\n    }\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/createHolder.js","\"use strict\";\n\nfunction none() {}\n\nexport default function fetchResolver(index=0, opts={}, cb=none) {\n  if (!opts.prefetch || index >= opts.prefetch.length) {\n    cb();\n  } else {\n    opts.prefetch[index](opts,\n      err=> err ? cb(err) : fetchResolver(index + 1, opts, cb));\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/fetchResolver.js","\"use strict\";\n\nimport qs from \"qs\";\nimport { parse } from \"url\";\nimport omit from \"./utils/omit\";\nimport merge from \"./utils/merge\";\n\n/* eslint no-useless-escape: 0 */\nconst rxClean = /(\\(:[^\\)]+\\)|:[^\\/]+)/g;\n\n/**\n * Url modification\n * @param  {String} url     url template\n * @param  {Object} params  params for url template\n * @param  {Object} options transformation options, accepts +delimiter+, +arrayFormat+,\n *                          +qsStringifyOptions+ and +qsParseOptions+\n * @return {String}         result url\n */\nexport default function urlTransform(url, params, options) {\n  if (!url) { return \"\"; }\n  params || (params = {});\n  const usedKeys = {};\n\n  const urlWithParams = Object.keys(params).reduce((url, key)=> {\n    const value = params[key];\n    const rx = new RegExp(`(\\\\(:${key}\\\\)|:${key})`, \"g\");\n    return url.replace(rx, ()=> {\n      usedKeys[key] = value;\n      return value;\n    });\n  }, url);\n\n\n  if (!urlWithParams) { return urlWithParams; }\n  const { protocol, host, path } = parse(urlWithParams);\n  const cleanURL = (host) ?\n    `${protocol}//${host}${path.replace(rxClean, \"\")}` :\n    path.replace(rxClean, \"\");\n  const usedKeysArray = Object.keys(usedKeys);\n  if (usedKeysArray.length !== Object.keys(params).length) {\n    const urlObject = cleanURL.split(\"?\");\n    options || (options = {});\n    const { arrayFormat, delimiter } = options;\n    const qsParseOptions = {\n      arrayFormat,\n      delimiter,\n      ...options.qsParseOptions\n    };\n    const mergeParams = merge(\n      (urlObject[1] && qs.parse(urlObject[1], qsParseOptions)),\n      omit(params, usedKeysArray)\n    );\n    const qsStringifyOptions = {\n      arrayFormat,\n      delimiter,\n      ...options.qsStringifyOptions\n    };\n    const urlStringParams = qs.stringify(mergeParams, qsStringifyOptions);\n    return `${urlObject[0]}?${urlStringParams}`;\n  }\n  return cleanURL;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/urlTransform.js","\"use strict\";\n\n/* eslint no-void: 0 */\nfunction isEmpty(name) {\n  return name === \"\" || name === null || name === (void 0);\n}\n\nexport default function (obj, ...path) {\n  return path.reduce(\n    (memo, name)=> isEmpty(name) ? memo : (memo && memo[name])\n  , obj);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/get.js","export default function(object, props) {\n  if (!Array.isArray(props)) {\n    return { ...object };\n  }\n\n  return Object.keys(object || {}).reduce((memo, key)=> {\n    if (props.indexOf(key) === -1) {\n      memo[key] = object[key];\n    }\n    return memo;\n  }, {});\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/omit.js","\"use strict\";\n\n/* eslint no-void: 0 */\n\nimport { fromJS } from \"immutable\";\n\nimport reducerFn from \"./reducerFn\";\nimport actionFn from \"./actionFn\";\nimport transformers from \"./transformers\";\nimport async from \"./async\";\n\n// export { transformers, async };\n\n/**\n * Default configuration for each endpoint\n * @type {Object}\n */\nconst defaultEndpointConfig = {\n  transformer: transformers.object\n};\n\nconst PREFIX = \"@@redux-api\";\n/**\n * Entry api point\n * @param {Object} config Rest api configuration\n * @param {Object} baseConfig baseConfig settings for Rest api\n * @param {Function} fetch Adapter for rest requests\n * @param {Boolean} isServer false by default (fif you want to use it for isomorphic apps)\n * @return {actions, reducers}        { actions, reducers}\n * @example ```js\n *   const api = reduxApi({\n *     test: \"/plain/url\",\n *     testItem: \"/plain/url/:id\",\n *     testModify: {\n *       url: \"/plain/url/:endpoint\",\n\n *       transformer: (data)=> !data ?\n *          { title: \"\", message: \"\" } :\n *          { title: data.title, message: data.message },\n *       options: {\n *         method: \"post\"\n *         headers: {\n *           \"Accept\": \"application/json\",\n *           \"Content-Type\": \"application/json\"\n *         }\n *       }\n *     }\n *   });\n *   // register reducers\n *\n *   // call actions\n *   dispatch(api.actions.test());\n *   dispatch(api.actions.testItem({id: 1}));\n *   dispatch(api.actions.testModify({endpoint: \"upload-1\"}, {\n *     body: JSON.stringify({title: \"Hello\", message: \"World\"})\n *   }));\n * ```\n */\n\nexport default function reduxApi(config, baseConfig) {\n  config || (config = {});\n\n  const fetchHolder = {\n    fetch: null,\n    server: false,\n    rootUrl: null,\n    middlewareParser: null,\n    options: {},\n    responseHandler: null\n  };\n\n  const cfg = {\n    use(key, value) {\n      fetchHolder[key] = value;\n\n      return this;\n    },\n    init(fetch, isServer=false, rootUrl) {\n      /* eslint no-console: 0 */\n      console.warn(\"Deprecated method, use `use` method\");\n      this.use(\"fetch\", fetch);\n      this.use(\"server\", isServer);\n      this.use(\"rootUrl\", rootUrl);\n      return this;\n    },\n    actions: {},\n    reducers: {},\n    events: {}\n  };\n  function fnConfigCallback(memo, value, key) {\n    const opts = typeof value === \"object\" ?\n      { ...defaultEndpointConfig, reducerName: key, ...value } :\n      { ...defaultEndpointConfig, reducerName: key, url: value };\n\n    if (opts.broadcast !== (void 0)) {\n      /* eslint no-console: 0 */\n      console.warn(\"Deprecated `broadcast` option. you shoud use `events`\" +\n      \"to catch redux-api events (see https://github.com/lexich/redux-api/blob/master/DOCS.md#Events)\");\n    }\n\n    const {\n      url, urlOptions, options, transformer, broadcast, crud,\n      reducerName, prefetch, postfetch, validation, helpers,\n    } = opts;\n\n    const prefix = (baseConfig && baseConfig.prefix) || \"\";\n\n    const ACTIONS = {\n      actionFetch: `${PREFIX}@${prefix}${reducerName}`,\n      actionSuccess: `${PREFIX}@${prefix}${reducerName}_success`,\n      actionFail: `${PREFIX}@${prefix}${reducerName}_fail`,\n      actionReset: `${PREFIX}@${prefix}${reducerName}_delete`\n    };\n\n    const meta = {\n      urlOptions,\n      fetch: opts.fetch ? opts.fetch : function(...args) {\n        return fetchHolder.fetch.apply(this, args);\n      },\n      holder: fetchHolder,\n      broadcast,\n      virtual: !!opts.virtual,\n      reducerName,\n      actions: memo.actions,\n      prefetch,\n      postfetch,\n      validation,\n      helpers,\n      transformer,\n      prefix,\n      crud\n    };\n\n    memo.actions[key] = actionFn(url, key, options, ACTIONS, meta);\n\n    if (!meta.virtual && !memo.reducers[reducerName]) {\n      const initialState = fromJS({\n        sync: false,\n        syncing: false,\n        loading: false,\n        data: transformer()\n      });\n      const reducer = opts.reducer ? opts.reducer.bind(memo) : null;\n      memo.reducers[reducerName] = reducerFn(initialState, ACTIONS, reducer);\n    }\n    memo.events[reducerName] = ACTIONS;\n    return memo;\n  }\n\n  return Object.keys(config).reduce(\n    (memo, key)=> fnConfigCallback(memo, config[key], key, config), cfg);\n}\n\nreduxApi.transformers = transformers;\nreduxApi.async = async;\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js"],"sourceRoot":""}